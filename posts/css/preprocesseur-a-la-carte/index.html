<!DOCTYPE html><html lang="fr"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width, init-scale=1.0, minimal-ui"><title>Faire son pr√©processeur CSS √† la carte</title><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@putaindecode"/><meta name="twitter:title" content="Faire son pr√©processeur CSS √† la carte"/><meta name="twitter:creator" content="@MoOx"/><meta name="twitter:image" content="http://www.gravatar.com/avatar/2f6c2dcd4ba8fc44f1e7f0b2ed3d587d.png?s=200"/><meta property="og:title" content="Faire son pr√©processeur CSS √† la carte"/><meta property="og:type" content="article"/><meta property="og:image" content="http://www.gravatar.com/avatar/2f6c2dcd4ba8fc44f1e7f0b2ed3d587d.png?s=200"/><meta property="og:site_name" content="Putain de code !"/><link rel="stylesheet" href="../../../stylesheets/index.css"><link rel="alternate" href="../../../feed.xml" title="Putain de code !" type="application/atom+xml"></head><body><svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="putainde-Icon-bookmark" viewBox="0 0 512 512">
      <title>bookmark icon</title>
      <path d="M318.275 90v283.23L256 318.16l-62.275 55.07V90h124.55m40-40h-204.55v412L256 371.557 358.275 462V50z"/>
    </symbol>

    <symbol id="putainde-Icon-github" viewBox="0 0 512 512">
      <title>github icon</title>
      <path d="M461.633 250.645l.367-3.82c-22.896-2.22-45.667-2.418-67.79-.73 3.557-11.346 5.43-24.163 5.295-38.738-.292-30.965-10.616-55.08-26.843-75.096 3.116-18.85.77-37.7-5.11-56.56-23.188 1.898-44.054 9.493-62.635 22.686-34.725-7.044-69.447-7.493-104.172 0-21.673-14.627-42.956-21.802-63.91-22.686-6.21 20.765-7.168 41.233-1.916 61.357-18.28 19.397-25.27 42.944-24.926 69.02.196 14.926 2.496 28.208 6.738 39.95-21.796-1.598-44.2-1.385-66.732.8l.367 3.818c22.947-2.228 45.76-2.41 67.92-.678.813 1.974 1.632 3.94 2.566 5.815-24.01-.633-45.618 1.453-65.854 6.43l.913 3.723c20.538-5.048 42.54-7.08 67.107-6.254 16.246 28.865 47.52 45.825 93.063 51.206-10.58 8.594-16.27 18.73-17.735 30.2h-24.12c-32.395 0-41.227-41.303-74.78-37.228C132 320 125.5 371.598 177.588 371.598h21.88v47.297c.234 7.643-3.093 12.754-8.47 16.297 18.655 1.884 32.675-7.43 32.675-18.854V353.82l5.833-6v72.992c.245 7.265-3.284 11.392-7.03 15.34 16.433.653 31.89-2.63 32.59-16.616V349.68s5.757-3.6 5.757 0v66.58c.17 11.8 10.36 21.366 31.953 19.892-5.776-4.65-7.55-9.35-7.55-16.15v-72.18s5.95-.307 5.95 6v60.88c0 13.55 16.268 19.14 34.83 18.615-6.08-4.558-10.196-9.99-10.223-17.256v-73.216c-.63-10.762-5.003-20.906-13.582-30.358 41.63-6.392 71.638-23.01 86.58-52.796 24.646-.847 46.714 1.183 67.306 6.246l.914-3.723c-20.394-5.014-42.18-7.096-66.416-6.415.84-1.89 1.67-3.79 2.39-5.785 22.39-1.798 45.457-1.622 68.66.632zM114 310.023c-1.023 0-1.853-.588-1.853-1.313 0-.728.83-1.315 1.853-1.315 1.024 0 1.854.588 1.854 1.315 0 .726-.83 1.313-1.854 1.313zm5.833 3.98c-1.137 0-2.06-.653-2.06-1.46s.923-1.462 2.06-1.462 2.06.656 2.06 1.463-.923 1.46-2.06 1.46zm5.917 5.17c-1.333 0-2.415-.767-2.415-1.713s1.082-1.714 2.415-1.714 2.416.768 2.416 1.714-1.083 1.712-2.416 1.712zm5.75 6.206c-1.56 0-2.825-.897-2.825-2.004s1.265-2.005 2.825-2.005 2.825.9 2.825 2.006-1.265 2.003-2.825 2.003zm6.333 7.014c-1.733 0-3.14-.996-3.14-2.226s1.407-2.228 3.14-2.228 3.14.998 3.14 2.228-1.407 2.226-3.14 2.226zm7.334 7.123c-1.926 0-3.488-1.107-3.488-2.474s1.56-2.476 3.487-2.476c1.925 0 3.487 1.11 3.487 2.476s-1.562 2.474-3.487 2.474zm9.916 6.774c-2.14 0-3.875-1.23-3.875-2.748 0-1.52 1.735-2.75 3.875-2.75s3.875 1.23 3.875 2.75c0 1.518-1.735 2.75-3.875 2.75zm12.292 3.626c-2.14 0-3.875-1.23-3.875-2.75 0-1.518 1.735-2.75 3.875-2.75s3.875 1.232 3.875 2.75c0 1.52-1.735 2.75-3.875 2.75zm12.958.417c-2.14 0-3.875-1.23-3.875-2.75 0-1.518 1.735-2.75 3.875-2.75s3.875 1.232 3.875 2.75c0 1.52-1.735 2.75-3.875 2.75zm12.792.25c-2.14 0-3.875-1.23-3.875-2.75 0-1.518 1.735-2.75 3.875-2.75s3.875 1.232 3.875 2.75c0 1.52-1.735 2.75-3.875 2.75z"/>
    </symbol>

    <symbol id="putainde-Icon-home" viewBox="0 0 512 512">
      <title>home icon</title>
      <path d="M394.072 174.805l-47.916-48.023v-38.31h47.916v86.333zM462 275.815h-42.508v166.213H92.508V275.815H50L256 69.972l206 205.843zm-165.153-3.843c-15.81-3.316-29.02 4.086-38.792 19.387-9.77-15.302-22.98-22.704-38.79-19.388-36.745 10.876-36.335 69.543 38.583 113.047 75.06-43.26 75.742-102.172 39-113.048z"/>
    </symbol>

    <symbol id="putainde-Icon-pencil" viewBox="0 0 512 512">
      <title>pencil icon</title>
      <path d="M74.686 340.686L50 460.95l122.365-22.585L379.52 231.21l-97.68-97.68L74.686 340.687zm228.402-135.654l-181.89 181.89-21.214-21.213 181.89-181.89 21.214 21.212zM462 148.732l-52.662 52.66-97.682-97.68 52.662-52.662L462 148.73z"/>
    </symbol>

    <symbol id="putainde-Icon-text-file" viewBox="0 0 512 512">
      <title>text-file icon</title>
      <path d="M256 370.312h-84.495v-30H256v30zm83.495-55.416h-167.99v-30h167.99v30zm0-55.334h-167.99v-30h167.99v30zM297.818 90v85.75h85.864V422H128.317V90h169.5m25-40h-234.5v412h335.365V150.75L322.818 50z"/>
    </symbol>

    <symbol id="putainde-Icon-twitter" viewBox="0 0 512 512">
      <title>twitter icon</title>
      <path d="M462 128.223c-15.158 6.724-31.45 11.27-48.547 13.31 17.45-10.46 30.854-27.025 37.164-46.764-16.333 9.686-34.422 16.72-53.676 20.51-15.417-16.428-37.385-26.69-61.697-26.69-54.56 0-94.668 50.915-82.337 103.786-70.25-3.524-132.534-37.177-174.223-88.314-22.142 37.983-11.485 87.69 26.158 112.85-13.853-.438-26.89-4.24-38.284-10.574-.917 39.162 27.146 75.78 67.795 83.95-11.895 3.236-24.925 3.977-38.17 1.446 10.755 33.58 41.973 58.018 78.96 58.7C139.605 378.28 94.847 390.72 50 385.435c37.406 23.982 81.837 37.977 129.57 37.977 156.933 0 245.596-132.55 240.252-251.435 16.517-11.917 30.846-26.804 42.178-43.755z"/>
    </symbol>
</svg><div class="putainde-Header"><div class="Grid"><div class="Grid-cell u-size5of12"><a href="../../.." class="putainde-SiteTitle"><img alt="Putain de code !" src="../../../images/p!-logo.svg" class="putainde-Logo"><span>Putain de code !</span></a></div><div class="Grid-cell u-size7of12"><nav class="putainde-Nav"><a href="../.." data-rcp-tooltip="" class="putainde-Nav-item  "><svg style="" class="putainde-Icon putainde-Icon-bookmark"><use xlink:href="#putainde-Icon-bookmark"></use></svg> Articles</a><a href="../../../c-est-quoi-putaindecode" data-rcp-tooltip="" class="putainde-Nav-item  "><svg style="" class="putainde-Icon putainde-Icon-text-file"><use xlink:href="#putainde-Icon-text-file"></use></svg> Readme</a><a href="../../comment-contribuer" data-rcp-tooltip="" class="putainde-Nav-item  "><svg style="" class="putainde-Icon putainde-Icon-pencil"><use xlink:href="#putainde-Icon-pencil"></use></svg> Participer</a><a href="https://github.com/putaindecode/" data-rcp-tooltip="GitHub" class="putainde-Nav-item  putainde-Nav-item--icon rcp-Tooltip rcp-Tooltip--bottom"><svg style="" class="putainde-Icon putainde-Icon-github"><use xlink:href="#putainde-Icon-github"></use></svg></a><a href="https://twitter.com/putaindecode/" data-rcp-tooltip="Twitter" class="putainde-Nav-item  putainde-Nav-item--icon rcp-Tooltip rcp-Tooltip--bottom"><svg style="" class="putainde-Icon putainde-Icon-twitter"><use xlink:href="#putainde-Icon-twitter"></use></svg></a></nav></div></div></div><div class="putainde-Main"><article class="Grid putainde-Post"><div class="Grid-cell u-size8of12 Grid putainde-Post-contents"><div class="putainde-Title"><h1 class="putainde-Title-text">Faire son pr√©processeur CSS √† la carte</h1></div><header class="putainde-Post-header"><div class="putainde-Post-metas">√âcrit par¬†<a href="http://moox.io/">MoOx</a>,<span class="putainde-Date"> le 20 mai 2014</span>. <span data-rcp-tooltip="Temps de lecture approximatif, sur une base de {{wpm}} mots par minute" data-readingTime-wpm="250" class="putainde-Post-readingTime putainde-Post-readingTime--hidden rcp-Tooltip rcp-Tooltip--top rcp-Tooltip--nowrap">Temps de lecture : environ  <span class="putainde-Post-readingTime-value"></span> minutes</span></div><ul class="putainde-Tags putainde-Post-tags"><li class="putainde-Tag">css</li><li class="putainde-Tag">preprocesseur</li><li class="putainde-Tag">postprocesseur</li></ul></header><div class="putainde-Post-md"><p>Apr√®s vous avoir fait un petit <a href="/posts/css/le-point-sur-les-preprocesseurs/">√©tat de l‚Äôart des pr√©processeurs CSS historiques</a>
et vous avoir parl√© <a href="/posts/css/le-point-sur-les-preprocesseurs/">des postprocesseurs</a>,
je me dois de vous montrer le chemin qui me semble le plus pertinent aujourd‚Äôhui,
en 2014, maintenant que <a href="http://www.w3.org/standards/techs/css#cr">les sp√©cifications CSS sont d√©coup√©es en modules</a>
qui peuvent du coup avancer (plus rapidement) chacune de leur c√¥t√©.</p>
<p>Bon apr√®s faut avouer que chez {p!} on fait genre on est des hipsters hackers,
du coup quand on voit que <a href="http://blog.kaelig.fr/post/85546040569/net-awards-sass-game-changer-of-the-year">Sass est le game changer of the year</a>
 et que tout le monde l‚Äôadopte, on se doit de rester hipster.
Du coup on est oblig√©s de passer √† autre chose.</p>
<h2 id="pre-ou-postprocesseurs-"><a class="putainde-Title-anchor" href="#pre-ou-postprocesseurs-">#</a>Pr√© ou postprocesseurs ?</h2><p>Je vais ici utiliser le mot pr√©processeur, alors que certains trouveront postprocesseurs plus pertinent,
car pour moi le pr√©processing reste simplement une √©tape avant le <em>processing</em>
de nos feuilles de styles par les navigateurs.</p>
<p>Cela dit il faut bien distinguer les √©tapes :</p>
<ol>
<li>Preprocessing d‚Äôun langage sp√©cifique (Sass, Stylus*) ou superset du langage CSS (Scss, Less);</li>
<li>Preprocessing d‚Äôun fichier respectant la syntaxe CSS;</li>
<li>Processing par le navigateur</li>
</ol>
<p>Revenons rapidement sur ces 3 points :</p>
<h3 id="preprocessing-via-langage-dedie"><a class="putainde-Title-anchor" href="#preprocessing-via-langage-dedie">#</a>Preprocessing via langage d√©di√©</h3><p>Ici je parle d‚Äôun langage, car superset ou pas, on a des √©l√©ments nouveaux,
incompr√©hensibles par le navigateur (ex: <code>@if</code>, <code>@foreach</code>‚Ä¶).</p>
<p>Note: Je case Stylus dans le langage sp√©cifique car il n‚Äôest pas vraiment compatible,
ne tol√©rant pas l‚Äôindentation :</p>
<pre><code class="lang-css"><span class="hljs-class">.Block</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">prop</span>:<span class="hljs-value"> value </span></span></span>}

  <span class="hljs-class">.Block-element</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">prop</span>:<span class="hljs-value"> value </span></span></span>}

<span class="hljs-comment">/* üí• BOOM ! CA PAS MARCHER EN STYLUS */</span>
</code></pre>
<h3 id="preprocessing-futureproof-fallback"><a class="putainde-Title-anchor" href="#preprocessing-futureproof-fallback">#</a>Pr√©processing futureproof/fallback</h3><p>Ici on conserve la syntaxe CSS, le parsing est donc simple est connu.
Mais attention on peut avoir un r√©sultat non compr√©hensible par certains navigateurs
(ex: unit√© REM sur IE 8, variables CSS‚Ä¶).</p>
<p>√Ä la diff√©rence de la solution du dessus, on reste ici avec un langage √† la syntaxe simple
et connue, avec des sp√©cifications (en brouillon ou pas).</p>
<p>D√®s que c‚Äôest possible on va rendre le CSS encore plus compatible en ajoutant
des fallbacks (roues de secours) √† tout va.
Ainsi par exemple pour assurer une utilisation de l‚Äôunit√© REM, on peut (en roue de secours)
doubler nos valeurs en <code>px</code>.
Autre exemple avec les variables CSS natives : on peut (pour une utilisation simpliste)
faire un pr√©rendu et mettre des roues de secours l√† o√π c‚Äôest possible.</p>
<h3 id="processing-par-le-navigateur"><a class="putainde-Title-anchor" href="#processing-par-le-navigateur">#</a>Processing par le navigateur</h3><p>Ici on a blind√© notre feuille de fallback, on est (en th√©orie) sens√© avoir un support ‚Äúau mieux‚Äù.</p>
<h2 id="creer-un-preprocesseur-css"><a class="putainde-Title-anchor" href="#creer-un-preprocesseur-css">#</a>Cr√©er un pr√©processeur CSS</h2><p>Allons √† l‚Äôessentiel : pour cr√©er votre pr√©processeur on va utiliser une biblioth√®que.
√Ä ce jour nous avons le choix entre <a href="https://github.com/reworkcss/rework">Rework</a>
 ou <a href="https://github.com/ai/postcss">PostCSS</a> qui permettent d‚Äôinspecter et de manipuler nos CSS.
Tout deux sont des biblioth√®ques √©critent en JavaScript (NodeJs).</p>
<p>Pour la petite histoire, Autoprefixer est √† l‚Äôorigine de PostCSS. En effet les
premi√®res versions utilisaient Rework, mais √† cause de limitation dues √† l‚ÄôAPI de Rework,
l‚Äôauteur d‚ÄôAutoprefixer √† d√©cider de cr√©er son propre moteur, qui a une API presque
plus sympa il faut le dire (il faudra voir comment √©volue Rework).</p>
<p>D‚Äôun autre c√¥t√© Rework √©tant plus ancien, il poss√®de un √©cosyst√®me plus fourni et r√©pondra
donc mieux √† nos besoins.</p>
<p>Cela √©tant dit, avec l‚Äôapproche futureproof nous pourrons switcher de Rework √† PostCSS
 sans probl√®me et surtout sans toucher √† nos feuilles de styles.
Il suffira de trouver un plugin √©quivalent (ex: rework-vars et postcss-vars font la m√™me chose).</p>
<p>Pour des raisons d‚Äô√©cosyst√®me, je partirai sur Rework histoire de ne pas r√©inventer la roue.</p>
<h2 id="creer-un-preprocesseur-css-avec-rework"><a class="putainde-Title-anchor" href="#creer-un-preprocesseur-css-avec-rework">#</a>Cr√©er un pr√©processeur CSS avec Rework</h2><p>Rework prend une cha√Æne CSS en entr√©e, produit un AST (arbre de syntaxe abtrait)
de notre CSS et nous fournis une API pour le manipuler.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> rework = <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework"</span>)
<span class="hljs-keyword">var</span> unPlugin = <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework-BIDULE"</span>)
<span class="hljs-comment">// usage simple</span>
<span class="hljs-keyword">var</span> css = rework(<span class="hljs-string">"html { font-size: 2rem}"</span>).<span class="hljs-keyword">use</span>(unPlugin).toString()
</code></pre>
<h3 id="plugin-rework"><a class="putainde-Title-anchor" href="#plugin-rework">#</a>Plugin Rework</h3><p>Un plugin Rework n‚Äôest rien d‚Äôautre qu‚Äôune fonction JavaScript.
L‚Äôexemple suivant remplacera toutes les couleurs de texte par du noir.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> monPlugin = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">plugin</span><span class="hljs-params">(ast, reworkInstance)</span> </span>{
  ast.rules.<span class="hljs-keyword">forEach</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(rule)</span> </span>{
    <span class="hljs-comment">// dans notre cas on ne veut que travailler sur des r√®gles</span>
    <span class="hljs-keyword">if</span> (rule.type !== <span class="hljs-string">"rule"</span>) <span class="hljs-keyword">return</span>

    rule.declarations.<span class="hljs-keyword">forEach</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(declaration, index)</span> </span>{
      <span class="hljs-keyword">if</span> (declaration.property === <span class="hljs-string">"color"</span>) {
        declaration.value = <span class="hljs-string">'#000'</span>
      }
    })
  })
}
</code></pre>
<p>Il est certain que l‚Äôexemple ci-dessus ne doit pas vous exciter beaucoup. Moi non plus.
Je n‚Äôai d‚Äôailleurs pas du tout accroch√© lorsque Rework est apparu par manque de compr√©hension.
<strong>Ou plut√¥t par manque d‚Äôimagination</strong>.</p>
<p>Pour un exemple plus costaud je vous invite √† regarder le code <a href="https://github.com/reworkcss/rework-vars/blob/master/index.js">rework-vars</a>.</p>
<h2 id="l-ecosysteme-rework"><a class="putainde-Title-anchor" href="#l-ecosysteme-rework">#</a>L‚ÄôEcosyst√®me Rework</h2><p>Heureusement pour nous, nous avons un √©cosyst√®me. Donc pour un usage classique (√©crire
du CSS futureproof ou ajouter quelques petites am√©liorations) il n‚Äôy aura pas besoin
d‚Äô√©crire de plugin, juste en utiliser fera l‚Äôaffaire.</p>
<h3 id="plugins-rework-natif"><a class="putainde-Title-anchor" href="#plugins-rework-natif">#</a>Plugins Rework natif</h3><p>Rework embarque en natif quelques plugins. Il faudra tout de m√™me les activer (on voit comment juste apr√®s).</p>
<ul>
<li><a href="https://github.com/reworkcss/rework#extend">extend</a>: Permet d‚Äôh√©riter d‚Äôun s√©lecteur (<code>@extend</code> quoi).</li>
<li><a href="https://github.com/reworkcss/rework#ease">ease</a>: Ajout un paquet de fonctions d‚Äôeasing pour les animations et transitions.</li>
<li><a href="https://github.com/reworkcss/rework#at2x">at2x</a>: Gestion automatique des images <code>@2x</code>.</li>
<li><a href="https://github.com/reworkcss/rework#prefixselectorsstring">prefixSelectors</a>: Permet de pr√©fixer vos s√©lecteurs.</li>
<li><a href="https://github.com/reworkcss/rework#colors">colors</a>: Explication par l‚Äôexemple : <code>rgba(#fc0, .5)</code>.</li>
<li><a href="https://github.com/reworkcss/rework#mixinobject">mixin</a>: Faire ses propres mixins via des fonctions JavaScript.</li>
<li><a href="https://github.com/reworkcss/rework#functionobject">function</a>: Ajouter ses propres fonctions CSS.</li>
<li><a href="https://github.com/reworkcss/rework#references">references</a>: Permet de faire r√©f√©rence √† des valeurs de propri√©t√©s (ex: <code>height: @width</code>)</li>
<li><a href="https://github.com/reworkcss/rework#urlfn">url</a>: R√©√©crire les <code>url()</code>s via une fonction JavaScript.</li>
<li><a href="https://github.com/reworkcss/rework#inlinedir">inline</a>: Inliner des ressources via des datauri.</li>
</ul>
<h3 id="plugins-rework-npm"><a class="putainde-Title-anchor" href="#plugins-rework-npm">#</a>Plugins Rework NPM</h3><p>On a d√©j√† plus d‚Äôune soixantaine de <a href="https://www.npmjs.org/search?q=rework">plugins Rework disponible sur NPM</a> en plus des plugins natifs.</p>
<h4 id="ajouter-des-fallbacks"><a class="putainde-Title-anchor" href="#ajouter-des-fallbacks">#</a>Ajouter des fallbacks</h4><p>Si vous souhaitez √©crire des CSS sans pour autant vous limiter √† certaines impl√©mentations, ces plugins devraient vous plaire.</p>
<h5 id="rework-vars"><a class="putainde-Title-anchor" href="#rework-vars">#</a>rework-vars</h5><p><a href="https://github.com/reworkcss/rework-vars">rework-vars</a>
permet un usage des <a href="http://www.w3.org/TR/css-variables/">variables CSS</a>.
Ce plugin est (pour l‚Äôinstant) restreint aux d√©clarations √† la racine (<code>:root</code>).
Cela permet toutefois un usage classique de variables globales.
Et de se s√©parer de Sass ou Less si on utilise pas beaucoup plus que des variables.</p>
<h5 id="rework-calc"><a class="putainde-Title-anchor" href="#rework-calc">#</a>rework-calc</h5><p><a href="https://github.com/reworkcss/rework-calc">rework-calc</a>
ajoute les r√©sultats des op√©rations <code>calc()</code> quand c‚Äôest possible (m√™me unit√©).
Tr√®s pratique sp√©cialement coupl√© avec rework-vars pour ajouter un peu de math via vos variables.</p>
<h5 id="rework-npm"><a class="putainde-Title-anchor" href="#rework-npm">#</a>rework-npm</h5><p><a href="https://github.com/conradz/rework-npm">rework-npm</a>
nous parse <code>@import</code> comme on l‚Äôaime.
Peut taper dans votre dossier de sources ou en plus dans <code>node_modules</code>
(pratique pour utiliser <a href="https://www.npmjs.org/package/normalize.css">normalize.css</a>
<a href="/posts/frontend/npm-comme-package-manager-pour-le-front-end/">via npm</a> par exemple).
Il existe aussi <a href="https://github.com/simme/rework-importer">rework-importer</a> qui am√®ne quelques diff√©rences de syntaxe.</p>
<h5 id="-a-href-https-github-com-ctalkington-rework-rem-fallback-rework-rem-fallback-a-"><a class="putainde-Title-anchor" href="#-a-href-https-github-com-ctalkington-rework-rem-fallback-rework-rem-fallback-a-">#</a><a href="https://github.com/ctalkington/rework-rem-fallback">rework-rem-fallback</a></h5><p><a href="https://github.com/ctalkington/rework-rem-fallback">rework-rem-fallback</a>
ajout un fallback sur les unit√©s REM. Pratique si vous voulez utiliser REM mais
que vous devez supporter IE 8.</p>
<h5 id="rework-color-function"><a class="putainde-Title-anchor" href="#rework-color-function">#</a>rework-color-function</h5><p><a href="https://github.com/ianstormtaylor/rework-color-function">rework-color-function</a> permet
de manipuler les couleurs via
<a href="http://dev.w3.org/csswg/css-color/#modifying-colors">les nouvelles fonctions en cours de sp√©cifications</a>
(hue, saturation, lightness, whiteness, blackness, tint, shade, blend, blenda, contrast).</p>
<h5 id="rework-mixin-opacity"><a class="putainde-Title-anchor" href="#rework-mixin-opacity">#</a>rework-mixin-opacity</h5><p><a href="https://github.com/reworkcss/rework-mixin-opacity">rework-mixin-opacity</a> ajoute l‚Äô<code>opacity</code> pour IE 8.</p>
<h4 id="ameliorer-un-peu-vos-feuilles-de-styles"><a class="putainde-Title-anchor" href="#ameliorer-un-peu-vos-feuilles-de-styles">#</a>Am√©liorer un peu vos feuilles de styles</h4><p>Sans pour autant partir en vrille vers des <code>@if</code> ou <code>@each</code>, voici quelques plugins
qui peuvent ajouter un peu de beurre dans les √©pinards :</p>
<h5 id="rework-parent"><a class="putainde-Title-anchor" href="#rework-parent">#</a>rework-parent</h5><p><a href="https://github.com/fgnass/rework-parent">rework-parent</a> permet de r√©f√©rencer le s√©lecteur pr√©c√©dent via <code>&amp;</code>. Pratique dans pour les media-queries ou pour les √©tats (:hover etc).</p>
<h5 id="rework-breakpoints"><a class="putainde-Title-anchor" href="#rework-breakpoints">#</a>rework-breakpoints</h5><p><a href="https://github.com/reworkcss/rework-breakpoints">rework-breakpoints</a> permet de sp√©cifier des media-queries via des breakpoints pr√©d√©finis. Pratique en attendant un plugin g√©rant les <a href="http://dev.w3.org/csswg/mediaqueries4/#custom-mq"><code>@custom-media</code></a>.</p>
<h5 id="rework-hex-alpha"><a class="putainde-Title-anchor" href="#rework-hex-alpha">#</a>rework-hex-alpha</h5><p><a href="https://github.com/ianstormtaylor/rework-hex-alpha">rework-hex-alpha</a> permet de sp√©cifier des couleurs avec alpha sous la forme #rrggbbaa.</p>
<h5 id="rework-clearfix"><a class="putainde-Title-anchor" href="#rework-clearfix">#</a>rework-clearfix</h5><p><a href="https://github.com/fgnass/rework-clearfix">rework-clearfix</a> permet d‚Äôutiliser <code>clear: fix</code> via l‚Äôinsertion automatique du <a href="http://nicolasgallagher.com/micro-clearfix-hack/">micro clearfix de @necolas</a>.</p>
<h5 id="rework-assets"><a class="putainde-Title-anchor" href="#rework-assets">#</a>rework-assets</h5><p><a href="https://github.com/conradz/rework-assets">rework-assets</a> permet de copier les assets r√©f√©renc√©s. Pratique avec rework-npm et des modules externes.</p>
<h5 id="rework-namespace-css"><a class="putainde-Title-anchor" href="#rework-namespace-css">#</a>rework-namespace-css</h5><p><a href="https://github.com/geordiemhall/rework-namespace-css">rework-namespace-css</a> permet de namespacer vos CSS par une classe sur <code>&lt;html&gt;</code>.</p>
<h5 id="rework-namespace"><a class="putainde-Title-anchor" href="#rework-namespace">#</a>rework-namespace</h5><p><a href="https://github.com/kristoferjoseph/rework-namespace">rework-namespace</a> permet de namespacer vos CSS par un pr√©fixe. Pratique avec <a href="/posts/css/petite-definition-bem/">BEM</a> lorsque vous pr√©fixez par votre <code>.org-</code>.</p>
<h5 id="rework-classmap"><a class="putainde-Title-anchor" href="#rework-classmap">#</a>rework-classmap</h5><p><a href="https://github.com/andreypopp/rework-classmap">rework-classmap</a> permet de renommer des classes via du mapping. Avec √ßa on pourrait presque avoir un code Bootstrap propre.</p>
<h5 id="rework-palette"><a class="putainde-Title-anchor" href="#rework-palette">#</a>rework-palette</h5><p><a href="https://github.com/fgnass/rework-palette">rework-palette</a> permet d‚Äôajouter une palette de couleur personnalis√© (via des noms de couleurs).</p>
<h5 id="rework-deduplicate"><a class="putainde-Title-anchor" href="#rework-deduplicate">#</a>rework-deduplicate</h5><p><a href="https://github.com/kristoferjoseph/rework-deduplicate">rework-deduplicate</a> permet de supprimer les r√®gles dupliqu√©s.</p>
<h5 id="rework-split-media"><a class="putainde-Title-anchor" href="#rework-split-media">#</a>rework-split-media</h5><p><a href="https://github.com/reworkcss/split-media">rework-split-media</a> permet de couper les contenu des media queries dans d‚Äôautres fichiers</p>
<h5 id="rework-move-media"><a class="putainde-Title-anchor" href="#rework-move-media">#</a>rework-move-media</h5><p><a href="https://github.com/reworkcss/rework-move-media">rework-move-media</a> permet de regrouper les contenu des media queries. Pas tr√®s utile car gzip fera aussi bien.</p>
<h4 id="au-dela-du-preprocessing"><a class="putainde-Title-anchor" href="#au-dela-du-preprocessing">#</a>Au del√† du pr√©processing</h4><p>En utilisant le parser Rework, on peut faire plus que des ajustements ou du remplacement. On peut balancer des erreurs.</p>
<ul>
<li><a href="https://github.com/reworkcss/rework-ie-limits">rework-ie-limits</a>: pr√©vient si vos CSS d√©passent la limite de 4095 selectors (limite pour IE &lt; 10).</li>
<li><a href="https://github.com/suitcss/rework-suit-conformance">rework-suit-conformance</a>: permet de v√©rifier que votre code suit bien les <a href="https://github.com/suitcss/suit/tree/master/doc">conventions SUIT</a> (pour peu que vous les suiviez).</li>
</ul>
<p>En partant dans d‚Äôautres directions on pourrait r√©aliser des statistiques sur
nos CSS (nombre de s√©lecteurs, de couleurs utilis√©s etc) comme le fait <a href="http://www.cssstats.com/">CSS Stats</a>.</p>
<p>Retrouvrez en plus de la recherche via npm (qui sera la plus √† jour), <a href="https://github.com/reworkcss/rework/wiki/Plugins-and-Utilities">une liste des plugins et utilitaires sur le wiki de Rework</a>.</p>
<h2 id="mise-en-place-de-rework-pour-faire-votre-preprocesseur-en-moins-de-5-min"><a class="putainde-Title-anchor" href="#mise-en-place-de-rework-pour-faire-votre-preprocesseur-en-moins-de-5-min">#</a>Mise en place de Rework pour faire votre pr√©processeur en moins de 5 min</h2><p>Maintenant que nous avons vu comment utiliser Rework et quels sont les plugins
les plus sympa, on se faire un petit fichier pour automatiser tout ce process.</p>
<p>Plut√¥t que de r√©inventer la roue comme l‚Äôa fait <a href="http://pleeease.io/">Pleeease</a> (en g√©rant un watcher et tout le tralala),
on va plut√¥t partir comme <a href="http://myth.io/">Myth.io</a> ou <a href="https://github.com/visionmedia/styl">Styl</a> (successeur spirituel de Stylus)
qui se concentrent sur le rendu et non le workflow pour g√©n√©rer ce rendu.</p>
<p>Nous allons donc faire simple et efficace avec une task <a href="/posts/js/introduction-gulp/">gulp</a>.
Ceci pourrait bien entendu √™tre aussi bien fait avec grunt ou m√™me make et <a href="https://github.com/facebook/watchman">watchman</a>.</p>
<pre><code class="lang-shell">$ <span class="hljs-built_in">mkdir</span> monrework &amp;&amp; <span class="hljs-built_in">cd</span> monrework

# on cr√©e un package.json pour sauvegarder les r√©f√©rences des paquets qu'on va utiliser
$ npm init

# on install gulp, autoprefixer et rework &amp; co en les sauvegardants dans la partie "devDependencies"
$ npm i -D minimist gulp gulp-util gulp-plumber gulp-autoprefixer gulp-rework rework-npm rework-vars rework-calc rework-<span class="hljs-built_in">color</span>-function rework-<span class="hljs-comment">rem-fallback rework-parent rework-ie-limits</span>

# on cr√©√© notre fichier vide
$ <span class="hljs-built_in">mkdir</span> src &amp;&amp; <span class="hljs-built_in">mkdir</span> src/styles &amp;&amp; touch src/styles/index.css
</code></pre>
<p>Ensuite il nous reste √† faire notre petit <code>Gulpfile.js</code></p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> options = <span class="hljs-keyword">require</span>(<span class="hljs-string">"minimist"</span>)(process.argv.slice(<span class="hljs-number">2</span>))
<span class="hljs-keyword">var</span> gulp = <span class="hljs-keyword">require</span>(<span class="hljs-string">"gulp"</span>)
<span class="hljs-keyword">var</span> util = <span class="hljs-keyword">require</span>(<span class="hljs-string">"gulp-util"</span>)
<span class="hljs-keyword">var</span> plumber = <span class="hljs-keyword">require</span>(<span class="hljs-string">"gulp-plumber"</span>)
<span class="hljs-keyword">var</span> rework = <span class="hljs-keyword">require</span>(<span class="hljs-string">"gulp-rework"</span>)

<span class="hljs-keyword">var</span> reworkPlugins = {
  atimport: <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework-npm"</span>),
  <span class="hljs-keyword">parent</span>: <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework-parent"</span>),
  vars: <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework-vars"</span>),
  calc: <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework-calc"</span>),
  colorFn: <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework-color-function"</span>),
  remFallback: <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework-rem-fallback"</span>),
  ieLimits: <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework-ie-limits"</span>)
}
<span class="hljs-keyword">var</span> autoprefixer = <span class="hljs-keyword">require</span>(<span class="hljs-string">"gulp-autoprefixer"</span>)

gulp.task(<span class="hljs-string">"styles"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// ici on prends toutes les CSS √† la racine</span>
  <span class="hljs-comment">// on consid√®re que celle dans des sous dossiers sont √† importer</span>
  <span class="hljs-keyword">return</span> gulp.src(<span class="hljs-string">"./src/styles/*.css"</span>)
    .pipe(opts.production ? plumber() : util.noop())
    .pipe(rework(
      reworkPlugins.atimport({dir: <span class="hljs-string">"./src/styles/"</span>}),
      rework.colors(),
      rework.references(),
      rework.ease(),
      rework.inline,
      reworkPlugins.<span class="hljs-keyword">parent</span>,
      reworkPlugins.vars(), <span class="hljs-comment">// notez que certains plugins n√©cessite d'√™tre √©xecut√© (retourant une fonction dynamique)</span>
      reworkPlugins.calc,
      reworkPlugins.colorFn,
      reworkPlugins.remFallback(),
      reworkPlugins.ieLimits
    ))
    .pipe(autoprefixer())
    .pipe(gulp.dest(<span class="hljs-string">"./dist/styles"</span>))
})

gulp.task(<span class="hljs-string">"default"</span>, [<span class="hljs-string">"styles"</span>], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  gulp.watch(<span class="hljs-string">"./src/css/**/*"</span>, [<span class="hljs-string">"styles"</span>])
})
</code></pre>
<p>Ensuite il reste plus qu‚Äô√† lancer Gulp au besoin qui s‚Äôoccupera d‚Äô√©xecuter le preprocessing
au d√©marrage et lors des changements de fichiers.
Il ne reste plus grand chose √† faire si ce n‚Äôest ajouter livereload en plus pour avoir le petit process au petit oignon.</p>
<pre><code class="lang-shell">$ gulp
[gulp] Using gulpfile ~/Development/monrework/Gulpfile.js
[gulp] Starting <span class="hljs-string">'styles'</span><span class="hljs-keyword">...</span>
[gulp] Finished <span class="hljs-string">'styles'</span> after <span class="hljs-number">49</span> ms
[gulp] Starting <span class="hljs-string">'default'</span><span class="hljs-keyword">...</span>
[gulp] Finished <span class="hljs-string">'default'</span> after <span class="hljs-number">4.16</span> ms
</code></pre>
<p>Le watch est lanc√©, on peut remplir notre fichier CSS</p>
<pre><code class="lang-css"><span class="hljs-pseudo">:root</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">--font-size</span>:<span class="hljs-value"> <span class="hljs-number">1rem</span></span></span>;
    <span class="hljs-rule"><span class="hljs-attribute">--line-height</span>:<span class="hljs-value"> <span class="hljs-number">1.5rem</span></span></span>;
    <span class="hljs-rule"><span class="hljs-attribute">--color-highlight</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-hexcolor">#f00</span>, .<span class="hljs-number">8</span>)</span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-tag">html</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"> <span class="hljs-number">100%</span></span></span>;
    <span class="hljs-rule"><span class="hljs-attribute">height</span>:<span class="hljs-value"> @width</span></span>;
    <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-function">var</span>(--font-size)
</span></span></span>}

<span class="hljs-tag">p</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">margin</span>:<span class="hljs-value"> <span class="hljs-function">calc</span>(<span class="hljs-function">var</span>(--line-height) / <span class="hljs-number">2</span>) <span class="hljs-number">0</span></span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-tag">a</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">var</span>(--color-highlight)</span></span>;
    <span class="hljs-rule"><span class="hljs-attribute">transition</span>:<span class="hljs-value"> all <span class="hljs-number">500ms</span> ease-out-back</span></span>;
<span class="hljs-rule">}</span></span>

&amp;<span class="hljs-pseudo">:hover</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-function">var</span>(--color-highlight) <span class="hljs-function">lightness</span>(-<span class="hljs-number">10%</span>))</span></span>;
    <span class="hljs-rule"><span class="hljs-attribute">trasnform</span>:<span class="hljs-value"> <span class="hljs-function">rotate</span>(<span class="hljs-number">1deg</span>)</span></span>;
<span class="hljs-rule">}</span></span>
</code></pre>
<p>Et on obtiendra</p>
<pre><code class="lang-css"><span class="hljs-tag">html</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"> <span class="hljs-number">100%</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">height</span>:<span class="hljs-value"> <span class="hljs-number">100%</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">16px</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">1rem</span></span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-tag">p</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">margin</span>:<span class="hljs-value"> <span class="hljs-number">12px</span> <span class="hljs-number">0</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">margin</span>:<span class="hljs-value"> <span class="hljs-number">0.75rem</span> <span class="hljs-number">0</span></span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-tag">a</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, .<span class="hljs-number">8</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">-webkit-transition</span>:<span class="hljs-value"> all <span class="hljs-number">500ms</span> <span class="hljs-function">cubic-bezier</span>(<span class="hljs-number">0.175</span>, <span class="hljs-number">0.885</span>, <span class="hljs-number">0.320</span>, <span class="hljs-number">1.275</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">transition</span>:<span class="hljs-value"> all <span class="hljs-number">500ms</span> <span class="hljs-function">cubic-bezier</span>(<span class="hljs-number">0.175</span>, <span class="hljs-number">0.885</span>, <span class="hljs-number">0.320</span>, <span class="hljs-number">1.275</span>)</span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-tag">a</span><span class="hljs-pseudo">:hover</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">204</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.8</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">transform</span>:<span class="hljs-value"> <span class="hljs-function">rotate</span>(<span class="hljs-number">1deg</span>)</span></span>;
<span class="hljs-rule">}</span></span>
</code></pre>
<p>Gardez bien en t√™te qu‚Äôavec le code CSS d‚Äôorigine, vous avez (en majeur partie) un code futureproof.
D‚Äôici quelques temps on pourra supprimer une grande partie des plugins et les navigateurs prendront le relais üòâ.</p>
<p><em>Note: J‚Äôai ouvert <a href="https://github.com/reworkcss/rework-vars/issues/28">un ticket sur rework-vars</a> afin que celui-ci agisse comme un fallback (en rajoutant les valeurs) et non un remplacement. Je mettrais √† jour ce post dans ce sens d√®s que possible.</em></p>
<p><strong>Bon alors, on Less tomber Sass ?</strong></p>
</div><footer class="putainde-Post-footer"><div class="putainde-Post-footer-title">Action sur cette page</div><div class="Grid"><div class="Grid-cell u-size1of3"><a href="http://github.com/putaindecode/website/edit/master/pages/posts/css/preprocesseur-a-la-carte/index.md" class="putainde-Post-footer-action">Modifier</a></div><div class="Grid-cell u-size1of3"><a href="http://github.com/putaindecode/website/blame/master/pages/posts/css/preprocesseur-a-la-carte/index.md" class="putainde-Post-footer-action">Tracer les changements</a></div><div class="Grid-cell u-size1of3"><a href="http://github.com/putaindecode/website/commits/master/pages/posts/css/preprocesseur-a-la-carte/index.md" class="putainde-Post-footer-action">Historique</a></div></div></footer><div class="putainde-Author"><a href="http://moox.io/" data-rcp-tooltip="MoOx" class="putainde-Author-picture "><img src="http://www.gravatar.com/avatar/2f6c2dcd4ba8fc44f1e7f0b2ed3d587d.png" alt="" class="putainde-Avatar js-AnimateLoad"/></a><div class="putainde-Author-description"><div class="putainde-Author-title"><h3 class="putainde-Author-name"><span class="putainde-WrittenBy">√âcrit par</span> <a href="http://moox.io/" class="putainde-Link">MoOx</a></h3><div class="putainde-Author-social"><a href="http://moox.io/" data-rcp-tooltip="Website" class="rcp-Tooltip rcp-Tooltip--top"><svg style="" class="putainde-Icon putainde-Icon-home"><use xlink:href="#putainde-Icon-home"></use></svg></a><a href="https://twitter.com/MoOx" data-rcp-tooltip="Twitter" class="rcp-Tooltip rcp-Tooltip--top"><svg style="" class="putainde-Icon putainde-Icon-twitter"><use xlink:href="#putainde-Icon-twitter"></use></svg></a><a href="https://github.com/MoOx" data-rcp-tooltip="Github" class="rcp-Tooltip rcp-Tooltip--top"><svg style="" class="putainde-Icon putainde-Icon-github"><use xlink:href="#putainde-Icon-github"></use></svg></a></div></div><p class="putainde-Author-bio">Open source addict vivant dans la campagne pr√®s de Toulouse, Maxime est d√©veloppeur web front-end le jour, et justicier du code la nuit.   <br> Il aime faire des calins √† HTML, CSS et JavaScript en tant que freelance.</p></div></div><div id="disqus_thread" aria-live="polite"><noscript>| Please enable JavaScript to view the
a(href="http://disqus.com/?ref_noscript") comments powered by Disqus.</noscript></div></div></article></div><div class="putainde-Footer"><div class="Grid"><div class="Grid-cell u-size3of12"><p class="putainde-Footer-text">¬© 1970 - 2014 Putain de Code !</p></div><div class="Grid-cell u-size6of12"><ul class="putainde-Footer-list"><li></li><li><a href="../../../feed.xml">Flux RSS</a></li><li><a href="../../../projets">Projets</a></li><li><a href="https://github.com/putaindecode/forum/issues">Forum</a></li><li><a href="irc://irc.freenode.net/putaindecode">IRC</a></li><a href="https://github.com/putaindecode/" data-rcp-tooltip="GitHub" class="rcp-Tooltip rcp-Tooltip--top"><svg style="" class="putainde-Icon putainde-Icon-github"><use xlink:href="#putainde-Icon-github"></use></svg></a><a href="https://twitter.com/putaindecode/" data-rcp-tooltip="Twitter" class="rcp-Tooltip rcp-Tooltip--top"><svg style="" class="putainde-Icon putainde-Icon-twitter"><use xlink:href="#putainde-Icon-twitter"></use></svg></a></ul></div><div class="Grid-cell u-size3of12"><p class="putainde-Footer-text putainde-Footer-text--small putainde-Footer-text--right">Made with ‚ô•Ô∏é by <a href="../../../#crew">le crew</a></p></div></div></div><script>var disqus_shortname = "putaindecode";var disqus_identifier = "http://putaindecode.fr/posts/css/preprocesseur-a-la-carte/";
var disqus_url = "http://putaindecode.fr/posts/css/preprocesseur-a-la-carte/";
var disqus_script = "embed.js";;(function(d,s) {
s = d.createElement('script');s.async=1;s.src = '//' + disqus_shortname + '.disqus.com/'+disqus_script;
(d.getElementsByTagName('head')[0]).appendChild(s)
})(document)</script><script src="../../../scripts/index.js"></script><script>var _gaq=[['_setAccount','UA-43771806-1'],['_trackPageview']];
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
g.src='//www.google-analytics.com/ga.js';
s.parentNode.insertBefore(g,s)}(document,'script'));</script></body></html>