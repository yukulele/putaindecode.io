<?xml version="1.0" encoding="utf-8" ?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Putain de code !</title><description></description><link>http://putaindecode.fr</link><!-- generator putaindecode--><lastBuildDate>Sat, 12 Jul 2014 05:15:23 GMT</lastBuildDate><atom:link href="http://putaindecode.fr/feed.xml" rel="self" type="application/rss+xml"></atom:link><item><title>Un point sur les grilles CSS en inline-block</title><description><![CDATA[
<p>Les grilles sont devenues incontournables pour le layout d‚Äôun site.
<a href="http://justifygrid.com/#methodology">Plusieurs</a> <a href="https://github.com/suitcss/components-grid">m√©thodes</a>  <a href="http://www.palantir.net/blog/responsive-design-s-dirty-little-secret">existent</a> en attendant de pouvoir utiliser le Graal, <a href="http://dev.w3.org/csswg/css-grid/">CSS3 grid layout</a>.</p>
<p>Mais en attendant, on bricole. Et une des solutions que j‚Äôaime bien consiste √† utiliser des inline-block, car elle offre plusieurs avantages pratiques :</p>
<ul>
<li>On peut simplement renverser la grille gr√¢ce √† la propri√©t√©  <code>direction:rtl;</code> ce qui est particuli√®rement pratique sur des sites qui doivent supporter des langues dont le sens de lecture va de droite √† gauche.</li>
<li>les √©l√©ments en inline-block peuvent utiliser la propri√©t√© <code>vertical-align</code>.</li>
<li>les √©l√©ments de la grilles reste dans le flux, ce qui √©vite l‚Äôutilisation de clearfix.</li>
</ul>
<p>Ce dernier point est aussi une source de probl√®mes puisque notre <code>.Grid</code> contient non seulement nos √©l√©ments de grille <code>.Grid-cell</code> mais aussi quelques caract√®res espace √ßa et l√† entre les noeuds enfants.</p>
<p>De la m√™me mani√®re qu‚Äôun espaces s√©pare 2 mots, on retrouve ces espaces entre nos blocs. Ces caract√®res proviennent des espaces et autre sauts de lignes qu‚Äôon ins√®re dans le code source pour formater notre document.</p>
<p>Voici donc un aper√ßu des diff√©rents moyens de se d√©barasser de ces espaces, afin que tout les √©l√©ments de notre grille restent √† leur place.</p>
<h2 id="supprimer-les-espaces-entre-les-tag-code-grid-cell-code-"><a class="putainde-Title-anchor" href="#supprimer-les-espaces-entre-les-tag-code-grid-cell-code-">#</a>Supprimer les espaces entre les tag <code>.Grid-cell</code></h2><pre><code>&lt;div class=<span class="hljs-string">"Grid"</span>&gt;
  &lt;div class=<span class="hljs-string">"Grid-cell"</span>&gt;<span class="hljs-keyword">...</span>&lt;/div&gt;&lt;div class=<span class="hljs-string">"Grid-cell"</span>&gt;<span class="hljs-keyword">...</span>&lt;/div&gt;&lt;div class=<span class="hljs-string">"Grid-cell"</span>&gt;<span class="hljs-keyword">...</span>&lt;/div&gt;
&lt;/div&gt;
</code></pre><p>Une m√©thode pas forc√©ment tr√®s lisible mais qui est robuste. Soyons cr√©atifs,
on peut aussi faire comme √ßa, m√™me si le formatage en prend un coup.</p>
<pre><code>&lt;div class=<span class="hljs-string">"Grid"</span>&gt;
      &lt;div class=<span class="hljs-string">"Grid-cell"</span>&gt;<span class="hljs-keyword">...</span>
&lt;/div&gt;&lt;div class=<span class="hljs-string">"Grid-cell"</span>&gt;<span class="hljs-keyword">...</span>
&lt;/div&gt;&lt;div class=<span class="hljs-string">"Grid-cell"</span>&gt;<span class="hljs-keyword">...</span>&lt;/div&gt;
&lt;/div&gt;
</code></pre><p>Notez que la premi√®re technique peut √™tre facilement mise en place de mani√®re automatique, via une traitement de <a href="https://github.com/kangax/html-minifier">minification du code html</a>.</p>
<h2 id="inserer-des-commentaires-html-entre-les-tags-code-grid-cell-code-"><a class="putainde-Title-anchor" href="#inserer-des-commentaires-html-entre-les-tags-code-grid-cell-code-">#</a>Ins√©rer des commentaires html entre les tags <code>.Grid-cell</code></h2><p>La solution est robuste, au prix de quelques caract√®res suppl√©mentaires. Un surpoids que gzip se fera un plaisir de vous faire oublier !
C‚Äôest la m√©thode choisie dans le framework <a href="https://github.com/csswizardry/inuit.css/blob/master/objects/_grids.scss">inuitCss</a>.</p>
<pre><code>&lt;div class=<span class="hljs-string">"Grid"</span>&gt;
   &lt;div class=<span class="hljs-string">"Grid-cell"</span>&gt;<span class="hljs-keyword">...</span>&lt;/div&gt;&lt;!--
--&gt;&lt;div class=<span class="hljs-string">"Grid-cell"</span>&gt;<span class="hljs-keyword">...</span>&lt;/div&gt;&lt;!--
--&gt;&lt;div class=<span class="hljs-string">"Grid-cell"</span>&gt;<span class="hljs-keyword">...</span>&lt;/div&gt;
&lt;/div&gt;
</code></pre><h2 id="font-size-0"><a class="putainde-Title-anchor" href="#font-size-0">#</a>font-size: 0</h2><pre><code><span class="hljs-class">.Grid</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">0</span></span></span>;
<span class="hljs-rule">}</span></span>
<span class="hljs-class">.Grid-cell</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">display</span>:<span class="hljs-value"> inline-block</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">16px</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">1rem</span></span></span>;
<span class="hljs-rule">}</span></span>
</code></pre><p>L‚Äôid√©e est de faire dispara√Ætre les caract√®res <em>espace</em> situ√©s entre les balises enfants en r√©glant la taille de la police √† z√©ro. Il suffit ensuite de r√©-initialiser la taille sur les noeuds enfants <code>.Grid-cell</code>. Cette m√©thode est utilis√©e dans <a href="https://github.com/suitcss/components-grid">SUIT Grid</a>.</p>
<p><em>Attention</em>, si votre scope navigateur va en dessous d‚ÄôIE9, cette m√©thode fait perdre le b√©n√©fice d‚Äôune int√©gration √† base d‚Äôem puisque la taille de la typo sur les blocs enfants est d√©sormais fixe.</p>
<h2 id="appliquer-une-marge-negative-entre-les-blocs-enfants"><a class="putainde-Title-anchor" href="#appliquer-une-marge-negative-entre-les-blocs-enfants">#</a>Appliquer une marge n√©gative entre les blocs enfants</h2><pre><code><span class="hljs-class">.Grid-cell</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">margin-right</span>:<span class="hljs-value"> -<span class="hljs-number">4px</span></span></span>;
<span class="hljs-rule">}</span></span>
</code></pre><p>Cette m√©thode n‚Äôest √† mon sens pas tr√®s robuste, surtout sur des int√©grations √† base d‚Äôem, car on introduit un nombre magique qui d√©pend de plusieurs param√®tre, comme la typo utilis√©e, sa taille de base, etc. Cette m√©thode demande donc de bien tester puisque les font disponibles ne seront pas les m√™mes selon des √©quipements, les OS‚Ä¶</p>
<h2 id="la-methode-kellum"><a class="putainde-Title-anchor" href="#la-methode-kellum">#</a>La m√©thode Kellum</h2><p>Ici, la m√©thode consiste √† utiliser une font particuli√®re contenant le caract√®re espace et dont la particularit√© est d‚Äôavoir une largeur nulle. Cette technique est d√©crite dans l‚Äôarticle de <a href="http://scottkellum.com/2013/10/25/the-new-kellum-method.html">Scott Kellum</a></p>
<p>Comme la technique pr√©c√©dente, il suffit d‚Äôappliquer la font au conteneur <code>.Grid</code> puis de remettre la font-family par defaut pour les enfants <code>.Grid-cell</code>. Et ainsi, toutes valeurs relatives en <em>em</em> sont pr√©serv√©es.</p>
<pre><code><span class="hljs-class">.Grid</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">display</span>:<span class="hljs-value"> block</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">font-family</span>:<span class="hljs-value"> <span class="hljs-string">'blank-kellum'</span></span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-class">.Grid-cell</span><span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">display</span>:<span class="hljs-value"> inline-block</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"> <span class="hljs-number">33.333333%</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">font-family</span>:<span class="hljs-value">sans-serif</span></span>;
<span class="hljs-rule">}</span></span>
</code></pre><p>L‚Äôinconv√©nient de cette technique est qu‚Äôelle n√©cessite le t√©l√©chargement d‚Äôun fichier font particuli√®r si le navigateur ne supporte pas √©l√©ments encod√©es en data-uri (en gros, en dessous d‚Äôie8). Par contre, si vous utilisez une font d‚Äôic√¥nes, rien ne vous emp√™che de combiner les deux, en ajoutant votre ic√¥ne de largeur nulle avec vos ic√¥nes. Voici un aper√ßu sur <a href="http://codepen.io/lionelB/pen/fvyjH">codepen</a></p>
<h1 id="le-mot-de-la-fin"><a class="putainde-Title-anchor" href="#le-mot-de-la-fin">#</a>Le mot de la fin</h1><p>Non, il n‚Äôy a pas vraiment une technique qui sort du lot. Comme toujours, cela d√©pend des navigateurs √† supporter, est ce que l‚Äôutilisateur pourra personnaliser le layout, qui sera charg√© des mise √† jour, etc‚Ä¶ autant de points qui aideront √† choisir la meilleure solution.</p>
<hr>
<p>Quelques ressources :</p>
<ul>
<li>L‚Äôarticle <a href="http://css-tricks.com/fighting-the-space-between-inline-block-elements/">Fighting the space between inline block elements</a> sur css-tricks</li>
<li>L‚Äôarticle <a href="http://webdesigner-webdeveloper.com/weblog/about-inline-blocks/">About inline-block</a> sur lequel je suis tomb√© en r√©digeant cet article.</li>
</ul>

]]></description><pubDate>Fri, 13 Jun 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/css/les-grilles-en-inline-block/</link><guid isPermaLink="true">http://putaindecode.fr/posts/css/les-grilles-en-inline-block/</guid></item><item><title>Introduction √† ReactJS</title><description><![CDATA[
<p>Cela fait maintenant un an que ReactJS est open-sourced.
C‚Äôest l‚Äôoccasion de pr√©senter le petit dernier de la vague MV*.</p>
<h2 id="les-differentes-approches-d-ui"><a class="putainde-Title-anchor" href="#les-differentes-approches-d-ui">#</a>Les diff√©rentes approches d‚ÄôUI</h2><h3 id="backbone"><a class="putainde-Title-anchor" href="#backbone">#</a>Backbone</h3><p><a href="http://backbonejs.org">Backbone</a> apporte une simplification dans la
d√©claration d‚Äô√©venements,
il reste cependant tr√®s peu impliqu√© dans le rendering.
Le choix de laisser l‚Äôutilisateur d√©cider de tout concernant
<code>Backbone.View</code> est positif pour de nombreux projets, mais rend
la gestion du DOM p√©nible.</p>
<p>Pour faire du data-binding, <code>Backbone</code> ne propose naturellement rien,
et l‚Äôon doit faire appel √† des mixins suppl√©mentaires pour le mettre
en place sans s‚Äôarracher les cheveux.</p>
<p>De plus, c‚Äôest souvent un moteur de templating comme
Handlebars ou Jade qui g√©n√©re la vue originale. On se retrouve donc avec
un joli <code>this.$el.html(this.template(data))</code> dans la m√©thode <code>render()</code>
qui va provoquer des jolies horreurs visuelles
(ie. les images se rechargent, les videos sont r√©initialis√©es).</p>
<p>En somme, Backbone est tr√®s sympathique pour structurer
son code proprement, mais concernant l‚ÄôUI, n‚Äôaide absolument pas √† r√©duire
la compl√©xit√© li√©e aux √©tats du DOM.</p>
<h3 id="angular"><a class="putainde-Title-anchor" href="#angular">#</a>Angular</h3><p><a href="https://angularjs.org">Angular</a> propose une approche beaucoup plus travaill√©e,
en imposant un moteur de templating HTML (on peut utiliser du preprocessing)
et on d√©clare ses bindings tr√®s simplement avec une syntaxe <code>{{mustache}}</code>.</p>
<p>On d√©clare les √©venements √† l‚Äôaide d‚Äôattributs <code>ng-{eventName}</code>.</p>
<p>Sur le papier, angular est donc tr√®s sympathique (je ne prendrais pas parti sur le dirty checking).</p>
<h3 id="ember"><a class="putainde-Title-anchor" href="#ember">#</a>Ember</h3><p><a href="http://emberjs.com">Ember</a> est un framework tr√®s bien pens√© et tr√®s travaill√©.
Il int√®gre tr√®s bien les concepts de <code>data-binding</code> √† l‚Äôaide de <a href="https://developer.mozilla.org/en-US/docs/Web/API/range">DOM Ranges</a>.
Il propose des conventions fortes, et contrairement √† la plupart des <em>a priori</em>,
est tr√®s simple √† prendre en main.
Les subviews sont tr√®s simples √† utiliser √† l‚Äôaide d‚Äô<code>{{outlet}}</code>.</p>
<p>Pour r√©sumer, ember et angular proposent de vraies solutions pour la gestion
de l‚ÄôUI. Cependant les deux conservent cette d√©marche :</p>
<ul>
<li>on <em>render</em> (g√©n√®re et ins√®re le bout de DOM) une fois</li>
<li>on update les bindings</li>
</ul>
<h3 id="react"><a class="putainde-Title-anchor" href="#react">#</a>React</h3><p><a href="http://facebook.github.io/react/">React</a> change compl√®tement d‚Äôapproche.
Il part d‚Äôun constat simple :
le fait que le DOM ait constamment un √©tat diff√©rent, c‚Äôest chiant √† g√©rer.</p>
<p>Du coup, et si on appelait <code>.render()</code> √† chaque modification ?
√áa a l‚Äôair stupide, hein ? Pas tant que √ßa en fait.</p>
<p>React impl√©mente un <strong>DOM virtuel</strong>, une repr√©sentation interne du DOM
extr√™mement rapide. Il inclut par ailleurs son propre syst√®me d‚Äô√©v√©nements,
ce qui permet √† React de faire b√©n√©ficier de la phase de capturing aux navigateurs
n‚Äôimpl√©mentant pas <code>EventTarget</code> (oui, IE8, c‚Äôest toi que je regarde).</p>
<p>La m√©thode <code>render</code> retourne des objets correspondant √† la repr√©sentation
interne du DOM virtuel.</p>
<p>Les classes React se d√©finissent par leur <code>state</code>.
Lorsque l‚Äôon cr√©e une classe, on d√©finit une m√©thode <code>getInitialState</code> qui
retournera un √©tat initial.</p>
<p>Apr√®s cela, le seul moyen de changer l‚Äô√©tat est d‚Äôindiquer √† <code>this.setState</code>
quelles valeurs de l‚Äô√©tat ont chang√© afin de mettre √† jour le DOM.</p>
<p>Une classe React se voit passer des propri√©t√©s au moment d‚Äô√™tre instanci√©e : les
<code>props</code>. √Ä ne pas confondre avec le <code>state</code>, son contenu ne doit √™tre
manipul√© que par l‚Äôext√©rieur de la classe (bien que celle-ci puisse obtenir
des valeurs par d√©faut en d√©finissant une m√©thode <code>getDefaultProps</code> qui les
retourne).</p>
<p>Le <code>state</code>, en revanche, ne doit √™tre modifi√© qu‚Äôau sein des m√©thodes propres
√† la classe.</p>
<p>Le principal avantage est que l‚Äôon est certain, du fait de l‚Äôappel syst√©matique
√† <code>render</code>, que notre composant React aura la repr√©sentation attendue pour un √©tat donn√©.</p>
<p>Un des autres avantages de React est son algorithme de diff interne.
Le DOM virtuel va √™tre compar√© avec la version visible, et React effectue
√† l‚Äôaide d‚Äôop√©rations simples les seuls changements n√©cessaires.</p>
<p>Cela r√©soud des probl√©matiques comme la position du curseur dans un champ texte
qui effectue du two-way data-binding; puisque l‚Äôalgorithme n‚Äôy voit pas de
changement n√©cessaire, le champ texte n‚Äôest pas modifi√© et l‚Äôon garde donc le focus.
Du m√™me fait, si vous avez un gif qui boucle, il ne se relancera pas
inopin√©ment.</p>
<p>React est id√©alement utilis√© avec jsx, un pr√©-processeur js qui permet
d‚Äô√©crire les templates avec une syntaxe xml (voir l‚Äôexemple plus bas),
ce qui permet √† des novices de le prendre en main tr√®s rapidement.</p>
<h2 id="creons-un-component-react-"><a class="putainde-Title-anchor" href="#creons-un-component-react-">#</a>Cr√©ons un component react :</h2><pre><code class="lang-javascript"><span class="hljs-keyword">var</span> View = React.createClass({
  getInitialState : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">// √©tat initial</span>
    <span class="hljs-keyword">return</span> {
      checked : <span class="hljs-literal">false</span>
    }
  },
  getDefaultProps : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">// si `this.props.label` n'est pas pr√©sent, ce sera `"?"`</span>
    <span class="hljs-keyword">return</span> {
      label : <span class="hljs-string">"?"</span>
    }
  },
  toggle : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">// on cr√©e un nouvel √©tat (les √©tats de react sont immutable)</span>
    <span class="hljs-comment">// et on d√©clenche le render</span>
    <span class="hljs-keyword">this</span>.setState({
      checked : !<span class="hljs-keyword">this</span>.state.checked
    })
  },
  render : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">// petit addon pour se simplifier la vie</span>
    <span class="hljs-keyword">var</span> classes = React.addons.classSet({
      <span class="hljs-string">"list-item"</span> : <span class="hljs-literal">true</span>,
      <span class="hljs-string">"list-item--valid"</span> : <span class="hljs-keyword">this</span>.state.checked
    })
    <span class="hljs-keyword">return</span> (
      &lt;div className={classes}&gt;
        {<span class="hljs-comment">/* notre binding tout simple */</span>}
        &lt;input checked={<span class="hljs-keyword">this</span>.state.checked} type=<span class="hljs-string">"checkbox"</span> onChange={<span class="hljs-keyword">this</span>.toggle} /&gt;
        {<span class="hljs-keyword">this</span>.props.label}
      &lt;/div&gt;
    )
  }
})

<span class="hljs-comment">// on mount le component, et l'on passe le label</span>
<span class="hljs-keyword">var</span> view = React.renderComponent(&lt;View label=<span class="hljs-string">"helloworld"</span> /&gt;, document.getElementById(<span class="hljs-string">"id"</span>))
<span class="hljs-comment">// et hop</span>
view.toggle()
</code></pre>
<h2 id="sum-up-des-avantages-de-react"><a class="putainde-Title-anchor" href="#sum-up-des-avantages-de-react">#</a>Sum up des avantages de React</h2><p>React a bien compris ces points :</p>
<ul>
<li>le DOM est lent, du moins en √©criture, et limiter les interactions avec
ce dernier est essentiel ;</li>
<li>devoir continuellement penser √† l‚Äô√©tat du DOM √† l‚Äôinstant <code>n</code> n‚Äôest pas
une pr√©occupation que nous devrions avoir en d√©veloppant l‚ÄôUI de nos
composants ;</li>
<li>les concepts d‚Äôimmutabilit√© (un objet ne change pas, on en cr√©e un nouveau √†
chaque changement) et de composition (composer une classe de diff√©rentes
fonctionnalit√©s sans devoir cr√©er des cha√Ænes d‚Äôh√©ritage complexes) ont de
grands int√©r√™ts, trop peu utilis√©s en front-end.</li>
</ul>
<p>En bonus, React, m√™me s‚Äôil n‚Äôimpose pas de biblioth√®que pour les
data et la communication des modules, offre une approche nomm√©e
<a href="http://facebook.github.io/react/docs/flux-overview.html">flux</a> tr√®s
int√©ressante et vous offrant des cl√©s pour concevoir une app avec en
t√™te les paradigmes pens√©s pour React.</p>
<p>Last but not least, vous pouvez render vos composants React depuis le serveur
et la lib sera assez intelligente pour reconnaitre les composants d√©j√† g√©n√©r√©s
pour ne pas les render syst√©matiquement, c‚Äôest pas beau, √ßa ?</p>

]]></description><pubDate>Wed, 04 Jun 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/js/introduction-a-reactjs/</link><guid isPermaLink="true">http://putaindecode.fr/posts/js/introduction-a-reactjs/</guid></item><item><title>Faire son pr√©processeur CSS √† la carte</title><description><![CDATA[
<p>Apr√®s vous avoir fait un petit <a href="/posts/css/le-point-sur-les-preprocesseurs/">√©tat de l‚Äôart des pr√©processeurs CSS historiques</a>
et vous avoir parl√© <a href="/posts/css/le-point-sur-les-preprocesseurs/">des postprocesseurs</a>,
je me dois de vous montrer le chemin qui me semble le plus pertinent aujourd‚Äôhui,
en 2014, maintenant que <a href="http://www.w3.org/standards/techs/css#cr">les sp√©cifications CSS sont d√©coup√©es en modules</a>
qui peuvent du coup avancer (plus rapidement) chacune de leur c√¥t√©.</p>
<p>Bon apr√®s faut avouer que chez {p!} on fait genre on est des hipsters hackers,
du coup quand on voit que <a href="http://blog.kaelig.fr/post/85546040569/net-awards-sass-game-changer-of-the-year">Sass est le game changer of the year</a>
 et que tout le monde l‚Äôadopte, on se doit de rester hipster.
Du coup on est oblig√©s de passer √† autre chose.</p>
<h2 id="pre-ou-postprocesseurs-"><a class="putainde-Title-anchor" href="#pre-ou-postprocesseurs-">#</a>Pr√© ou postprocesseurs ?</h2><p>Je vais ici utiliser le mot pr√©processeur, alors que certains trouveront postprocesseurs plus pertinent,
car pour moi le pr√©processing reste simplement une √©tape avant le <em>processing</em>
de nos feuilles de styles par les navigateurs.</p>
<p>Cela dit il faut bien distinguer les √©tapes :</p>
<ol>
<li>Preprocessing d‚Äôun langage sp√©cifique (Sass, Stylus*) ou superset du langage CSS (Scss, Less);</li>
<li>Preprocessing d‚Äôun fichier respectant la syntaxe CSS;</li>
<li>Processing par le navigateur</li>
</ol>
<p>Revenons rapidement sur ces 3 points :</p>
<h3 id="preprocessing-via-langage-dedie"><a class="putainde-Title-anchor" href="#preprocessing-via-langage-dedie">#</a>Preprocessing via langage d√©di√©</h3><p>Ici je parle d‚Äôun langage, car superset ou pas, on a des √©l√©ments nouveaux,
incompr√©hensibles par le navigateur (ex: <code>@if</code>, <code>@foreach</code>‚Ä¶).</p>
<p>Note: Je case Stylus dans le langage sp√©cifique car il n‚Äôest pas vraiment compatible,
ne tol√©rant pas l‚Äôindentation :</p>
<pre><code class="lang-css"><span class="hljs-class">.Block</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">prop</span>:<span class="hljs-value"> value </span></span></span>}

  <span class="hljs-class">.Block-element</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">prop</span>:<span class="hljs-value"> value </span></span></span>}

<span class="hljs-comment">/* üí• BOOM ! CA PAS MARCHER EN STYLUS */</span>
</code></pre>
<h3 id="preprocessing-futureproof-fallback"><a class="putainde-Title-anchor" href="#preprocessing-futureproof-fallback">#</a>Pr√©processing futureproof/fallback</h3><p>Ici on conserve la syntaxe CSS, le parsing est donc simple est connu.
Mais attention on peut avoir un r√©sultat non compr√©hensible par certains navigateurs
(ex: unit√© REM sur IE 8, variables CSS‚Ä¶).</p>
<p>√Ä la diff√©rence de la solution du dessus, on reste ici avec un langage √† la syntaxe simple
et connue, avec des sp√©cifications (en brouillon ou pas).</p>
<p>D√®s que c‚Äôest possible on va rendre le CSS encore plus compatible en ajoutant
des fallbacks (roues de secours) √† tout va.
Ainsi par exemple pour assurer une utilisation de l‚Äôunit√© REM, on peut (en roue de secours)
doubler nos valeurs en <code>px</code>.
Autre exemple avec les variables CSS natives : on peut (pour une utilisation simpliste)
faire un pr√©rendu et mettre des roues de secours l√† o√π c‚Äôest possible.</p>
<h3 id="processing-par-le-navigateur"><a class="putainde-Title-anchor" href="#processing-par-le-navigateur">#</a>Processing par le navigateur</h3><p>Ici on a blind√© notre feuille de fallback, on est (en th√©orie) sens√© avoir un support ‚Äúau mieux‚Äù.</p>
<h2 id="creer-un-preprocesseur-css"><a class="putainde-Title-anchor" href="#creer-un-preprocesseur-css">#</a>Cr√©er un pr√©processeur CSS</h2><p>Allons √† l‚Äôessentiel : pour cr√©er votre pr√©processeur on va utiliser une biblioth√®que.
√Ä ce jour nous avons le choix entre <a href="https://github.com/reworkcss/rework">Rework</a>
 ou <a href="https://github.com/ai/postcss">PostCSS</a> qui permettent d‚Äôinspecter et de manipuler nos CSS.
Tout deux sont des biblioth√®ques √©critent en JavaScript (NodeJs).</p>
<p>Pour la petite histoire, Autoprefixer est √† l‚Äôorigine de PostCSS. En effet les
premi√®res versions utilisaient Rework, mais √† cause de limitation dues √† l‚ÄôAPI de Rework,
l‚Äôauteur d‚ÄôAutoprefixer √† d√©cider de cr√©er son propre moteur, qui a une API presque
plus sympa il faut le dire (il faudra voir comment √©volue Rework).</p>
<p>D‚Äôun autre c√¥t√© Rework √©tant plus ancien, il poss√®de un √©cosyst√®me plus fourni et r√©pondra
donc mieux √† nos besoins.</p>
<p>Cela √©tant dit, avec l‚Äôapproche futureproof nous pourrons switcher de Rework √† PostCSS
 sans probl√®me et surtout sans toucher √† nos feuilles de styles.
Il suffira de trouver un plugin √©quivalent (ex: rework-vars et postcss-vars font la m√™me chose).</p>
<p>Pour des raisons d‚Äô√©cosyst√®me, je partirai sur Rework histoire de ne pas r√©inventer la roue.</p>
<h2 id="creer-un-preprocesseur-css-avec-rework"><a class="putainde-Title-anchor" href="#creer-un-preprocesseur-css-avec-rework">#</a>Cr√©er un pr√©processeur CSS avec Rework</h2><p>Rework prend une cha√Æne CSS en entr√©e, produit un AST (arbre de syntaxe abtrait)
de notre CSS et nous fournis une API pour le manipuler.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> rework = <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework"</span>)
<span class="hljs-keyword">var</span> unPlugin = <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework-BIDULE"</span>)
<span class="hljs-comment">// usage simple</span>
<span class="hljs-keyword">var</span> css = rework(<span class="hljs-string">"html { font-size: 2rem}"</span>).<span class="hljs-keyword">use</span>(unPlugin).toString()
</code></pre>
<h3 id="plugin-rework"><a class="putainde-Title-anchor" href="#plugin-rework">#</a>Plugin Rework</h3><p>Un plugin Rework n‚Äôest rien d‚Äôautre qu‚Äôune fonction JavaScript.
L‚Äôexemple suivant remplacera toutes les couleurs de texte par du noir.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> monPlugin = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">plugin</span><span class="hljs-params">(ast, reworkInstance)</span> </span>{
  ast.rules.<span class="hljs-keyword">forEach</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(rule)</span> </span>{
    <span class="hljs-comment">// dans notre cas on ne veut que travailler sur des r√®gles</span>
    <span class="hljs-keyword">if</span> (rule.type !== <span class="hljs-string">"rule"</span>) <span class="hljs-keyword">return</span>

    rule.declarations.<span class="hljs-keyword">forEach</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(declaration, index)</span> </span>{
      <span class="hljs-keyword">if</span> (declaration.property === <span class="hljs-string">"color"</span>) {
        declaration.value = <span class="hljs-string">'#000'</span>
      }
    })
  })
}
</code></pre>
<p>Il est certain que l‚Äôexemple ci-dessus ne doit pas vous exciter beaucoup. Moi non plus.
Je n‚Äôai d‚Äôailleurs pas du tout accroch√© lorsque Rework est apparu par manque de compr√©hension.
<strong>Ou plut√¥t par manque d‚Äôimagination</strong>.</p>
<p>Pour un exemple plus costaud je vous invite √† regarder le code <a href="https://github.com/reworkcss/rework-vars/blob/master/index.js">rework-vars</a>.</p>
<h2 id="l-ecosysteme-rework"><a class="putainde-Title-anchor" href="#l-ecosysteme-rework">#</a>L‚ÄôEcosyst√®me Rework</h2><p>Heureusement pour nous, nous avons un √©cosyst√®me. Donc pour un usage classique (√©crire
du CSS futureproof ou ajouter quelques petites am√©liorations) il n‚Äôy aura pas besoin
d‚Äô√©crire de plugin, juste en utiliser fera l‚Äôaffaire.</p>
<h3 id="plugins-rework-natif"><a class="putainde-Title-anchor" href="#plugins-rework-natif">#</a>Plugins Rework natif</h3><p>Rework embarque en natif quelques plugins. Il faudra tout de m√™me les activer (on voit comment juste apr√®s).</p>
<ul>
<li><a href="https://github.com/reworkcss/rework#extend">extend</a>: Permet d‚Äôh√©riter d‚Äôun s√©lecteur (<code>@extend</code> quoi).</li>
<li><a href="https://github.com/reworkcss/rework#ease">ease</a>: Ajout un paquet de fonctions d‚Äôeasing pour les animations et transitions.</li>
<li><a href="https://github.com/reworkcss/rework#at2x">at2x</a>: Gestion automatique des images <code>@2x</code>.</li>
<li><a href="https://github.com/reworkcss/rework#prefixselectorsstring">prefixSelectors</a>: Permet de pr√©fixer vos s√©lecteurs.</li>
<li><a href="https://github.com/reworkcss/rework#colors">colors</a>: Explication par l‚Äôexemple : <code>rgba(#fc0, .5)</code>.</li>
<li><a href="https://github.com/reworkcss/rework#mixinobject">mixin</a>: Faire ses propres mixins via des fonctions JavaScript.</li>
<li><a href="https://github.com/reworkcss/rework#functionobject">function</a>: Ajouter ses propres fonctions CSS.</li>
<li><a href="https://github.com/reworkcss/rework#references">references</a>: Permet de faire r√©f√©rence √† des valeurs de propri√©t√©s (ex: <code>height: @width</code>)</li>
<li><a href="https://github.com/reworkcss/rework#urlfn">url</a>: R√©√©crire les <code>url()</code>s via une fonction JavaScript.</li>
<li><a href="https://github.com/reworkcss/rework#inlinedir">inline</a>: Inliner des ressources via des datauri.</li>
</ul>
<h3 id="plugins-rework-npm"><a class="putainde-Title-anchor" href="#plugins-rework-npm">#</a>Plugins Rework NPM</h3><p>On a d√©j√† plus d‚Äôune soixantaine de <a href="https://www.npmjs.org/search?q=rework">plugins Rework disponible sur NPM</a> en plus des plugins natifs.</p>
<h4 id="ajouter-des-fallbacks"><a class="putainde-Title-anchor" href="#ajouter-des-fallbacks">#</a>Ajouter des fallbacks</h4><p>Si vous souhaitez √©crire des CSS sans pour autant vous limiter √† certaines impl√©mentations, ces plugins devraient vous plaire.</p>
<h5 id="rework-vars"><a class="putainde-Title-anchor" href="#rework-vars">#</a>rework-vars</h5><p><a href="https://github.com/reworkcss/rework-vars">rework-vars</a>
permet un usage des <a href="http://www.w3.org/TR/css-variables/">variables CSS</a>.
Ce plugin est (pour l‚Äôinstant) restreint aux d√©clarations √† la racine (<code>:root</code>).
Cela permet toutefois un usage classique de variables globales.
Et de se s√©parer de Sass ou Less si on utilise pas beaucoup plus que des variables.</p>
<h5 id="rework-calc"><a class="putainde-Title-anchor" href="#rework-calc">#</a>rework-calc</h5><p><a href="https://github.com/reworkcss/rework-calc">rework-calc</a>
ajoute les r√©sultats des op√©rations <code>calc()</code> quand c‚Äôest possible (m√™me unit√©).
Tr√®s pratique sp√©cialement coupl√© avec rework-vars pour ajouter un peu de math via vos variables.</p>
<h5 id="rework-npm"><a class="putainde-Title-anchor" href="#rework-npm">#</a>rework-npm</h5><p><a href="https://github.com/conradz/rework-npm">rework-npm</a>
nous parse <code>@import</code> comme on l‚Äôaime.
Peut taper dans votre dossier de sources ou en plus dans <code>node_modules</code>
(pratique pour utiliser <a href="https://www.npmjs.org/package/normalize.css">normalize.css</a>
<a href="/posts/frontend/npm-comme-package-manager-pour-le-front-end/">via npm</a> par exemple).
Il existe aussi <a href="https://github.com/simme/rework-importer">rework-importer</a> qui am√®ne quelques diff√©rences de syntaxe.</p>
<h5 id="-a-href-https-github-com-ctalkington-rework-rem-fallback-rework-rem-fallback-a-"><a class="putainde-Title-anchor" href="#-a-href-https-github-com-ctalkington-rework-rem-fallback-rework-rem-fallback-a-">#</a><a href="https://github.com/ctalkington/rework-rem-fallback">rework-rem-fallback</a></h5><p><a href="https://github.com/ctalkington/rework-rem-fallback">rework-rem-fallback</a>
ajout un fallback sur les unit√©s REM. Pratique si vous voulez utiliser REM mais
que vous devez supporter IE 8.</p>
<h5 id="rework-color-function"><a class="putainde-Title-anchor" href="#rework-color-function">#</a>rework-color-function</h5><p><a href="https://github.com/ianstormtaylor/rework-color-function">rework-color-function</a> permet
de manipuler les couleurs via
<a href="http://dev.w3.org/csswg/css-color/#modifying-colors">les nouvelles fonctions en cours de sp√©cifications</a>
(hue, saturation, lightness, whiteness, blackness, tint, shade, blend, blenda, contrast).</p>
<h5 id="rework-mixin-opacity"><a class="putainde-Title-anchor" href="#rework-mixin-opacity">#</a>rework-mixin-opacity</h5><p><a href="https://github.com/reworkcss/rework-mixin-opacity">rework-mixin-opacity</a> ajoute l‚Äô<code>opacity</code> pour IE 8.</p>
<h4 id="ameliorer-un-peu-vos-feuilles-de-styles"><a class="putainde-Title-anchor" href="#ameliorer-un-peu-vos-feuilles-de-styles">#</a>Am√©liorer un peu vos feuilles de styles</h4><p>Sans pour autant partir en vrille vers des <code>@if</code> ou <code>@each</code>, voici quelques plugins
qui peuvent ajouter un peu de beurre dans les √©pinards :</p>
<h5 id="rework-parent"><a class="putainde-Title-anchor" href="#rework-parent">#</a>rework-parent</h5><p><a href="https://github.com/fgnass/rework-parent">rework-parent</a> permet de r√©f√©rencer le s√©lecteur pr√©c√©dent via <code>&amp;</code>. Pratique dans pour les media-queries ou pour les √©tats (:hover etc).</p>
<h5 id="rework-breakpoints"><a class="putainde-Title-anchor" href="#rework-breakpoints">#</a>rework-breakpoints</h5><p><a href="https://github.com/reworkcss/rework-breakpoints">rework-breakpoints</a> permet de sp√©cifier des media-queries via des breakpoints pr√©d√©finis. Pratique en attendant un plugin g√©rant les <a href="http://dev.w3.org/csswg/mediaqueries4/#custom-mq"><code>@custom-media</code></a>.</p>
<h5 id="rework-hex-alpha"><a class="putainde-Title-anchor" href="#rework-hex-alpha">#</a>rework-hex-alpha</h5><p><a href="https://github.com/ianstormtaylor/rework-hex-alpha">rework-hex-alpha</a> permet de sp√©cifier des couleurs avec alpha sous la forme #rrggbbaa.</p>
<h5 id="rework-clearfix"><a class="putainde-Title-anchor" href="#rework-clearfix">#</a>rework-clearfix</h5><p><a href="https://github.com/fgnass/rework-clearfix">rework-clearfix</a> permet d‚Äôutiliser <code>clear: fix</code> via l‚Äôinsertion automatique du <a href="http://nicolasgallagher.com/micro-clearfix-hack/">micro clearfix de @necolas</a>.</p>
<h5 id="rework-assets"><a class="putainde-Title-anchor" href="#rework-assets">#</a>rework-assets</h5><p><a href="https://github.com/conradz/rework-assets">rework-assets</a> permet de copier les assets r√©f√©renc√©s. Pratique avec rework-npm et des modules externes.</p>
<h5 id="rework-namespace-css"><a class="putainde-Title-anchor" href="#rework-namespace-css">#</a>rework-namespace-css</h5><p><a href="https://github.com/geordiemhall/rework-namespace-css">rework-namespace-css</a> permet de namespacer vos CSS par une classe sur <code>&lt;html&gt;</code>.</p>
<h5 id="rework-namespace"><a class="putainde-Title-anchor" href="#rework-namespace">#</a>rework-namespace</h5><p><a href="https://github.com/kristoferjoseph/rework-namespace">rework-namespace</a> permet de namespacer vos CSS par un pr√©fixe. Pratique avec <a href="/posts/css/petite-definition-bem/">BEM</a> lorsque vous pr√©fixez par votre <code>.org-</code>.</p>
<h5 id="rework-classmap"><a class="putainde-Title-anchor" href="#rework-classmap">#</a>rework-classmap</h5><p><a href="https://github.com/andreypopp/rework-classmap">rework-classmap</a> permet de renommer des classes via du mapping. Avec √ßa on pourrait presque avoir un code Bootstrap propre.</p>
<h5 id="rework-palette"><a class="putainde-Title-anchor" href="#rework-palette">#</a>rework-palette</h5><p><a href="https://github.com/fgnass/rework-palette">rework-palette</a> permet d‚Äôajouter une palette de couleur personnalis√© (via des noms de couleurs).</p>
<h5 id="rework-deduplicate"><a class="putainde-Title-anchor" href="#rework-deduplicate">#</a>rework-deduplicate</h5><p><a href="https://github.com/kristoferjoseph/rework-deduplicate">rework-deduplicate</a> permet de supprimer les r√®gles dupliqu√©s.</p>
<h5 id="rework-split-media"><a class="putainde-Title-anchor" href="#rework-split-media">#</a>rework-split-media</h5><p><a href="https://github.com/reworkcss/split-media">rework-split-media</a> permet de couper les contenu des media queries dans d‚Äôautres fichiers</p>
<h5 id="rework-move-media"><a class="putainde-Title-anchor" href="#rework-move-media">#</a>rework-move-media</h5><p><a href="https://github.com/reworkcss/rework-move-media">rework-move-media</a> permet de regrouper les contenu des media queries. Pas tr√®s utile car gzip fera aussi bien.</p>
<h4 id="au-dela-du-preprocessing"><a class="putainde-Title-anchor" href="#au-dela-du-preprocessing">#</a>Au del√† du pr√©processing</h4><p>En utilisant le parser Rework, on peut faire plus que des ajustements ou du remplacement. On peut balancer des erreurs.</p>
<ul>
<li><a href="https://github.com/reworkcss/rework-ie-limits">rework-ie-limits</a>: pr√©vient si vos CSS d√©passent la limite de 4095 selectors (limite pour IE &lt; 10).</li>
<li><a href="https://github.com/suitcss/rework-suit-conformance">rework-suit-conformance</a>: permet de v√©rifier que votre code suit bien les <a href="https://github.com/suitcss/suit/tree/master/doc">conventions SUIT</a> (pour peu que vous les suiviez).</li>
</ul>
<p>En partant dans d‚Äôautres directions on pourrait r√©aliser des statistiques sur
nos CSS (nombre de s√©lecteurs, de couleurs utilis√©s etc) comme le fait <a href="http://www.cssstats.com/">CSS Stats</a>.</p>
<p>Retrouvrez en plus de la recherche via npm (qui sera la plus √† jour), <a href="https://github.com/reworkcss/rework/wiki/Plugins-and-Utilities">une liste des plugins et utilitaires sur le wiki de Rework</a>.</p>
<h2 id="mise-en-place-de-rework-pour-faire-votre-preprocesseur-en-moins-de-5-min"><a class="putainde-Title-anchor" href="#mise-en-place-de-rework-pour-faire-votre-preprocesseur-en-moins-de-5-min">#</a>Mise en place de Rework pour faire votre pr√©processeur en moins de 5 min</h2><p>Maintenant que nous avons vu comment utiliser Rework et quels sont les plugins
les plus sympa, on se faire un petit fichier pour automatiser tout ce process.</p>
<p>Plut√¥t que de r√©inventer la roue comme l‚Äôa fait <a href="http://pleeease.io/">Pleeease</a> (en g√©rant un watcher et tout le tralala),
on va plut√¥t partir comme <a href="http://myth.io/">Myth.io</a> ou <a href="https://github.com/visionmedia/styl">Styl</a> (successeur spirituel de Stylus)
qui se concentrent sur le rendu et non le workflow pour g√©n√©rer ce rendu.</p>
<p>Nous allons donc faire simple et efficace avec une task <a href="/posts/js/introduction-gulp/">gulp</a>.
Ceci pourrait bien entendu √™tre aussi bien fait avec grunt ou m√™me make et <a href="https://github.com/facebook/watchman">watchman</a>.</p>
<pre><code class="lang-shell">$ mkdir monrework &amp;&amp; cd monrework

# <span class="hljs-keyword">on</span> cr√©e un <span class="hljs-keyword">package</span>.json pour sauvegarder les r√©f√©rences des paquets qu<span class="hljs-attribute">'on</span> va utiliser
$ npm init

# <span class="hljs-keyword">on</span> install gulp, autoprefixer et rework &amp; co en les sauvegardants dans la partie <span class="hljs-string">"devDependencies"</span>
$ npm i -D minimist gulp gulp-util gulp-plumber gulp-autoprefixer gulp-rework rework-npm rework-vars rework-calc rework-color-<span class="hljs-keyword">function</span> rework-<span class="hljs-keyword">rem</span>-fallback rework-parent rework-ie-limits

# <span class="hljs-keyword">on</span> cr√©√© notre fichier vide
$ mkdir src &amp;&amp; mkdir src/styles &amp;&amp; touch src/styles/index.css
</code></pre>
<p>Ensuite il nous reste √† faire notre petit <code>Gulpfile.js</code></p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> options = <span class="hljs-keyword">require</span>(<span class="hljs-string">"minimist"</span>)(process.argv.slice(<span class="hljs-number">2</span>))
<span class="hljs-keyword">var</span> gulp = <span class="hljs-keyword">require</span>(<span class="hljs-string">"gulp"</span>)
<span class="hljs-keyword">var</span> util = <span class="hljs-keyword">require</span>(<span class="hljs-string">"gulp-util"</span>)
<span class="hljs-keyword">var</span> plumber = <span class="hljs-keyword">require</span>(<span class="hljs-string">"gulp-plumber"</span>)
<span class="hljs-keyword">var</span> rework = <span class="hljs-keyword">require</span>(<span class="hljs-string">"gulp-rework"</span>)

<span class="hljs-keyword">var</span> reworkPlugins = {
  atimport: <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework-npm"</span>),
  <span class="hljs-keyword">parent</span>: <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework-parent"</span>),
  vars: <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework-vars"</span>),
  calc: <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework-calc"</span>),
  colorFn: <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework-color-function"</span>),
  remFallback: <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework-rem-fallback"</span>),
  ieLimits: <span class="hljs-keyword">require</span>(<span class="hljs-string">"rework-ie-limits"</span>)
}
<span class="hljs-keyword">var</span> autoprefixer = <span class="hljs-keyword">require</span>(<span class="hljs-string">"gulp-autoprefixer"</span>)

gulp.task(<span class="hljs-string">"styles"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// ici on prends toutes les CSS √† la racine</span>
  <span class="hljs-comment">// on consid√®re que celle dans des sous dossiers sont √† importer</span>
  <span class="hljs-keyword">return</span> gulp.src(<span class="hljs-string">"./src/styles/*.css"</span>)
    .pipe(opts.production ? plumber() : util.noop())
    .pipe(rework(
      reworkPlugins.atimport({dir: <span class="hljs-string">"./src/styles/"</span>}),
      rework.colors(),
      rework.references(),
      rework.ease(),
      rework.inline,
      reworkPlugins.<span class="hljs-keyword">parent</span>,
      reworkPlugins.vars(), <span class="hljs-comment">// notez que certains plugins n√©cessite d'√™tre √©xecut√© (retourant une fonction dynamique)</span>
      reworkPlugins.calc,
      reworkPlugins.colorFn,
      reworkPlugins.remFallback(),
      reworkPlugins.ieLimits
    ))
    .pipe(autoprefixer())
    .pipe(gulp.dest(<span class="hljs-string">"./dist/styles"</span>))
})

gulp.task(<span class="hljs-string">"default"</span>, [<span class="hljs-string">"styles"</span>], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  gulp.watch(<span class="hljs-string">"./src/css/**/*"</span>, [<span class="hljs-string">"styles"</span>])
})
</code></pre>
<p>Ensuite il reste plus qu‚Äô√† lancer Gulp au besoin qui s‚Äôoccupera d‚Äô√©xecuter le preprocessing
au d√©marrage et lors des changements de fichiers.
Il ne reste plus grand chose √† faire si ce n‚Äôest ajouter livereload en plus pour avoir le petit process au petit oignon.</p>
<pre><code class="lang-shell">$ gulp
[gulp] Using gulpfile ~/Development/monrework/Gulpfile.js
[gulp] Starting <span class="hljs-string">'styles'</span><span class="hljs-keyword">...</span>
[gulp] Finished <span class="hljs-string">'styles'</span> after <span class="hljs-number">49</span> ms
[gulp] Starting <span class="hljs-string">'default'</span><span class="hljs-keyword">...</span>
[gulp] Finished <span class="hljs-string">'default'</span> after <span class="hljs-number">4.16</span> ms
</code></pre>
<p>Le watch est lanc√©, on peut remplir notre fichier CSS</p>
<pre><code class="lang-css"><span class="hljs-pseudo">:root</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">--font-size</span>:<span class="hljs-value"> <span class="hljs-number">1rem</span></span></span>;
    <span class="hljs-rule"><span class="hljs-attribute">--line-height</span>:<span class="hljs-value"> <span class="hljs-number">1.5rem</span></span></span>;
    <span class="hljs-rule"><span class="hljs-attribute">--color-highlight</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-hexcolor">#f00</span>, .<span class="hljs-number">8</span>)</span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-tag">html</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"> <span class="hljs-number">100%</span></span></span>;
    <span class="hljs-rule"><span class="hljs-attribute">height</span>:<span class="hljs-value"> @width</span></span>;
    <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-function">var</span>(--font-size)
</span></span></span>}

<span class="hljs-tag">p</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">margin</span>:<span class="hljs-value"> <span class="hljs-function">calc</span>(<span class="hljs-function">var</span>(--line-height) / <span class="hljs-number">2</span>) <span class="hljs-number">0</span></span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-tag">a</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">var</span>(--color-highlight)</span></span>;
    <span class="hljs-rule"><span class="hljs-attribute">transition</span>:<span class="hljs-value"> all <span class="hljs-number">500ms</span> ease-out-back</span></span>;
<span class="hljs-rule">}</span></span>

&amp;<span class="hljs-pseudo">:hover</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-function">var</span>(--color-highlight) <span class="hljs-function">lightness</span>(-<span class="hljs-number">10%</span>))</span></span>;
    <span class="hljs-rule"><span class="hljs-attribute">trasnform</span>:<span class="hljs-value"> <span class="hljs-function">rotate</span>(<span class="hljs-number">1deg</span>)</span></span>;
<span class="hljs-rule">}</span></span>
</code></pre>
<p>Et on obtiendra</p>
<pre><code class="lang-css"><span class="hljs-tag">html</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"> <span class="hljs-number">100%</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">height</span>:<span class="hljs-value"> <span class="hljs-number">100%</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">16px</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">1rem</span></span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-tag">p</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">margin</span>:<span class="hljs-value"> <span class="hljs-number">12px</span> <span class="hljs-number">0</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">margin</span>:<span class="hljs-value"> <span class="hljs-number">0.75rem</span> <span class="hljs-number">0</span></span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-tag">a</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, .<span class="hljs-number">8</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">-webkit-transition</span>:<span class="hljs-value"> all <span class="hljs-number">500ms</span> <span class="hljs-function">cubic-bezier</span>(<span class="hljs-number">0.175</span>, <span class="hljs-number">0.885</span>, <span class="hljs-number">0.320</span>, <span class="hljs-number">1.275</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">transition</span>:<span class="hljs-value"> all <span class="hljs-number">500ms</span> <span class="hljs-function">cubic-bezier</span>(<span class="hljs-number">0.175</span>, <span class="hljs-number">0.885</span>, <span class="hljs-number">0.320</span>, <span class="hljs-number">1.275</span>)</span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-tag">a</span><span class="hljs-pseudo">:hover</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">204</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.8</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">transform</span>:<span class="hljs-value"> <span class="hljs-function">rotate</span>(<span class="hljs-number">1deg</span>)</span></span>;
<span class="hljs-rule">}</span></span>
</code></pre>
<p>Gardez bien en t√™te qu‚Äôavec le code CSS d‚Äôorigine, vous avez (en majeur partie) un code futureproof.
D‚Äôici quelques temps on pourra supprimer une grande partie des plugins et les navigateurs prendront le relais üòâ.</p>
<p><em>Note: J‚Äôai ouvert <a href="https://github.com/reworkcss/rework-vars/issues/28">un ticket sur rework-vars</a> afin que celui-ci agisse comme un fallback (en rajoutant les valeurs) et non un remplacement. Je mettrais √† jour ce post dans ce sens d√®s que possible.</em></p>
<p><strong>Bon alors, on Less tomber Sass ?</strong></p>

]]></description><pubDate>Tue, 20 May 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/css/preprocesseur-a-la-carte/</link><guid isPermaLink="true">http://putaindecode.fr/posts/css/preprocesseur-a-la-carte/</guid></item><item><title>Se mettre au frontend en 2014, par o√π commencer ?</title><description><![CDATA[
<p>Un de nos lecteurs nous a r√©cemment envoy√© un email avec tout un tas de questions; nous avons appr√©ci√© le geste et plut√¥t qu‚Äôuniquement lui r√©pondre, nous souhaitions en faire profiter tout le monde.</p>
<hr>
<blockquote>
<p>Salut putain de code,</p>
</blockquote>
<p>Salut :)</p>
<blockquote>
<p>Je viens d‚Äô√™tre embauch√© en tant que Product Designer et il est pr√©vu que je fasse du front. Malheureusement, pour diverses raisons, je n‚Äôai plus pratiqu√© ce m√©tier depuis au moins 1 an. Je continue bien s√ªr de suivre ce qui se fait mais j‚Äôai comme la sensation de me sentir un peu largu√© alors que c‚Äô√©tait un sujet sur lequel je me sentais vraiment bien. On a un produit SaaS qui tourne sur Rails &amp; Angular, qui demande beaucoup de maintenabilit√© et une bonne optimisation. L√† o√π j‚Äôinterviens, c‚Äôest sur la d√©finition et la cr√©ation de la V2. Seulement avant de m‚Äôengager sur des sujets que je ne ma√Ætrise plus, je souhaiterais avoir un peu plus d‚Äôinformations.</p>
</blockquote>
<p>Yes, pas de probl√®me, dis-nous tout.</p>
<blockquote>
<p>Au niveau de mes besoins, il me faudrait, je pense, une solution fiable avec une premi√®re base de modules pr√©d√©finis (m√™me une version light) pour une question de rendement et d‚Äôoptimisation du dev. Mon premier avis serait d‚Äôutiliser un Bootstrap avec Sass gr√¢ce √† tout son syst√®me de modals / tableaux / tabs / grid / etc‚Ä¶ seulement j‚Äôai lu le contraire donc je me retrouve perdu.  Dans vos articles {P!}, vous d√Ætes qu‚Äôil vaut mieux √©viter des Frameworks du type Bootstrap, mais‚Ä¶ pourquoi ? </p>
</blockquote>
<p>Les frameworks comme Bootstrap ne sont pas forc√©ment une mauvaise chose, ils te permettent de mettre les bases d‚Äôun site, tr√®s pratique pour aller vite et surtout faire des administrations. En revanche ils proposent des structures avec des conventions CSS n‚Äôaidant pas forc√©ment √† finir avec un front-end maintenable. De plus, cela force √† <em>override</em> tout l‚Äôaspect visuel d√®s que ton design est personnalis√©. Finalement, tu passes plus de temps √† <em>overrider</em> un framework qui ne te convient pas tant que √ßa que de te cr√©er ton propre ui kit. (sans compter le risque de voir ton site p√©ter lors d‚Äôune mise √† jour d‚Äôun framework).</p>
<blockquote>
<p>Avec une charte un peu custom, n‚Äôest-il pas pr√©f√©rable de se baser sur des composants pr√©-existants pour faciliter la charge et le temps pass√© √† dev ? Il est peut-√™tre possible d‚Äôen r√©cup√©rer des similaires de fa√ßon individuelle autre part ?</p>
</blockquote>
<p>Si, effectivement, des solutions comme <a href="http://topcoat.io/">topcoat</a> sont moins <em>opinionated</em> par exemple et permettent vraiment de personnaliser tous les √©l√©ments propos√©s par d√©faut.
Il faut vraiment trouver un framework qui fait que le strict n√©cessaire sans design finalement.</p>
<blockquote>
<p>Et les pr√©processeurs (Sass surtout) c‚Äôest vraiment une bonne id√©e sur ce type de projet ou tu vois des contre-indications ?</p>
</blockquote>
<p>Les pr√©processeurs CSS sont g√©n√©ralement une bonne chose, ils apportent de nombreuses options int√©ressants telles que les variables, les fonctions, l√† o√π le w3c met un certain temps √† les sortir. Cependant, tous les pr√©processeurs ne se ressemblent pas. Certains ont leur propre √©criture comme Stylus ou Sass (Sass, pas scss). Certains sont aussi plus lents √† compiler que d‚Äôautres (coucou Sass). Nous pr√©conisons un pseudo ‚Äúpost-processor‚Äù qui s‚Äôappelle <a href="https://github.com/reworkcss/rework">Rework</a>. Avec rework, tu ajoutes juste les processing dont tu as besoin, et tout √ßa, g√©n√©ralement, sans casser le style d‚Äô√©criture d‚Äôun fichier css (article √† prevoir).</p>
<blockquote>
<p>Quant √† mon workflow, j‚Äôaimerais tout reprendre depuis le d√©but pour repartir sur des bases saines. Tu pourrais m‚Äôindiquer les indispensables sur Sublime Text (Config, Plugins) et autres outils ?</p>
</blockquote>
<p>Orf, ca d√©pend de chacun mais en g√©n√©ral, voici ce qu‚Äôon te pr√©conise :</p>
<ul>
<li>Editeur : <a href="http://www.sublimetext.com/">Sublime text</a> (avec BracketHighlighter, Color Highlighter, DocBlockr, EditorConfig, Emmet, Emmet CSS, HTML5, INI, JavaScript Console, JsFormat, Markdown Preview, MarkdownEditing, Modific, Placeholders, Theme - Flatland, Unicode Character Highlighter)
ou <a href="http://atom.io">Atom</a> (apm install, editorconfig, docblockr, htmlhint, csslint, linter, linter-jscs, linter-jshint, css-color-highlighting, atom-prettify, open-in-github-app, gist-it, autocomplete-plus).<br>Pour √™tre √† jour sur ces √©diteurs, n‚Äôh√©site pas √† Suivre <a href="https://twitter.com/SublimePackages">@SublimePackages</a> et <a href="https://twitter.com/Atom_Packages">@Atom_Packages</a> sur Twitter.</li>
<li>Terminal : <a href="http://www.iterm2.com/">iterm2</a> sur mac, ou terminal de base</li>
<li>Shell : zsh (<code>brew install zsh</code>), <a href="https://github.com/sorin-ionescu/prezto">prezto (plugin zsh)</a> </li>
<li><a href="http://nightly.mozilla.org/">Firefox Nightly</a> ou <a href="http://www.google.com/intl/fr/chrome/browser/canary.html">Chrome Canary</a></li>
</ul>
<blockquote>
<p>Je vois souvent passer du NPM / Grunt / Bower / Yo &amp; Co mais jamais vraiment eu le temps de m‚Äôy plonger dedans. Il est possible d‚Äôavoir un petit r√©sum√© et/ou un moyen d‚Äôapprendre le plus vite possible ?</p>
</blockquote>
<p>Tout d‚Äôabord lis ceci : <a href="http://www.24joursdeweb.fr/2013/automatisez-votre-workflow-front-end/">Automatisez votre workflow front-end</a>.</p>
<p>Pour le reste :</p>
<ul>
<li><p><a href="https://www.npmjs.org/">NPM</a> : permet de g√©rer les versions de ce que tu utilises √† la fois comme biblioth√®que front ou outils de dev. Il sert aussi d‚Äôinterface de ligne de commande permettant de <a href="/posts/frontend/npm-comme-package-manager-pour-le-front-end/">lancer des commandes d√©finies dans le package.json</a>.</p>
</li>
<li><p><a href="http://bower.io/">Bower</a> ne sert pas √† grand chose, c‚Äôest une abstraction par dessus NPM. Nous pensons qu‚Äôil tend √† mourir. [<a href="/posts/frontend/npm-comme-package-manager-pour-le-front-end/">1</a>] [<a href="/posts/nodejs/napa-ou-comment-telecharger-package-napa-package-json/">2</a>]</p>
</li>
<li><p><a href="http://gruntjs.com/">Grunt</a> est un <em>task-runner</em>, il te permet d‚Äôautomatiser les actions que tu r√©p√®tes souvent : concat√©ner des scripts, preprocessing HTML &amp; CSS, copie des assets‚Ä¶ Nous te conseillons d‚Äôutiliser gulp, beaucoup plus rapide et simple √† prendre en main. [<a href="/posts/js/introduction-gulp/">1</a>] [<a href="/posts/js/premiers-pas-avec-grunt/">2</a>]</p>
</li>
</ul>
<blockquote>
<p>Merci beaucoup !</p>
</blockquote>
<p>Tout le plaisir est pour nous. ;)</p>

]]></description><pubDate>Thu, 15 May 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/frontend/se-mettre-au-frontend-en-2014-par-ou-commencer/</link><guid isPermaLink="true">http://putaindecode.fr/posts/frontend/se-mettre-au-frontend-en-2014-par-ou-commencer/</guid></item><item><title>Cr√©ez vos iconfonts avec gulp-iconfont</title><description><![CDATA[
<p>Apr√®s <a href="/posts/js/introduction-gulp/">notre introduction sur gulp</a>, je vous propose de cr√©er vos propres fontes √† partir d‚Äôic√¥nes.</p>
<p>J‚Äôai bien gal√©r√© lorsque j‚Äôai d√ª passer de <strong>grunt</strong> √† <strong>gulp</strong>. Non pas que gulp soit compliqu√© mais retrouver exactement le m√™me <em>workflow</em> qu‚Äôavant, sachant que gulp est jeune et que les <em>plugins</em> sont bien moins nombreux que sur grunt, c‚Äôest pas si √©vident que √ßa.</p>
<p>M‚Äôenfin, il y a toujours une solution √† un probl√®me.</p>
<p>Justement, l√†, mon probl√®me √©tait de r√©pliquer mon <em>process</em> de <strong>svg-to-font</strong>.</p>
<p>Je me suis creus√© les m√©ninges et j‚Äôai finalement trouv√©. Cette solution, je vous la propose.</p>
<h2 id="gulp-iconfont"><a class="putainde-Title-anchor" href="#gulp-iconfont">#</a>gulp-iconfont</h2><p>Tout d‚Äôabord, installez <strong>gulp</strong> (√©vident‚Ä¶) et faites ce que vous avez √† faire avec gulp.</p>
<p>Maintenant, vous √™tes pr√™t(e) ? Okay, go.</p>
<h3 id="installez-les-em-packages-em-adequats"><a class="putainde-Title-anchor" href="#installez-les-em-packages-em-adequats">#</a>Installez les <em>packages</em> ad√©quats</h3><p>Oui, deux packages, <a href="https://github.com/nfroidure/gulp-iconfont">gulp-iconfont</a> et <a href="https://github.com/backflip/gulp-iconfont-css">gulp-iconfont-css</a>.</p>
<pre><code class="lang-shell">$ npm <span class="hljs-operator"><span class="hljs-keyword">install</span> gulp-iconfont gulp-iconfont-css <span class="hljs-comment">--save-dev</span></span>
</code></pre>
<h3 id="importez-les"><a class="putainde-Title-anchor" href="#importez-les">#</a>Importez-les</h3><pre><code class="lang-js"><span class="hljs-comment">// import</span>
<span class="hljs-keyword">var</span> gulp = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp'</span>)

<span class="hljs-keyword">var</span> iconfont = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-iconfont'</span>)
<span class="hljs-keyword">var</span> iconfontCss = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-iconfont-css'</span>)
</code></pre>
<h3 id="creez-votre-propre-t-che-gulp"><a class="putainde-Title-anchor" href="#creez-votre-propre-t-che-gulp">#</a>Cr√©ez votre propre t√¢che gulp</h3><p>Je pr√©conise d‚Äôappeler toute transformation d‚Äôune image vers une fonte ‚Äúglyphicon‚Äù.</p>
<pre><code class="lang-js"><span class="hljs-comment">// glyphicons</span>
gulp.task(<span class="hljs-string">'glyphicons'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
 <span class="hljs-keyword">return</span> gulp.src(<span class="hljs-string">'src/glyphicons/**/*'</span>) <span class="hljs-comment">// o√π sont vos svg</span>
    .pipe(iconfontCss({
      fontName: <span class="hljs-string">'icons'</span>, <span class="hljs-comment">// nom de la fonte, doit √™tre identique au nom du plugin iconfont</span>
      targetPath: <span class="hljs-string">'../../styles/shared/icons.css'</span>, <span class="hljs-comment">// emplacement de la css finale</span>
      fontPath: <span class="hljs-string">'../fonts/'</span> <span class="hljs-comment">// emplacement des fontes finales</span>
    }))
    .pipe(iconfont({
      fontName: <span class="hljs-string">'icons'</span> <span class="hljs-comment">// identique au nom de iconfontCss</span>
     }))
    .pipe( gulp.dest(<span class="hljs-string">'src/assets/fonts'</span>) )
})
</code></pre>
<h3 id="le-final"><a class="putainde-Title-anchor" href="#le-final">#</a>Le final</h3><p>Voil√† l‚Äô√©criture enti√®re de la t√¢che :</p>
<pre><code class="lang-js"><span class="hljs-comment">// import</span>
<span class="hljs-keyword">var</span> gulp = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp'</span>)

<span class="hljs-keyword">var</span> iconfont = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-iconfont'</span>)
<span class="hljs-keyword">var</span> iconfontCss = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-iconfont-css'</span>)

gulp.task(<span class="hljs-string">'glyphicons'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
 <span class="hljs-keyword">return</span> gulp.src(<span class="hljs-string">'src/glyphicons/**/*'</span>)
    .pipe(iconfontCss({
      fontName: <span class="hljs-string">'icons'</span>, <span class="hljs-comment">// nom de la fonte, doit √™tre identique au nom du plugin iconfont</span>
      targetPath: <span class="hljs-string">'../../styles/shared/icons.css'</span>, <span class="hljs-comment">// emplacement de la css finale</span>
      fontPath: <span class="hljs-string">'../fonts/'</span> <span class="hljs-comment">// emplacement des fontes finales</span>
    }))
    .pipe(iconfont({
      fontName: <span class="hljs-string">'icons'</span> <span class="hljs-comment">// identique au nom de iconfontCss</span>
     }))
    .pipe( gulp.dest(<span class="hljs-string">'src/assets/fonts'</span>) )
})
</code></pre>
<p>Et voil√†, on est bon. On peut transformer nos <em>svg</em> en <em>font</em>. \o/</p>

]]></description><pubDate>Wed, 14 May 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/frontend/creez-vos-iconfonts-avec-gulp-iconfont/</link><guid isPermaLink="true">http://putaindecode.fr/posts/frontend/creez-vos-iconfonts-avec-gulp-iconfont/</guid></item><item><title>Array.reduce par l'exemple</title><description><![CDATA[
<p>Souvent m√©connue, la fonction <code>Array#reduce</code> se r√©v√®le super pratique d√®s lors
 qu‚Äôon prenne un peu le temps de faire un peu plus connaissance.
 Ce n‚Äôest que derni√®rement que je me suis rendu compte que reduce pouvait servir
 √† bien plus de chose que ce qui √©tait pr√©sent√© dans les documentations.</p>
<p>Voici donc un petit tour d‚Äôhorizon des cas d‚Äôutilisation de cette fonction.
Mais avant cela, et histoire de faire les pr√©sentations, voici l‚Äôintro tir√©e de
la documentation de <a href="https://developer.mozilla.org/fr/docs/JavaScript/Reference/Objets_globaux/Array/reduce">MDN</a>.</p>
<blockquote>
<p><strong><em>R√©sum√©</em></strong>
La m√©thode reduce() applique une
fonction sur un accumulateur et chaque valeur d‚Äôune liste (de la gauche
vers la droite) de sorte √† le r√©duire √† une seule valeur.</p>
</blockquote>
<h2 id="le-classique-operer-une-somme-sur-un-tableau"><a class="putainde-Title-anchor" href="#le-classique-operer-une-somme-sur-un-tableau">#</a>Le classique: Op√©rer une somme sur un tableau</h2><p>C‚Äôest souvent l‚Äôexemple qui illustre le plus les documentations. <code>Array#reduce</code>
va permettre de parcourir le tableau, et pour chaque √©l√©ment, appeler une fonction
avec les param√®tres suivants :</p>
<ul>
<li>le r√©sultat de la pr√©c√©dente ex√©cution de cette fonction (aussi appel√© l‚Äôaccumulateur).</li>
<li>l‚Äô√©l√©ment courant.</li>
<li>l‚Äôindex de l‚Äô√©l√©ment courant.</li>
<li>le tableau sur lequel on est entrain d‚Äôit√©rer</li>
</ul>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> sum = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>].reduce( <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( memo, val)</span></span>{
  <span class="hljs-keyword">return</span> memo + val;
});
</code></pre>
<p>En fait, <code>Array#reduce</code> accepte un deuxi√®me argument apr√®s la fonction de callback.
 Cet argument sera utilis√© comme accumulateur lors de la premi√®re ex√©cution.
 Et c‚Äôest justement cela qui est int√©ressant et qui rend le reduce plut√¥t pratique.</p>
<h2 id="chercher-remplacer-avec-plusieurs-motifs"><a class="putainde-Title-anchor" href="#chercher-remplacer-avec-plusieurs-motifs">#</a>Chercher/remplacer avec plusieurs motifs</h2><p>Imaginons que vous souhaitiez appliquer plusieurs op√©rations de rechercher/remplacer
sur une chaine de caract√®re. Si vous avez une liste de motifs et leur valeur correspondante,
 reduce permet de faire cela assez simplement, genre en 3 lignes.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> input = <span class="hljs-string">"I'm %USER% and I live in %COUNTRY%"</span>
<span class="hljs-keyword">var</span> data = [{token:<span class="hljs-string">'%USER%'</span>, value:<span class="hljs-string">'lionel'</span>}, {token:<span class="hljs-string">'%COUNTRY%'</span>, value: <span class="hljs-string">'France'</span>}]

<span class="hljs-keyword">var</span> output = data.reduce( <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(memo, item)</span></span>{
  <span class="hljs-keyword">return</span> memo.replace(item.token, item.value);
}, input);
</code></pre>
<h2 id="realiser-un-groupby"><a class="putainde-Title-anchor" href="#realiser-un-groupby">#</a>R√©aliser un groupBy</h2><p>Reduce peut aussi nous permettre d‚Äôeffectuer des manipulations comme des groupBy
 sur un tableau (bon avec l‚Äôaide de petits helpers).</p>
<p>Prenons comme point de d√©part cette liste de stat repr√©sentant un d√©coupage par
site et par famille de navigateurs. Nous aimerions pouvoir grouper les r√©sultats par site :</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> stats = [
  {<span class="hljs-string">"site"</span>:<span class="hljs-string">"google.fr"</span>,<span class="hljs-string">"browser"</span>:<span class="hljs-string">"Chrome"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"50%"</span>},
  {<span class="hljs-string">"site"</span>:<span class="hljs-string">"google.fr"</span>,<span class="hljs-string">"browser"</span>:<span class="hljs-string">"FireFox"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"30%"</span>},
  {<span class="hljs-string">"site"</span>:<span class="hljs-string">"google.fr"</span>,<span class="hljs-string">"browser"</span>:<span class="hljs-string">"Internet Explorer"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"20%"</span>},
  {<span class="hljs-string">"site"</span>:<span class="hljs-string">"mozilla.fr"</span>,<span class="hljs-string">"browser"</span>:<span class="hljs-string">"FireFox"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"60%"</span>},
  {<span class="hljs-string">"site"</span>:<span class="hljs-string">"mozilla.fr"</span>,<span class="hljs-string">"browser"</span>:<span class="hljs-string">"Internet Explorer"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"20%"</span>},
  {<span class="hljs-string">"site"</span>:<span class="hljs-string">"microsoft.fr"</span>,<span class="hljs-string">"browser"</span>:<span class="hljs-string">"Chrome"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"10%"</span>},
  {<span class="hljs-string">"site"</span>:<span class="hljs-string">"microsoft.fr"</span>,<span class="hljs-string">"browser"</span>:<span class="hljs-string">"FireFox"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"20%"</span>},
];

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareSite</span><span class="hljs-params">(site, item)</span></span>{
  <span class="hljs-keyword">return</span> site === item.site
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">containSite</span><span class="hljs-params">(site, items)</span> </span>{
  <span class="hljs-keyword">return</span> items.some( compareSite.bind(<span class="hljs-literal">null</span>, site) )
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">groupBySite</span><span class="hljs-params">(memo, item)</span></span>{
  <span class="hljs-keyword">var</span> site = memo.filter( containSite.bind(<span class="hljs-literal">null</span>, item.site) );
  <span class="hljs-keyword">if</span> (site.length &gt; <span class="hljs-number">0</span>) {
    site[<span class="hljs-number">0</span>].push(item)
  } <span class="hljs-keyword">else</span> {
    memo.push([item])
  }
  <span class="hljs-keyword">return</span> memo
}
<span class="hljs-comment">// Nous utilisons un tableau vide comme accumulateur</span>
<span class="hljs-keyword">var</span> results = stats.reduce( groupBySite, [] );
</code></pre>
<p>Concernant cet exemple, on pouvait arriver au m√™me r√©sultat en d√©clarant une variable
 qui aurait le r√¥le d‚Äôaccumulateur et un Array.forEach :</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> results = {};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">groupBySite</span><span class="hljs-params">( item)</span></span>{
  <span class="hljs-keyword">var</span> site = results.filter( containSite.bind(<span class="hljs-keyword">null</span>, item.site) );
  <span class="hljs-keyword">if</span> (site.length &gt; <span class="hljs-number">0</span>) {
    site[<span class="hljs-number">0</span>].push(item)
  } <span class="hljs-keyword">else</span> {
    results.push([item])
  }
}

stats.<span class="hljs-keyword">forEach</span>( groupBySite );
</code></pre>
<p>Mais ici, la fonction <code>groupBySite</code> devient bien moins r√©-utilisable car elle
d√©pend directement de la variable results, d√©clar√©e au dessus.</p>
<h3 id="a-noter"><a class="putainde-Title-anchor" href="#a-noter">#</a>√Ä noter</h3><p>L‚Äôutilisation de  <code>Function.bind</code> nous permet de r√©utiliser les fonctions <code>compareSite</code>
et <code>containSite</code> en fixant leur premier param√®tre. Ainsi <code>compareSite.bind(null, &#39;mozilla.fr&#39;)</code> √©quivaut √† :</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareMozilla</span><span class="hljs-params">(item)</span></span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">"mozilla.fr"</span> === item.site;
}
</code></pre>
<p>D‚Äôailleurs, on pourrait assez simplement rendre <code>groupBySite</code> g√©n√©rique pour la r√©utiliser avec un <code>groupByBrowser</code>.</p>
<h2 id="manipuler-la-structure-des-donnees"><a class="putainde-Title-anchor" href="#manipuler-la-structure-des-donnees">#</a>Manipuler la structure des donn√©es</h2><p><code>Array#reduce</code> peut aussi permettre de manipuler la structure de vos donn√©es et pouvoir la modifier.
Par exemple, voici une liste de sites avec, pour chaque site, le pourcentage de visite par navigateur.
Imaginons que nous souhaitons changer la structure de l‚Äôobjet pour grouper ces
r√©sultats par type de navigateur plut√¥t que par site. L√† encore <code>Array#reduce</code> s‚Äôav√®re plut√¥t pratique.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> data = {
      <span class="hljs-string">"google.fr"</span> : [
       {name: <span class="hljs-string">"Chrome"</span>, <span class="hljs-keyword">value</span>: <span class="hljs-string">"50%"</span>},
        {name: <span class="hljs-string">"FireFox"</span>, <span class="hljs-keyword">value</span>: <span class="hljs-string">"30%"</span>},
        {name: <span class="hljs-string">"Internet Explorer"</span>, <span class="hljs-keyword">value</span>: <span class="hljs-string">"20%"</span> }
      ],
      <span class="hljs-string">"mozilla.fr"</span> : [
        {name: <span class="hljs-string">"Chrome"</span>, <span class="hljs-keyword">value</span>: <span class="hljs-string">"20%"</span>},
        {name: <span class="hljs-string">"FireFox"</span>, <span class="hljs-keyword">value</span>: <span class="hljs-string">"60%"</span>},
        {name: <span class="hljs-string">"Internet Explorer"</span>, <span class="hljs-keyword">value</span>: <span class="hljs-string">"20%"</span>}
      ] ,
      <span class="hljs-string">"microsoft.fr"</span> : [
        {name: <span class="hljs-string">"Chrome"</span>, <span class="hljs-keyword">value</span>: <span class="hljs-string">"10%"</span>},
        {name: <span class="hljs-string">"FireFox"</span>, <span class="hljs-keyword">value</span>: <span class="hljs-string">"20%"</span>},
        {name: <span class="hljs-string">"Internet Explorer"</span>, <span class="hljs-keyword">value</span>: <span class="hljs-string">"70%"</span>}
      ]
    };

function groupByBrowser( site, memo, browser){
  <span class="hljs-keyword">if</span> (!memo[browser.name]){
    memo[browser.name] = [];
  }
  memo[browser.name].push({site:site, <span class="hljs-keyword">value</span>: browser.<span class="hljs-keyword">value</span>});
  <span class="hljs-keyword">return</span> memo
}

<span class="hljs-keyword">var</span> results = Object.keys(data).reduce( function (memo, site) {
  <span class="hljs-keyword">return</span> data[site].reduce(groupByBrowser.bind(<span class="hljs-keyword">null</span>, site), memo)
}, {});
</code></pre>
<p>J‚Äôesp√®re que vous avez appr√©ci√© ces quelques exemples d‚Äôutilisation de <code>Array#reduce</code>.
Et n‚Äôh√©sitez pas √† partager vos cas d‚Äôutilisations en √©ditant l‚Äôarticle ou via les commentaires !</p>

]]></description><pubDate>Tue, 13 May 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/js/array-reduce/</link><guid isPermaLink="true">http://putaindecode.fr/posts/js/array-reduce/</guid></item><item><title>napa ou comment t√©l√©charger un package qui napa de package.json</title><description><![CDATA[
<p>(Grosse grosse blague ce titre‚Ä¶)</p>
<p><a href="https://twitter.com/kewah">@kewah</a> nous a r√©cemment parl√© de <a href="/posts/frontend/npm-comme-package-manager-pour-le-front-end/"><strong>npm</strong> comme front-end packager manager</a>, je vais aller encore plus loin. Je vais vous d√©voiler comment installer des projets qui n‚Äôont pas de <code>package.json</code>. Oui, car c‚Äôest bien beau de virer Bower (oh que oui c‚Äôest beau) mais comme npm requiert constamment un <code>package.json</code>, on ne va pas pouvoir t√©l√©charger grand chose sauf si on fait des <em>PR</em> afin d‚Äôajouter ce fichier sur les projets que l‚Äôon souhaite obtenir.</p>
<p>C‚Äôest pourquoi je vais vous parler de <a href="https://github.com/shama/napa"><strong>napa</strong></a>.</p>
<p>napa est un <em>helper for installing stuff without a package.json with npm</em>. Pardon, napa est un aideur pour installer des trucs sans un package.json avec npm. BON. napa vous aide √† travers npm √† installer des modules qui n‚Äôont pas de package.json. C‚Äôest plus clair l√† ?</p>
<p>napa est ce qui manque √† npm o√π bower avait justement son utilit√© : t√©l√©charger n‚Äôimporte quel <em>package</em> <em>front</em> n‚Äôimporte o√π. Mais plut√¥t que d‚Äôinstaller un autre <em>packager</em>, napa s‚Äôins√®re directement dans npm afin de ne pas perturber le <em>workflow</em>, et √ßa, j‚Äôappr√©cie grandement.</p>
<p>Simple, tout simple. Dans un premier temps, t√©l√©chargez-le :</p>
<pre><code>$ npm <span class="hljs-operator"><span class="hljs-keyword">install</span> napa <span class="hljs-comment">--save-dev</span></span>
</code></pre><p>Cela ajoutera napa au <code>package.json</code>.</p>
<p>Puis dans <code>package.json</code>, ajoutez :</p>
<pre><code>{
  "<span class="hljs-attribute">scripts</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">install</span>": <span class="hljs-value"><span class="hljs-string">"napa"</span>
  </span>}
</span>}
</code></pre><p>Cela permettra de lancer napa √† chaque fois que vous faites <code>npm install</code>.</p>
<p>Afin d‚Äôajouter les projets qui seront t√©l√©charg√©s par napa et donc par npm, il suffit d‚Äôajouter un objet <code>napa</code> toujours dans <code>package.json</code> :</p>
<pre><code>{
  "<span class="hljs-attribute">napa</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">foo</span>": <span class="hljs-value"><span class="hljs-string">"username/repo"</span></span>,
    "<span class="hljs-attribute">bar</span>": <span class="hljs-value"><span class="hljs-string">"git@example.com:user/repo"</span>
  </span>}
</span>}
</code></pre><p>ce qui donne au final :</p>
<pre><code>{
  "<span class="hljs-attribute">scripts</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">install</span>": <span class="hljs-value"><span class="hljs-string">"napa"</span>
  </span>}</span>,
  "<span class="hljs-attribute">napa</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">foo</span>": <span class="hljs-value"><span class="hljs-string">"username/repo"</span></span>,
    "<span class="hljs-attribute">bar</span>": <span class="hljs-value"><span class="hljs-string">"git@example.com:user/repo"</span>
  </span>}
</span>}
</code></pre><p>Je vous ai volontairement donn√© la version structur√©e (et/ou explicite) parce que d‚Äôune, c‚Äôest celle que j‚Äôutilise :D et de deux, c‚Äôest celle que je trouve la plus claire, mais il y a d‚Äô<a href="https://github.com/shama/napa#want-to-name-the-package-something-else">autres fa√ßons</a> de l‚Äô√©crire.</p>
<p>On se retrouve alors dans la vraie vie √† avoir un <code>package.json</code> comme ceci :</p>
<pre><code>{
  "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"my-project"</span></span>,
  "<span class="hljs-attribute">version</span>": <span class="hljs-value"><span class="hljs-string">"1.0.0"</span></span>,
  "<span class="hljs-attribute">description</span>": <span class="hljs-value"><span class="hljs-string">"Brilliant project"</span></span>,
  "<span class="hljs-attribute">scripts</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">install</span>": <span class="hljs-value"><span class="hljs-string">"napa"</span>
  </span>}</span>,
  "<span class="hljs-attribute">devDependencies</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">animate.css</span>": <span class="hljs-value"><span class="hljs-string">"git://github.com/daneden/animate.css#3.1.1"</span></span>,
    "<span class="hljs-attribute">backbone</span>": <span class="hljs-value"><span class="hljs-string">"^1.1.2"</span></span>,
    "<span class="hljs-attribute">jquery</span>": <span class="hljs-value"><span class="hljs-string">"^1.9.0"</span></span>,
    "<span class="hljs-attribute">jquery-migrate</span>": <span class="hljs-value"><span class="hljs-string">"git://github.com/jquery/jquery-migrate#1.2.1"</span></span>,
    "<span class="hljs-attribute">lodash</span>": <span class="hljs-value"><span class="hljs-string">"^2.4.1"</span></span>,
    "<span class="hljs-attribute">moment</span>": <span class="hljs-value"><span class="hljs-string">"^2.6.0"</span></span>,
    "<span class="hljs-attribute">napa</span>": <span class="hljs-value"><span class="hljs-string">"^0.4.1"</span></span>,
    "<span class="hljs-attribute">putainde-cookie</span>": <span class="hljs-value"><span class="hljs-string">"^0.2.0"</span>
  </span>}</span>,
  "<span class="hljs-attribute">napa</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">swfobject</span>": <span class="hljs-value"><span class="hljs-string">"swfobject/swfobject#a22b7db077abc126d6aa5f2d0f44b11e4ed97940"</span></span>,
    "<span class="hljs-attribute">modernizr</span>": <span class="hljs-value"><span class="hljs-string">"Modernizr/Modernizr#v2.8.1"</span>
  </span>}</span>,
  "<span class="hljs-attribute">repository</span>": <span class="hljs-value"><span class="hljs-string">"git://github.com/my/project.git"</span></span>,
  "<span class="hljs-attribute">author</span>": <span class="hljs-value"><span class="hljs-string">"Myself"</span></span>,
  "<span class="hljs-attribute">license</span>": <span class="hljs-value"><span class="hljs-string">"BSD"</span></span>,
  "<span class="hljs-attribute">readmeFilename</span>": <span class="hljs-value"><span class="hljs-string">"readme.md"</span>
</span>}
</code></pre><p>Top non ?</p>
<p>Note : napa et npm-shrinkwrap, c‚Äôest pas encore √ßa, alors n‚Äôh√©sitez pas √† supprimer la partie ‚Äúnapa‚Äù avant de lancer votre g√©n√©ration de npm-shrinkwrap.</p>
<p>Bon download √† vous.</p>

]]></description><pubDate>Mon, 12 May 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/nodejs/napa-ou-comment-telecharger-package-napa-package-json/</link><guid isPermaLink="true">http://putaindecode.fr/posts/nodejs/napa-ou-comment-telecharger-package-napa-package-json/</guid></item><item><title>npm: choisir la bonne version de ses d√©pendances</title><description><![CDATA[
<p>Pas plus tard qu‚Äôhier, alors que je travaillais tranquillement, apparu soudainement un bug dans mon <em>workflow</em> de <em>build</em>. Il ne m‚Äô√©tait plus possible avec <a href="https://github.com/gruntjs/grunt-contrib-clean">grunt-contrib-clean</a> de supprimer des fichiers. Hmmm, ballot, car sans la suppression, mon <em>workflow</em> devenait tout bancal. Bien. Il me fallut remonter la rivi√®re - comme souvent, en tant que d√©veloppeur - afin de constater o√π √©tait le bug. Je suis alors tomb√© sur <a href="https://github.com/isaacs/rimraf">rimraf</a> (bon c‚Äô√©tait pas bien loin) qui s‚Äô√©tait vu √™tre mis √† jour il y a √† peine 12 heures, comprenant un bug.</p>
<h2 id="contexte"><a class="putainde-Title-anchor" href="#contexte">#</a>Contexte</h2><p>Bon, vous voyez le topo ?</p>
<pre><code>{
  "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"grunt-contrib-clean"</span></span>,
  "<span class="hljs-attribute">dependencies</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">rimraf</span>": <span class="hljs-value"><span class="hljs-string">"~2.2.1"</span>
  </span>}
</span>}
</code></pre><p><a href="https://github.com/gruntjs/grunt-contrib-clean">grunt-contrib-clean</a> qui contient en <em>dependencies</em> <a href="https://github.com/isaacs/rimraf">rimraf</a> avec une version buggu√©e. Oh la belle affaire. Oui car <code>~2.2.1</code> veut dire ‚Äú<a href="https://github.com/isaacs/node-semver#ranges">Raisonnablement proche de 2.2.1</a>‚Äú, ce qui se traduit par t√©l√©charger la derni√®re version en <code>2.2.x</code>, soit la <code>2.2.7</code> (celle buggu√©e) lorsque je mis √† jour le package <a href="https://github.com/gruntjs/grunt-contrib-clean">grunt-contrib-clean</a>.</p>
<h2 id="le-hic"><a class="putainde-Title-anchor" href="#le-hic">#</a>Le hic</h2><p>Une question m‚Äôest venue : comment faire en sorte de figer la version de <a href="https://github.com/isaacs/rimraf">rimraf</a> qui est une d√©pendance de d√©pendance ?</p>
<p>Ha ! Pas √©vident comme √ßa.</p>
<p>J‚Äôai d‚Äôabord essay√© sans trop d‚Äôespoir de t√©l√©charger <a href="https://github.com/isaacs/rimraf">rimraf</a> lui-m√™me en <code>2.2.6</code> mais vu que chaque d√©pendance √† ses propres d√©pendances et qu‚Äôelles ne se les partagent pas‚Ä¶ c‚Äô√©tait peine perdue.</p>
<p>J‚Äôai donc cherch√©, cherch√©, et je suis tomb√© sur <a href="https://www.npmjs.org/doc/cli/npm-shrinkwrap.html">npm-shrinkwrap</a>: ‚ÄúLock down dependency versions‚Äù. Bingo !</p>
<h2 id="npm-shrinkwrap-la-solution-pour-figer-vos-dependances-toutes-vos-dependances"><a class="putainde-Title-anchor" href="#npm-shrinkwrap-la-solution-pour-figer-vos-dependances-toutes-vos-dependances">#</a>npm-shrinkwrap, la solution pour figer vos dep√©ndances, toutes vos d√©pendances</h2><p><a href="https://www.npmjs.org/doc/cli/npm-shrinkwrap.html">npm-shrinkwrap</a> va vous permettre de d√©finir avec pr√©cision chaque version de chaque d√©pendance.</p>
<p>Pour cela, faites d‚Äôabord un <code>npm install</code> (si vous avez √©videmment un <code>package.json</code>) afin d‚Äôinstaller vos <code>node_modules</code>. Une fois cela fait, lancez <code>npm shrinkwrap</code> qui cr√©era le fichier <code>npm-shrinkwrap.json</code> qui comprendra toutes les d√©finitions de chaque d√©pendance.</p>
<h3 id="figer-une-dependance-de-dependance"><a class="putainde-Title-anchor" href="#figer-une-dependance-de-dependance">#</a>Figer une d√©pendance de d√©pendance</h3><p>Simple, regardez :</p>
<pre><code>{
  "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"my-project"</span></span>,
  "<span class="hljs-attribute">version</span>": <span class="hljs-value"><span class="hljs-string">"1.0.0"</span></span>,
  "<span class="hljs-attribute">dependencies</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">grunt-contrib-clean</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">version</span>": <span class="hljs-value"><span class="hljs-string">"0.5.0"</span></span>,
      "<span class="hljs-attribute">from</span>": <span class="hljs-value"><span class="hljs-string">"grunt-contrib-clean@~0.5.*"</span></span>,
      "<span class="hljs-attribute">dependencies</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">rimraf</span>": <span class="hljs-value">{
          "<span class="hljs-attribute">version</span>": <span class="hljs-value"><span class="hljs-string">"2.2.6"</span></span>,
          "<span class="hljs-attribute">from</span>": <span class="hljs-value"><span class="hljs-string">"rimraf@~2.2.1"</span></span>,
          "<span class="hljs-attribute">resolved</span>": <span class="hljs-value"><span class="hljs-string">"https://registry.npmjs.org/rimraf/-/rimraf-2.2.6.tgz"</span>
        </span>}
      </span>}
    </span>}
  </span>}
</span>}
</code></pre><p>J‚Äôai d√©fini la version de <a href="https://github.com/isaacs/rimraf">rimraf</a> dans <code>dependencies.grunt-contrib-clean.dependencies.rimraf</code>.</p>
<p>Bon, je ne connais pas tout par coeur non plus, npm-shrinkwrap vous √©crira la totalit√© du fichier avec toutes les d√©finitions mais j‚Äôai volontairement tout supprim√© et gard√© uniquement la partie <a href="https://github.com/gruntjs/grunt-contrib-clean">grunt-contrib-clean</a> car seule cette partie est √† figer. Quand je dis supprimer, je parle r√©ellement dans le fichier final, pas juste ici dans l‚Äôarticle.</p>
<p>Vous aurez toute l‚Äôexplication de npm-shrinkwrap sur la <a href="https://www.npmjs.org/doc/cli/npm-shrinkwrap.html">documentation officielle [en]</a>.</p>
<h2 id="choisir-la-bonne-strategie-de-version"><a class="putainde-Title-anchor" href="#choisir-la-bonne-strategie-de-version">#</a>Choisir la bonne strat√©gie de version</h2><p>Parce qu‚Äôil est important de savoir quelle version exacte nous souhaitons installer dans notre projet, il faut d√©finir avec pr√©cisions ces versions dans <code>package.json</code>.</p>
<p>Vous pouvez avoir <code>1.2.1</code> ou encore <code>~1.4.6</code> ou bien encore <code>^2.3.1</code>. Mais que veulent dire <code>^</code> ou <code>~</code> ?</p>
<ul>
<li><code>1.2.1</code> : cette version exacte</li>
<li><code>~1.4.6</code> : raisonnablement proche de <code>1.4.6</code></li>
<li><code>^2.3.1</code> : compatible avec <code>2.3.1</code></li>
</ul>
<p>Il est clair que lu comme √ßa, le plus int√©ressant est le <code>^</code> et c‚Äôest justement <a href="http://fredkschott.com/post/2014/02/npm-no-longer-defaults-to-tildes/">celui qui est choisi maintenant [en]</a> lorsque l‚Äôon fait un <code>npm install --save</code>. Cool non ?!</p>
<p>Pour plus d‚Äôinformation sur la d√©finition des versions, <a href="https://github.com/isaacs/node-semver#ranges">c‚Äôest par l√†</a> (Oh mon dieu, il a fait un lien avec un ‚Äúcliquez ici‚Äù).</p>
<p>Bon. C‚Äôest bon ? Vous avez tout compris ? Okay, vous pouvez passer √† <a href="/posts/nodejs/napa-ou-comment-telecharger-package-napa-package-json/"><strong>napa</strong></a> maintenant qui vous aidera grandement sur le t√©l√©chargement de projets n‚Äôayant pas de <code>package.json</code>.</p>
<p>En ce qui concerne npm, je m‚Äôarr√™te l√†, et vous propose une petite solution afin d‚Äôaugmenter la vitesse de vos installations de node modules.</p>
<h2 id="bonus"><a class="putainde-Title-anchor" href="#bonus">#</a>Bonus</h2><p>Envie d‚Äôacc√©l√©rer vos installations npm ? Je vous conseille <a href="https://github.com/vvo/npm-pkgr">npm-pkgr</a>.</p>
<p>Il hashera votre <code>package.json</code> pour savoir s‚Äôil a √©t√© modifi√© ou non, et en fonction de √ßa, il lancera <code>npm install</code> ou non. Sacr√© gain de temps (surtout si vous faites des <code>npm install</code> √† chaque <em>deploy</em>).</p>
<p>You are now a npm master. üë®</p>

]]></description><pubDate>Mon, 12 May 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/nodejs/npm-choisir-version/</link><guid isPermaLink="true">http://putaindecode.fr/posts/nodejs/npm-choisir-version/</guid></item><item><title>Premiers pas avec Ruby</title><description><![CDATA[
<h2 id="tl-dr"><a class="putainde-Title-anchor" href="#tl-dr">#</a>tl;dr</h2><pre><code class="lang-sh"><span class="hljs-char">$ </span>git clone <span class="hljs-method">git:</span>//github.com/sstephenson/rbenv.git ~/.rbenv
<span class="hljs-char">$ </span>echo <span class="hljs-string">'export PATH="$HOME/.rbenv/bin:$PATH"'</span> &gt;&gt; ~/.bashrc
<span class="hljs-char">$ </span>echo <span class="hljs-string">'eval "$(rbenv init -)"'</span> &gt;&gt; ~/.bashrc
<span class="hljs-char">$ </span>source ~/.bashrc
<span class="hljs-char">$ </span>git clone git@github.<span class="hljs-method">com:</span>sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build
<span class="hljs-char">$ </span>rbenv install <span class="hljs-number">2.1</span><span class="hljs-number">.1</span>
<span class="hljs-char">$ </span>rbenv global <span class="hljs-number">2.1</span><span class="hljs-number">.1</span>
<span class="hljs-char">$ </span>gem install sinatra
<span class="hljs-char">$ </span>rbenv rehash
</code></pre>
<p>Tous les ans, depuis des ann√©es, sort un article : <em>‚Äú<a href="http://www.reddit.com/comments/1oi8wd">Est-ce que Ruby est mort ?</a>‚Äú</em>. Et chaque ann√©e les r√©sultats sont les m√™mes, <em>‚ÄúRuby perd en intensit√©‚Äù</em>, <em>‚ÄúNode.js prend le dessus‚Äù</em>. Et pourtant Ruby reste chaque ann√©e dans l‚Äôactualit√© avec autant d‚Äôimportance. Il faut √™tre honn√™te et admettre que <a href="http://blog.federicocarrone.com/2014/01/18/ruby-dying-or-ruby-hype-dead">Ruby souffre de certaines difficult√©s</a> comme tous les langages, mais <a href="http://jmoses.co/2013/12/21/is-ruby-dying.html">Ruby n‚Äôest pas mort</a> et il y a encore beaucoup √† en tirer, du langage, de ses frameworks et de sa communaut√©. Sans oublier que de grands sites l‚Äôont utilis√© et l‚Äôutilisent toujours comme Twitter, Github, Shopify, ou encore Hulu.</p>
<p>Nous commen√ßons donc une s√©rie d‚Äôarticles sur Ruby afin de le d√©couvrir et commencer √† d√©velopper et √† devenir productif avec. Et pour ce premier article, nous allons voir comment l‚Äôinstaller. Dans les suivants nous installerons notre premi√®re gem, nous utiliserons Sinatra pour notre premier projet, puis nous n‚Äôarriverons plus √† nous arr√™ter.</p>
<h2 id="un-langage-des-implementations"><a class="putainde-Title-anchor" href="#un-langage-des-implementations">#</a>Un langage, des impl√©mentations</h2><p>Tout d‚Äôabord il faut savoir qu‚Äôil existe plusieurs impl√©mentations de Ruby, c‚Äôest √† dire diff√©rents interpr√©teurs du langage. L‚Äôimpl√©mentation principale et originale est <em>MRI</em>, pour Matz‚Äôs Ruby Interpreter, Yukihiro ‚ÄúMatz‚Äù Matsumoto √©tant le cr√©ateur de Ruby. On trouve √©galement JRuby, un interpretteur Ruby en Java, permattant de b√©n√©ficier de toutes les fonctionnalit√©s de la JVM. Parmis les plus connues √©galement MacRuby qui est une impl√©mentation sp√©cifique √† OS X et dont <a href="http://www.rubymotion.com">RubyMotion</a> d√©pend. Pour nos articles nous devrions utiliser MRI √† moins qu‚Äôune envie sur une diff√©rente impl√©mentation se fasse ressentir.</p>
<blockquote>
<p>C‚Äôest bien tout √ßa mais au final j‚Äôen sais pas plus sur Ruby.</p>
</blockquote>
<p>Et √ßa va en rester ainsi pour le moment, car au lieu de voir la th√©orie sur √î combien <a href="http://www.slideshare.net/astrails/ruby-is-awesome-16466895">Ruby est g√©nial</a>, nous allons tout de suite installer Ruby pour nous rapprocher rapidement de notre √©diteur de texte.</p>
<h2 id="installation-avec-em-rbenv-em-"><a class="putainde-Title-anchor" href="#installation-avec-em-rbenv-em-">#</a>Installation avec <em>rbenv</em></h2><p>Il existe de nombreuses fa√ßons d‚Äôinstaller Ruby, un petit peu comme Node.js en passant par Github, par les packages officiels, brew, etc. <em>rbenv</em> reste d‚Äôapr√®s moi la fa√ßon la plus simple, propre et l√©g√®re. Beaucoup pourront pr√©f√©rer <em>RVM</em> disant qu‚Äôil fait la m√™me chose en mieux, d‚Äôautres diront qu‚Äôau contraire il en fait trop en √©crasant par exemple la m√©thode <code>cd</code>. J‚Äôai utilis√© les deux, il fallait faire un choix, ce sera <em>rbenv</em>.</p>
<p>Pour utiliser <em>rbenv</em>, il faut avoir Git. Si vous ne l‚Äôavez pas, vous devriez. Et √ßa tombe bien, <a href="https://github.com/madx">madx</a> et <a href="https://github.com/Erwyn">Erwyn</a> ont fait deux super articles pour l‚Äô<a href="/posts/git/versionner-avec-git/">utiliser</a> et le <a href="/posts/git/boutez-les-bugs-domptez-votre-historique/">dompter</a>. On commence donc par installer <em>rbenv</em> :</p>
<pre><code class="lang-sh">$ git clone gi<span class="hljs-variable">t:</span>//github.<span class="hljs-keyword">com</span>/sstephenson/rbenv.git ~/.rbenv
$ <span class="hljs-keyword">echo</span> <span class="hljs-string">'export PATH="$HOME/.rbenv/bin:$PATH"'</span> &gt;&gt; ~/.bashrc
$ <span class="hljs-keyword">echo</span> <span class="hljs-string">'eval "$(rbenv init -)"'</span> &gt;&gt; ~/.bashrc
$ <span class="hljs-keyword">source</span> ~/.bashrc
</code></pre>
<p>D√©sormais <em>rbenv</em> est install√© et ses commandes sont disponibles dans votre terminal. Il faut maintenant lui installer le plugin pour r√©cup√©rer les diff√©rentes versions de Ruby :</p>
<pre><code class="lang-sh"><span class="hljs-variable">$ </span>git clone git<span class="hljs-variable">@github</span>.<span class="hljs-symbol">com:</span>sstephenson/ruby-build.git ~<span class="hljs-regexp">/.rbenv/plugins</span><span class="hljs-regexp">/ruby-build</span>
</code></pre>
<p>C‚Äôest bon, vous pouvez installer Ruby. J‚Äôai constat√© sur Ubuntu qu‚Äôil √©tait n√©cessaire d‚Äôinstaller au pr√©alable <code>libssl-dev</code> et <code>g++</code>, simplement avec <code>sudo apt-get install libssl-dev g++</code>. Lan√ßons-nous :</p>
<pre><code class="lang-sh">rbenv <span class="hljs-operator"><span class="hljs-keyword">install</span> <span class="hljs-number">2.1</span><span class="hljs-number">.1</span>
rbenv <span class="hljs-keyword">global</span> <span class="hljs-number">2.1</span><span class="hljs-number">.1</span></span>
</code></pre>
<p>S√©quence √©motion. Vous √™tes d√©sormais ma√Ætre de l‚ÄôUnivers.</p>
<p>Vous avez Ruby 2.1.1 d‚Äôinstall√©. La ligne <code>rbenv global</code> permet comme son nom l‚Äôindique d‚Äôutiliser cette version de Ruby de fa√ßon globale √† l‚Äôutilisateur, si jamais plusieurs versions coexistent.</p>
<p>C‚Äô√©tait facile n‚Äôest-ce pas ? Et bien c‚Äôest encore plus facile d‚Äôutiliser une biblioth√®que (appel√©e ‚Äúgem‚Äù) ou un framework Ruby. Comme nous allons utiliser Sinatra dans notre prochain article, autant l‚Äôinstaller tout de suite. Pour installer une gem qui sera ex√©cut√©e dans la console comme Sass il est n√©cessaire de l‚Äôinstaller de cette fa√ßon : <code>gem install sass</code>. Seulement pour Sinatra, nous avons seulement besoin que le framework soit disponible dans nos scripts Ruby. Pour cela nous allons utiliser un gestionnaire de d√©pendance des gem Ruby, et nous verrons cela dans le prochain article pour nos premiers pas avec Sinatra.</p>
<p>D‚Äôici l√† vous pouvez commencer √† jouer avec Ruby en tapant la commande <code>irb</code> dans votre terminal, qui lance l‚Äôinterpretteur Ruby. Pourquoi pas essayer un <em>Hello World!</em> √† la Ruby ?</p>
<pre><code class="lang-ruby">puts <span class="hljs-string">'Hello World!'</span>
puts (<span class="hljs-number">1</span>..<span class="hljs-number">3</span>).to_a.<span class="hljs-built_in">reverse</span>.<span class="hljs-built_in">join</span>(<span class="hljs-string">' ... '</span>) &lt;&lt; <span class="hljs-string">' ... The World is ours!!!'</span>
</code></pre>
<p>Enjoy!</p>

]]></description><pubDate>Wed, 07 May 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/backend/premiers-pas-avec-ruby/</link><guid isPermaLink="true">http://putaindecode.fr/posts/backend/premiers-pas-avec-ruby/</guid></item><item><title>NPM comme package manager pour le front-end</title><description><![CDATA[
<p>NPM, le package manager de Node.js, a grandement particip√© au succ√®s de ce dernier.
Il facilite la cr√©ation, le partage et l‚Äôinstallation de modules.
Il permet aux d√©veloppeurs de suivre la <a href="http://www.faqs.org/docs/artu/ch01s06.html">philosophie Unix</a>
o√π chaque module fait une seule t√¢che (√©vite la complexit√©, facilite la r√©utilisation et les tests).</p>
<p>Cependant NPM ne se limite pas aux modules JavaScript. Il est en effet possible
de publier tout type de fichier et c‚Äôest l√† que √ßa devient int√©ressant pour nos
modules front-end, qui peuvent aussi √™tre CSS, HTML, fonts, etc.</p>
<h2 id="module-javascript"><a class="putainde-Title-anchor" href="#module-javascript">#</a>Module JavaScript</h2><p>Si vous n‚Äô√™tes pas familier(e) avec la cr√©ation d‚Äôun module JavaScript, je vous
conseille d‚Äôex√©cuter la commande <code>npm init</code> qui va vous aider √† g√©n√©rer votre
<code>package.json</code> (fichier de configuration utilis√© par NPM). Le champ
‚Äú<a href="https://www.npmjs.org/doc/json.html#main">main</a>‚Äú d√©finit le point d‚Äôentr√©e de
votre module.</p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"putaindemodule"</span></span>,
  "<span class="hljs-attribute">version</span>": <span class="hljs-value"><span class="hljs-string">"0.0.1"</span></span>,
  "<span class="hljs-attribute">main</span>": <span class="hljs-value"><span class="hljs-string">"index.js"</span>
</span>}
</code></pre>
<p>Dans un article pr√©c√©dent, il vous a √©t√© pr√©sent√© le d√©veloppement d‚Äôune application
autour de <a href="/posts/js/browserify-all-the-things/">modules JavaScript avec Browserify</a>.</p>
<h2 id="module-pour-tout-type-de-fichier"><a class="putainde-Title-anchor" href="#module-pour-tout-type-de-fichier">#</a>Module pour tout type de fichier</h2><p>C‚Äôest gr√¢ce au champ ‚Äú<a href="https://www.npmjs.org/doc/json.html#files">files</a>‚Äú que
l‚Äôon peut d√©finir la liste des fichiers que l‚Äôon va publier (autre que les fichiers JavaScript).
Voici un exemple de <code>package.json</code> d‚Äôun module pour un syst√®me de grille CSS.</p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"putaindegrid"</span></span>,
  "<span class="hljs-attribute">version</span>": <span class="hljs-value"><span class="hljs-string">"0.0.1"</span></span>,
  "<span class="hljs-attribute">files</span>": <span class="hljs-value">[
    <span class="hljs-string">"grid.css"</span>
  ]
</span>}
</code></pre>
<p>Il ne reste de plus qu‚Äô√† le <a href="https://gist.github.com/coolaj86/1318304">publier</a>
et √† l‚Äôinstaller (<code>npm install putaindegrid --save</code>) dans vos diff√©rents projets
o√π vous en aurez besoin. Votre fichier <code>grid.css</code> est accessible dans le dossier
<code>node_modules/putaindegrid/grid.css</code>, vous pouvez donc l‚Äôinclure dans votre page
HTML. (Ou l‚Äô<code>@import</code>er dans votre fichier Sass/Less principal.)</p>
<pre><code class="lang-html">&lt;link <span class="hljs-variable">href=</span><span class="hljs-string">"node_modules/putaindegrid/grid.css"</span> <span class="hljs-variable">rel=</span><span class="hljs-string">"stylesheet"</span> <span class="hljs-variable">type=</span><span class="hljs-string">"text/css"</span>&gt;
</code></pre>
<h2 id="pourquoi-npm-plutot-qu-un-autre-package-manager-"><a class="putainde-Title-anchor" href="#pourquoi-npm-plutot-qu-un-autre-package-manager-">#</a>Pourquoi NPM plut√¥t qu‚Äôun autre package manager ?</h2><ul>
<li>Il a d√©j√† fait ses preuves comme package manager pour Node.js.</li>
<li>Pas besoin d‚Äôinstaller un nouvel outil, NPM √©tant install√© avec Node.js, ce qui
√©vite un lot de bugs et de fichiers de configuration suppl√©mentaires (un simple <code>package.json</code> suffit).</li>
<li>Et surtout, toutes les d√©pendances de votre projet peuvent √™tre g√©r√©es via NPM:
votre tasks runner et ses plugins (<a href="/posts/js/introduction-gulp/">Gulp</a>, <a href="/posts/js/premiers-pas-avec-grunt/">Grunt</a> &amp; co), vos <a href="/posts/js/browserify-all-the-things/">modules JavaScript</a>, vos <a href="/posts/js/introduction-au-testing-js-front/">tests</a>
et comme on vient de le voir, vos fichiers de style.</li>
</ul>
<p>Dans le cas o√π vous n‚Äôauriez pas envie de passer par l‚Äô√©tape de publication
(<code>npm publish</code>) pour diverses raisons, sachez qu‚Äôil est possible
d‚Äô<a href="https://www.npmjs.org/doc/cli/npm-install.html">installer</a> des packages qui ne
sont pas publi√©s. Mon alternative favorite √©tant l‚Äôutilisation du namespace Github
<code>npm install user/repo --save</code>.<br>Cependant, m√™me si vous ne publiez pas votre module, lorsque vous en modifiez le
code n‚Äôoubliez jamais de mettre √† jour sa version suivant la convention
<a href="http://semver.org/">semver</a>. Sinon vous serez susceptible d‚Äôinclure des bugs dans
les projets qui l‚Äôutilisent. Ce qui implique :</p>
<ul>
<li>Mettre √† jour le champ ‚Äúversion‚Äù de votre <code>package.json</code> (vous pouvez vous
aider des commandes <code>npm version patch</code>, <code>npm version minor</code> et <code>npm version major</code>).</li>
<li>Ajouter un tag git (<code>git tag -a 0.1.0 -m &quot;Initial release&quot;</code>).</li>
</ul>
<p>NPM est une excellente solution pour g√©rer les d√©pendences de votre projet, aussi
bien pour vos outils de build, que pour vos assets front-end. Je pense qu‚Äôil est
important de garder les choses simples, en commen√ßant par utiliser un seul
gestionnaire de d√©pendances, dans le cas o√π celui-ci n‚Äôint√®gre pas d‚Äôautres
fonctionnalit√©s que le t√©l√©chargement de modules.  </p>
<p>Bye bye Bower!</p>
<p>PS: vous avez besoin d‚Äôun module qui n‚Äôa pas de package.json ? Pas de probl√®me, <a href="/posts/nodejs/napa-ou-comment-telecharger-package-napa-package-json/">napa est l√† pour √ßa</a></p>

]]></description><pubDate>Tue, 06 May 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/frontend/npm-comme-package-manager-pour-le-front-end/</link><guid isPermaLink="true">http://putaindecode.fr/posts/frontend/npm-comme-package-manager-pour-le-front-end/</guid></item><item><title>Petite d√©finition de BEM</title><description><![CDATA[
<p><strong><a href="http://bem.info">BEM</a></strong> n‚Äôest ni une marque de voiture ni un groupe de musique, et encore moins une onomatop√©e (quoique). C‚Äôest plut√¥t une fa√ßon de nommer les classes en CSS, une convention en d‚Äôautres termes voire une m√©thodologie.</p>
<p>Dans cet article, je ne vous expliquerai pas pourquoi il faut pr√©f√©rer BEM √† une autre convention, je vous explique surtout comment l‚Äôutiliser.</p>
<p><strong>BEM</strong> apporte une solution √† un probl√®me majeur en informatique : le nommage.</p>
<p>Il n‚Äôy a rien de plus compliqu√© en informatique que de nommer un objet : besoin d‚Äô√™tre explicite, ne doit pas √™tre trop g√©n√©rique, ni trop compliqu√©, ni trop verbeux (√ßa, √ßa reste √† voir avec BEM‚Ä¶).</p>
<p>Lorsque l‚Äôon nomme un objet, une m√©thode, une fonction, une classe, on se doit d‚Äô√™tre avant tout compr√©hensible. Une personne devant lire votre code doit directement comprendre de quoi vous parlez. Cette personne peut tr√®s bien √™tre vous 6 mois, 1 an apr√®s. Je pense sinc√®rement qu‚Äôun code clair vaut toute la documentation du monde. Je ne dis pas qu‚Äôil ne faut pas documenter mais un code doit √™tre facilement compr√©hensible, la documentation doit juste apporter un contexte, une situation particuli√®re.</p>
<p>Bref, <strong>BEM</strong> est le sigle pour <em>Block</em>, <em>Element</em>, <em>Modifier</em>. Qu‚Äôest-ce que cela veut dire.</p>
<p>Prenons par exemple un site web. Nous avons un ensemble avec dedans deux onglets et en dessous le contenu de chaque onglet.</p>
<p>Nous allons d√©finir ce que sont le <em>block</em>, le ou les <em>elements</em> et les <em>modifiers</em>.</p>
<p>Dans ce cas pr√©cis, le <em>block</em> est le conteneur, l‚Äôensemble, ce qui entoure le tout. Appelons-le ‚ÄúWindow‚Äù.</p>
<p>Nous avons alors aussi les <em>elements</em> suivants : les onglets, que nous allons nommer ‚ÄúTab‚Äù, et le contenu, l√† o√π il y a le texte de chaque onglet ‚ÄúContent‚Äù.</p>
<p>Comment cela se traduit en <strong>BEM</strong> :</p>
<ul>
<li>Notre <em>block</em> s‚Äôappelant ‚ÄúWindow‚Äù sera alors <code>.Window</code></li>
<li>Nos <em>elements</em> ‚ÄúTab‚Äù seront <code>.Window-tab</code></li>
<li>Notre <em>element</em> ‚ÄúContent‚Äù sera <code>.Window-content</code></li>
</ul>
<p>Jusque l√†, cela devrait aller :</p>
<pre><code class="lang-css"><span class="hljs-class">.Window</span> <span class="hljs-rules">{

<span class="hljs-rule">}</span></span>

  <span class="hljs-class">.Window-tab</span> <span class="hljs-rules">{

  <span class="hljs-rule">}</span></span>

  <span class="hljs-class">.Window-content</span> <span class="hljs-rules">{

  <span class="hljs-rule">}</span></span>
</code></pre>
<p>Ce qui revient de man√®re g√©n√©rique √† :</p>
<pre><code class="lang-css">.<span class="hljs-keyword">Block</span> <span class="hljs-list">{

}</span>

  .<span class="hljs-keyword">Block</span>-element <span class="hljs-list">{

  }</span>
</code></pre>
<p>Oui, je vous conseille d‚Äôindenter votre code afin de grouper vos classes.</p>
<p>Maintenant, nous allons d√©finir ce qu‚Äôest un <em>modifier</em>. Un <em>modifier</em> change l‚Äô√©tat de l‚Äô√©l√©ment, il peut s‚Äôappliquer aussi bien sur un <em>block</em>, qu‚Äôun <em>element</em>.</p>
<p>Si par exemple je souhaite mettre en actif un onglet (le mettre en avant car s√©l√©ctionn√©), je ferai alors <code>.Window-tab--active</code>, soit :</p>
<pre><code class="lang-css"><span class="hljs-class">.Window</span> <span class="hljs-rules">{

<span class="hljs-rule">}</span></span>

  <span class="hljs-class">.Window-tab</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> gray</span></span>;
  <span class="hljs-rule">}</span></span>

    <span class="hljs-class">.Window-tab--active</span> <span class="hljs-rules">{
      <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> black</span></span>;
    <span class="hljs-rule">}</span></span>

  <span class="hljs-class">.Window-content</span> <span class="hljs-rules">{

  <span class="hljs-rule">}</span></span>
</code></pre>
<p>J‚Äôaimerais aussi afficher ou non le contenu. Pour cela, je vais lui rajouter un <em>modifier</em></p>
<pre><code class="lang-css"><span class="hljs-class">.Window</span> <span class="hljs-rules">{

<span class="hljs-rule">}</span></span>

  <span class="hljs-class">.Window-tab</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> gray</span></span>;
  <span class="hljs-rule">}</span></span>

    <span class="hljs-class">.Window-tab--active</span> <span class="hljs-rules">{
      <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> black</span></span>;
    <span class="hljs-rule">}</span></span>

  <span class="hljs-class">.Window-content</span> <span class="hljs-rules">{
  <span class="hljs-rule">}</span></span>

  <span class="hljs-class">.Window-content--hidden</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">display</span>:<span class="hljs-value"> none</span></span>;
  <span class="hljs-rule">}</span></span>
</code></pre>
<p>J‚Äôaurais tr√®s bien pu inverser et dire que par d√©faut le contenu est cach√© et je lui rajoute la classe <code>.Window-tab--active</code> pour l‚Äôafficher (<code>display: block</code>) mais lorsqu‚Äôil s‚Äôagit de cacher ou de faire appa√Ætre des √©l√©ments, je vous conseille vivement de plut√¥t ajouter un <em>modifier</em> qui cache les √©l√©ments, car cela √©vite de se prendre la t√™te sur quel <code>display</code> mettre par d√©faut. L√†, vous mettez un <code>display: none</code> et voil√†, qu‚Äôimporte si celui de base est un <code>inline</code>, <code>inline-block</code>, <code>table-cell</code> ou autre.</p>
<p>Du coup, nous avons maintenant nos diff√©rents types de classes. Cela se r√©sume de mani√®re g√©n√©rique √† :</p>
<pre><code class="lang-css">.<span class="hljs-keyword">Block</span> <span class="hljs-list">{

}</span>

  .<span class="hljs-keyword">Block</span>--modifier <span class="hljs-list">{

  }</span>

  .<span class="hljs-keyword">Block</span>-element <span class="hljs-list">{

  }</span>

    .<span class="hljs-keyword">Block</span>-element--modifier <span class="hljs-list">{

    }</span>
</code></pre>
<p>Ce qui donne <code>.Block-element--modifier</code> (notre <strong>BEM</strong>).</p>
<p>Parlons maintenant du cas des termes multiples dans chaque partie. Voici comment cela se traduit.</p>
<p><code>.MyBlock-myElement--myModifier</code></p>
<p>Les <em>blocks</em> sont en ‚ÄúPascalCase‚Äù (ou UpperCamelCase), les <em>elements</em> et <em>modifiers</em> sont en ‚ÄúcamelCase‚Äù (ou lowerCamelCase). Nous s√©parons le <em>block</em> de l‚Äô√©l√©ment par ‚Äú-‚Äú et le <em>block</em> ou l‚Äô <em>element</em> d‚Äôun <em>modifier</em> par ‚Äú‚Äî‚Äú.</p>
<p>Maintenant, vous savez tout sur <strong>BEM</strong>. Sachez qu‚Äôil existe tout de m√™me plusieurs conventions de <strong>BEM</strong>. Celle que je vous ai apprise l√† est la norme de <strong>montage.js</strong> mais il y en a d‚Äôautres par exemple qui n‚Äôutilisent pas les majuscules et font ce genre de choses : <code>.my-block__my-element--my-modifier</code>. Il s‚Äôav√®re que c‚Äôest la <a href="http://bem.info/method/definitions/#naming-for-independent-css-classes">convention pseudo-officielle</a>.</p>
<p>L‚Äôinconv√©nient de ceci est que c‚Äôest moins lisible au premier abord qui est quoi, et de plus, les <code>_</code> ne permettent pas de s√©lectionner facilement un terme en <em>double-cliquant</em> dessus.</p>
<p>Deux petites choses avant de partir.</p>
<p>Dans le but d‚Äô√©viter de vous faire √©craser vos propri√©t√©s par quelqu‚Äôun d‚Äôautre (une biblioth√®que, un <em>SDK</em>), je vous conseille de rajouter votre organisation.</p>
<p>Typiquement, √ßa donne <code>.org-Block-element--modifier</code>. Tout en minuscule et si possible ne pas d√©passer les 3 lettres car vous allez devoir le r√©p√©ter √† chaque fois et √ßa peut √™tre lourd.</p>
<p>La deuxi√®me chose est la classe qui sert de s√©lecteur en JavaScript. Plut√¥t que <em>binder</em> un √©l√©ment via sa classe ‚ÄúCSS‚Äù (√† chaque classe sa responsabilit√©), il est nettement pr√©f√©rable de cr√©er une classe sp√©cifique au JavaScript. Cela donne : <code>.org-js-Block-element--modifier</code>. Il suffit simplement de rajouter <code>-js</code> entre l‚Äôorganisation et le <em>block</em>.</p>
<p>Nous arrivons √† la convention suivante : <code>.org[-js]-Block[-element][--modifier]</code></p>
<p>Certains vous diront qu‚Äôils mettent <code>.js-org-</code> mais √©tant donn√© que je consid√®re cela comme un <em>namespace</em> global (autant css que js), je pr√©f√®re mettre l‚Äô <code>org</code> au d√©but.</p>
<p>Voil√†, voil√†, c‚Äôest certes un peu d√©routant au d√©but, et ca parait tr√®s verbeux mais cela vous permettra d‚Äô√©viter de nooooooombreux soucis de nommage de classes o√π vous vous emm√®lerez les pinceaux √† coup de :</p>
<pre><code class="lang-css"><span class="hljs-class">.footer</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">text-decoration</span>:<span class="hljs-value"> underline</span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-class">.content</span> <span class="hljs-class">.footer</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> black</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">text-decoration</span>:<span class="hljs-value"> none</span></span>; <span class="hljs-comment">/* annule la propri√©t√© du pr√©c√©dent s√©lecteur */</span>
<span class="hljs-rule">}</span></span>
</code></pre>
<p>Ciao les kids.</p>

]]></description><pubDate>Mon, 05 May 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/css/petite-definition-bem/</link><guid isPermaLink="true">http://putaindecode.fr/posts/css/petite-definition-bem/</guid></item><item><title>Table ronde #3 - Les bonnes pratiques et organisation CSS/HTML</title><description><![CDATA[
<p>Mardi 29 avril s‚Äôest d√©roul√©e la troisi√®me table ronde qui est finalement la premi√®re sous le nom de <strong>{p!}</strong>. Une petite explication s‚Äôimpose √©tant donn√© que nous allons en faire de plus en plus et que je souhaite vraiment vous faire un compte rendu sur chacun de ces √©v√®nements.</p>
<h2 id="preambule"><a class="putainde-Title-anchor" href="#preambule">#</a>Pr√©ambule</h2><p>Partant du constat qu‚Äôil est difficile d‚Äôapprendre et d‚Äô√©changer en conf√©rence du fait du manque du niveau assez √©lev√© (trop de gens avec un niveau diff√©rent, il faut forc√©ment s‚Äôaligner) et √† sens unique (une personne parle, les autres √©coutent), nous avons d√©cid√© de cr√©er des tables rondes o√π un fil conducteur est suivi amenant √† d√©battre, √©changer, affirmer.</p>
<p>Attention, je ne dis pas que les conf√©rences ne servent √† rien mais √† mon sens elles sont trop magistrales et parfois trop marketing (coucou WebRTC Paris).</p>
<p>Les premi√®res tables rondes n‚Äô√©taient pas sous le nom de <strong>p!</strong>, elles √©taient plut√¥t de mon initiative (@_kud) dans le but de rassembler des gens que j‚Äôappr√©ciais et dont je connaissais le niveau afin de progresser tous ensembles.</p>
<p>Je tiens √† vous mettre en garde ici que les propos tenus ne sont pas forc√©ment toujours justifi√©s, c‚Äôest un compte rendu qui synth√©tise des choix que vous devriez s√ªrement explorer par vous-m√™me ou au travers de d‚Äôautres articles <strong>p!</strong>.</p>
<p>Bon allez, on y va.</p>
<h2 id="ou-"><a class="putainde-Title-anchor" href="#ou-">#</a>O√π ?</h2><p>C‚Äôest cette fois-ci Altima qui nous a gentillement accueilli dans ses locaux.</p>
<p><a href="http://www.altima.fr">Altima</a> est une agence web compos√©e de 6 bureaux dans le monde, proposant des expertises notamment dans les domaines du design, UX, SEO, in-store, hosting, et d√©veloppement.</p>
<p>On les remercie bien fort, tout √©tait nickel.</p>
<h2 id="themes"><a class="putainde-Title-anchor" href="#themes">#</a>Th√®mes</h2><p>Voici le fil conducteur de la soir√©e.</p>
<ul>
<li>les resets / normalize, lesquels, pourquoi, quand ?</li>
<li>strat√©gie de dossiers / fichiers (architecture)</li>
<li>OOCSS, BEM, SMACSS, Atomique etc.</li>
<li>s√©mantique</li>
<li>accessibilit√©</li>
<li>les pi√®ges de l‚Äôint√©gration (e.g. display: inline-block)</li>
<li>unit√©s px, rem, em, pt</li>
<li>CSS Frameworks ? lesquels ? pourquoi ? quand ?</li>
</ul>
<h2 id="qui-"><a class="putainde-Title-anchor" href="#qui-">#</a>Qui ?</h2><p>Voici les personnes pr√©sentes. Si vous avez d‚Äôailleurs le moindre probl√®me avec ce qui est dit dans cet article, c‚Äôest √† eux que vous devriez vous adresser. üòä</p>
<table>
<thead>
<tr>
<th>Membres</th>
<th style="text-align:center">Statut</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://twitter.com/_kud">_kud</a></td>
<td style="text-align:center">üëÆ</td>
</tr>
<tr>
<td><a href="https://twitter.com/bloodyowl">bloodyowl</a></td>
<td style="text-align:center">üè†</td>
</tr>
<tr>
<td><a href="https://twitter.com/yannickc">yannickc</a></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td><a href="https://twitter.com/dhoko_">dhoko_</a></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td><a href="https://twitter.com/philippebarbosa">philippebarbosa</a></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td><a href="https://twitter.com/tchak13">tchak13</a></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td><a href="https://twitter.com/remitbri">remitbri</a></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td><a href="https://twitter.com/dizwix">dizwix</a></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<h2 id="c-est-parti"><a class="putainde-Title-anchor" href="#c-est-parti">#</a>C‚Äôest parti</h2><h3 id="reset-normalize"><a class="putainde-Title-anchor" href="#reset-normalize">#</a>Reset / Normalize</h3><p>Bon, alors, commen√ßons. Ce sont √©videmment les resets / normalizes qui d√©butent √©tant donn√© que c‚Äôest la base de toute int√©gration.</p>
<p>Pour rappel, la diff√©rence entre un normalize et un reset est simple.</p>
<ul>
<li>Le <strong>normalize</strong> fait en sorte que les styles de base se ressemblent sur tous les navigateurs.</li>
<li>Le <strong>reset</strong> va plus loin que √ßa puisqu‚Äôil s‚Äôoccupe d‚Äô√©craser totalement les styles par d√©faut pour finalement n‚Äôavoir aucun style sur votre page lorque vous d√©butez votre int√©gration.</li>
</ul>
<p>Bref, peu ou pas de gens dans cette salle utilisent finalement des resets. Les resets sont uniquement int√©ressants lors d‚Äôapplications tr√®s pouss√©es o√π le style par d√©faut des navigateurs n‚Äôest pas du tout pertinent. Mais attention, ceci peut √™tre dangereux car il est plus compliqu√© de retrouver le style par d√©faut d‚Äôun navigateur que de le supprimer. D‚Äôo√π l‚Äôint√©r√™t du normalize.</p>
<p>Je vous indique tout de m√™me les plus connus :</p>
<ul>
<li><a href="http://meyerweb.com/eric/tools/css/reset/">Le reset d‚ÄôEric Meyer</a></li>
<li><a href="http://necolas.github.io/normalize.css/">Le normalize de Necolas</a></li>
</ul>
<h3 id="strategie-de-fichiers"><a class="putainde-Title-anchor" href="#strategie-de-fichiers">#</a>Strat√©gie de fichiers</h3><p>Allez, on continue, strat√©gie de fichiers, o√π est ce qu‚Äôon range tout ce beau monde, comment on s‚Äôy retrouve.</p>
<p>On en a discut√© un peu, certains pr√©f√®rent mettre leurs fichiers dans directement dans le <em>root</em> du projet, moi je pr√©f√®re le mettre dans un dossier <code>/src</code> afin de bien diff√©rencier source, sortie, et fichiers de configuration du projet. Ce qui donne ceci :</p>
<pre><code>.
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ bin <span class="hljs-comment">// executables</span>
‚îú‚îÄ‚îÄ dist <span class="hljs-comment">// fichiers finaux</span>
‚îú‚îÄ‚îÄ src <span class="hljs-comment">// votre application</span>
‚îÇ   ‚îú‚îÄ‚îÄ assets <span class="hljs-comment">// fichiers statiques (pas de compilation)</span>
‚îÇ   ‚îú‚îÄ‚îÄ collections
‚îÇ   ‚îú‚îÄ‚îÄ events
‚îÇ   ‚îú‚îÄ‚îÄ glyphicons <span class="hljs-comment">// svg qui seront transform√©s en font</span>
‚îÇ   ‚îú‚îÄ‚îÄ images
‚îÇ   ‚îú‚îÄ‚îÄ lib
‚îÇ   ‚îú‚îÄ‚îÄ models
‚îÇ   ‚îú‚îÄ‚îÄ styles
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="hljs-keyword">shared</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ views
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="hljs-keyword">import</span>.css
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ shame.css <span class="hljs-comment">// hack css o√π il est obligatoire de commenter pourquoi</span>
‚îÇ   ‚îú‚îÄ‚îÄ routers
‚îÇ   ‚îú‚îÄ‚îÄ templates
‚îÇ   ‚îî‚îÄ‚îÄ views
‚îÇ   ‚îú‚îÄ‚îÄ app.js
‚îÇ   ‚îú‚îÄ‚îÄ bootstrap.js
|   ‚îî‚îÄ‚îÄ <span class="hljs-keyword">import</span>.json
‚îú‚îÄ‚îÄ gulpfile.js
‚îú‚îÄ‚îÄ Makefile
‚îú‚îÄ‚îÄ <span class="hljs-keyword">package</span>.json
</code></pre><h3 id="oocss-bem-smacss-whatever-else"><a class="putainde-Title-anchor" href="#oocss-bem-smacss-whatever-else">#</a>OOCSS, BEM, SMACSS, whatever else</h3><p>Haaaaaaa, grand d√©bat ici. Quelle est la meilleure fa√ßon, la meileure mani√®re de maintenir du CSS, de nommer ses classes, d‚Äôavoir des conventions de nommage.</p>
<p>Tout d‚Äôabord, on s‚Äôest tous accord√©s sur un point : OOCSS, SMACSS, le reste, √ßa ne marche pas. Ca marche pas parce que √ßa casse dans certains cas la s√©mantique, dans d‚Äôautres cas, √ßa revient √† faire du style inline mais avec des noms de classes style <code>.left</code> pour un <code>float: left</code>. On a tous plus ou moins essay√© et √ßa devient vite le bordel. On s‚Äôest aussi accord√©s, mais √ßa c‚Äôest √©vident, qu‚Äôavoir une convention de nommage est primordiale pour maintenir correctement du style (ou autre d‚Äôailleurs).
Et surtout il n‚Äôest plus n√©cessaire d‚Äôutiliser les IDs. Les IDs doivent servir uniquement dans le cas de la combinaison label/input, mais sinon ils emp√™chent toute g√©n√©ralisation d‚Äôun block.</p>
<p>Il est clair qu‚Äôapr√®s des ann√©es d‚Äôint√©gration, le constat est l√†, la cascade, ce n‚Äôest vraiment pas l‚Äôid√©al. Cela reste toujours aussi difficile de faire du css generique et/ou maintenable, et c‚Äôest justement en quoi BEM permet de r√©soudre √† la fois les probl√©matiques de cascade mais aussi de nommage.</p>
<p>Il y a de nombreux articles sur BEM, sur ses conventions (oui il peut y avoir plusieurs conventions de nommage, BEM reste plus une m√©thologie).</p>
<p>En quelques termes, BEM red√©finit la cascade en ne plus l‚Äôutilisant comme par exemple : <code>.header .title.is-active</code> mais <code>.header__title--is-active</code>, BEM venant de Block, Element, Modifier. C‚Äôest exactement ce que je viens de d√©couper en une seule classe plut√¥t que 3.</p>
<p>Pour ma part, j‚Äôutilise la convention de nommage qui se rapproche tr√®s fort√©ment du framework JavaScript ‚ÄúMontage.js‚Äù : <code>.org-(js-)-MyBlock-myElement--myModifier</code>.</p>
<p>Je ne souhaite volontairement pas m‚Äô√©tendre sur le sujet car je vous invite √† lire <a href="/posts/css/petite-definition-bem/">mon article √† ce sujet</a>.</p>
<p>Je vous laisse tout de m√™me deux articles √† ce sujet qui pr√©sentent plut√¥t bien le principe (ils sont en anglais).</p>
<ul>
<li><a href="http://www.smashingmagazine.com/2012/04/16/a-new-front-end-methodology-bem/">A New Front-End Methodology: BEM</a></li>
<li><a href="http://webdesign.tutsplus.com/articles/an-introduction-to-the-bem-methodology--cms-19403">An Introduction to the BEM Methodology</a></li>
</ul>
<h3 id="semantique"><a class="putainde-Title-anchor" href="#semantique">#</a>S√©mantique</h3><p>On est tous d‚Äôaccord, faire de la s√©mantique oui, quand cela ne va pas √† l‚Äôencontre de la maintenabilit√© et de la r√©utilisation de code.</p>
<p>Pour ma part, trop de fois je me suis pris la t√™te sur la s√©mantique au point de faire des classes uniques qui ont du sens mais qui <code>@extend</code> (voir pr√©-processeurs) une classe g√©n√©rique.</p>
<h3 id="accessibilite"><a class="putainde-Title-anchor" href="#accessibilite">#</a>Accessibilit√©</h3><p>Pour √™tre franc, l‚Äôaccessibilit√© a un co√ªt en terme de temps qui n‚Äôest jamais n√©gligeable et rentre souvent en conflit avec l‚ÄôUX d‚Äôune personne sans handicap.</p>
<p>Typiquement, imaginons que nous avons un formulaire bancaire, comment faire un boucle uniquement sur ce formulaire (pratique dans le cas d‚Äôune personne sans handicap) tout en ne contraignant la navigation ‚Äúclassique‚Äù ?</p>
<p>Le constat est l√† aussi, nous sommes tous ici sensibilis√©s par l‚Äôaccessibilit√©, nous essayons d‚Äôen faire le plus possible (souvent sur notre temps libre ou entre deux t√¢ches) mais personne n‚Äôadministre du temps √† cela.</p>
<p>Une √©ventuelle solution a √©mmerg√© durant les discussions : pourquoi ne pourrait-on pas conna√Ætre d‚Äôembl√©e la situation de l‚Äôutilisateur lorsqu‚Äôil arrive sur le site ?</p>
<p>Un navigateur d√©di√© √† certains handicaps devrait √™tre d√©tectable d‚Äôent√©e de jeu et que l‚Äôon puisse nous d√©veloppeurs faire en cons√©quence dans ce cas l√†.</p>
<p>C‚Äôest exactement comme l‚Äôhistoire de r√©solution / bande passante. Le w3c nous propose √† l‚Äôheure actuelle de d√©tecter la r√©solution pour faire en cons√©quence sur notre site, or, ce n‚Äôest pas du tout le pivot int√©ressant, c‚Äôest surtout la bande passante qui nous permet d‚Äôajuster notre site web.</p>
<p>Bref, comme souvent, le W3C est √† la rue, n‚Äôavance pas comme le web avance (vite, tr√®s vite) et les outils nous font d√©faut √† l‚Äôheure actuelle pour r√©pondre √† certains besoins. (Note : je ne dis pas qu‚Äôils ne font pas un bon boulot ou que ce n‚Äôest pas compliqu√©, je dis simplement qu‚Äôil y a un grand √©cart encore les besoins et les solutions √† l‚Äôheure actuelle sur plusieurs domaines : l‚Äôaccessibilit√©, la video, la capacit√© de fournir un site en fonction de la bande passante plut√¥t que la r√©solution, etc, etc).</p>
<h3 id="les-pieges-de-l-integration-e-g-display-inline-block-"><a class="putainde-Title-anchor" href="#les-pieges-de-l-integration-e-g-display-inline-block-">#</a>Les pi√®ges de l‚Äôint√©gration (e.g. display: inline-block)</h3><p>Certains cas de l‚Äôint√©gration restent encore du domaine hack plut√¥t qu‚Äôune solution propre et faible. On ne dit pas que ces hacks sont difficiles ou laborieux mais qu‚Äôils sont encore n√©cessaires sur des propri√©t√©s css tr√®s communes en 2014.</p>
<p>L‚Äôinline-block par exemple, il n‚Äôy a malheureusement pas le choix de soit coller les balises, soit minifier le html (ou la partie ayant des inline-block), soit de mettre des commentaires.</p>
<p>Les layouts seront toujours aussi p√©nibles tant que les flexbox ne sont pas support√©s par la majorit√© des navigateurs du march√©. Les 3 solutions principales pour le moment : float, inline-block, table(-cell).</p>
<p>En ce qui concerne le box-sizing, il sauve beaucoup d‚Äôint√©gration. Il faut juste voir le support des navigateurs que vous supportez. 
Oh et attention, tous les navigateurs ne font pas 16px de base. Je dis √ßa si vous utilisez les <code>(r)em</code> (qui sont expliqu√©s juste apr√®s).</p>
<p>Enfin, <code>&lt;input type=&quot;number&quot;&gt;</code> est tout bugg√© sous Firefox. Par exemple, mettre min=‚Äù1900‚Äù sur cet input et que vous cliquez sur le ‚Äú+‚Äù, vous commencerez √† ‚Äú1‚Äù et non ‚Äú1900‚Äù‚Ä¶ Je sens que je vais devoir encore faire un ticket. :‚Äô)</p>
<h3 id="unites-px-rem-em-pt-"><a class="putainde-Title-anchor" href="#unites-px-rem-em-pt-">#</a>Unit√©s px, rem, em, pt, %</h3><p>Pour √™tre clair, personne n‚Äôutilise des <code>pt</code>, les <code>px</code>, faut les oublier de plus en plus, et <code>rem</code> est s√ªrement le plus simple et le mieux mais d√©pend malheureusement de vos supports navigateurs o√π dans quels cas il faut souvent se rabattre sur les <code>em</code>. Le pourcentage est forc√©ment pr√©conis√©.</p>
<h3 id="css-frameworks-lesquels-pourquoi-quand-"><a class="putainde-Title-anchor" href="#css-frameworks-lesquels-pourquoi-quand-">#</a>CSS Frameworks ? lesquels ? pourquoi ? quand ?</h3><p><a href="http://foundation.zurb.com/">Foundation</a>, <a href="http://getbootstrap.com/">Bootstrap</a>, <a href="http://purecss.io/">pure</a> sont les plus connus (et peut-√™tre les pires). Il ne vous serviront uniquement que dans le cas d‚Äôune <a href="http://fr.wikipedia.org/wiki/Preuve_de_concept">PoC</a> ou une administration de site (<em>back-office</em>).</p>
<p>Par contre, <a href="http://topcoat.io/">topcoat</a> peut se r√©v√©ler assez int√©ressant de par sa haute personnalisation et de son <em>BEM-way</em>. Eventuellement <a href="http://inuitcss.com/">inuit.css</a> sinon.</p>
<h3 id="bonus"><a class="putainde-Title-anchor" href="#bonus">#</a>Bonus</h3><p>Lors de cas de contenus affich√©s via de l‚Äôajax, pensez de plus en plus √† faire du ‚Äúprerender‚Äù, c‚Äôest √† dire que pendant que le contenu se charge, au lieu de mettre des <em>spinners</em>, <em>loaders</em>, <em>toussa</em>, essayez de mettre des visuels qui ressembleront √† l‚Äô√©l√©ment final. C‚Äôest ce que fait par exemple facebook, et c‚Äôest pas mal du tout. Tenez :</p>
<p><img src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAIBAQEBAQIBAQECAgICAgQDAgICAgUDBAMEBgUGBgYFBQUGBwkIBgcIBwUFCAsICAkKCgoKBgcLDAsKDAkKCgr/2wBDAQICAgICAgUDAwUKBgUGCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgr/wgARCAFPAfoDASIAAhEBAxEB/8QAHAABAAMBAQEBAQAAAAAAAAAAAAMGBwQFAgEJ/9oACAEBAAAAAP7U+5+gAAAAAAAAA4fPm04AAAAAAAAACt0+bTvO5B6XUAAAAAAAACt0+bTvL4x6nxzADv6QAAAAAAVunzad5fGPU7AAAAAAAAAVunzad5fGPUc4ffogAAAAAABW6fNp3l8Y9Tq+Q/fsAAAAAAAK3T5tO+fkff6AAAAAAAACt0+bTgAAAAAAAAAK3T5tOgiAAAAAAAASzgK3T5tOgiAAAAAAAASzgK3T5tOAAAAAAAAAArdPm07g5gAAAAAAAAd/SK3T5tOAAAAAAAAAArdPm07j5wAADo7AAAAAAK3T5tO+fkAAA+voAAAAACt0+bTgAAAAAAAAAK3T5tOAAAAAAAAAArdPm04AAAAAAAAACt0+bTgAAAAAAAAAK3T5tOAAAAAAAAAArdPm04AAAAAAAAACt0+bTgAAAAAAAAAK3T5tOAAAAAAAAAArdPm04AAAAAAAAACt0+bTgAAAAAAAAAK3T5tOAAAAAAAAAArdPm04AAAAAAAAACt0+bTgAAAAAAAAAK3T5tOAAAAAAAAAArdPm04AAAAAAAAACt0+bTgAAAAAAAAAK3T5tOAAAAAAAAAArdPm04AAAAAAAAACt0+bTgAAAAAAAAAK3T5tOAAAAAAAAAArdPm04AAAAAAAAACt0+bTgAAAAAAAAAK3T5tOAAAAAAAAAArdPm04AAAAAAAAACt0+XTwAAAAAAAAAK1UPz8AAAAAAAAAAfX/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAgMB/9oACAECEAAAANZAAAABc87yejnAAADaTkjgAAAbTJIAAABtMAAAAODaYAAAAcG0x0AAABzjaY6AJAAA2nMAAAAG05gAAAA2nMAAAAG05gAAAA2nMAAAAG05gAAAA2nMAAAAG05gAAAA2nMAAAAG05gAAAA2nMAAAAG05gAAAA2SAAAAC//EABYBAQEBAAAAAAAAAAAAAAAAAAACAf/aAAgBAxAAAACdAAAABNTlaDQAACKnK00AAAEVjdAAAAIoAAAA0RQAAABoigAAAA1FAA0AACK0AAAAEVoAAAAIrQAAAARWgAAAAitAAAABFaAAAACK0AAAAEVoAAAAIrQAAAARWgAAAAitAAAABFaAAAACGgAAAAz/xAAjEAABBAIBBAMBAAAAAAAAAAAVBQcQFxRQAwACBCABBjAR/9oACAEBAAECAOPsrquq6rquq6rquq6rquq6rquq6rquq6rquq6rquq6rquq6rquq6rquq6rquq6rquq6rquq6rquq6rquq6rquq6rquq6rquq6rquq6rpb+s9J2+c6E6Fjny8vLy0jk2znQnQt+qJ0qfml6tzoToW/VE27nQnQt+qJ0oqJs2bNm+BX17nQnQt+qJ138GJiYmJifHi69zoTo7+DExMTE7OPbOdCdvnOhOjylE2bNmzZs2bNmzZs2bNmzZs2bNmzZs2bNmzZs2bNmzZs2bNmzZs2bNmzZs2b8VR/BzoTo8pOCBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBPFTvwc6E7fOdCdCp4QsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixaX4/o50J2+c6E6FFRNmzZs2bNmzZs2bNmzZs2bNmzaco6VzoTo7+DExMTExMTExMTExMTExMTExMTExMTs4NK50J2+c6E7fOdCdvnOhO3znQnb5zoTt850J2+c6E7fOdCdvnOhO3znQnb5zoTt850J2+c6E7fOdCdvnOhO3znQnb5zoTt850J2+c6E7fOdCdvnOhO3znQnb5zoTt850J2+c6OTs/m8+OPr/xAA8EAAAAwQFDAECBQQCAwAAAAAAAQQCA1PRBSV1kbMGEBFQVFaSk5Wi0tMSUWQiJEFzsRQgITETMGFxdP/aAAgBAQADPwBp69YcOy0tPHjLDBfVpoyIivMhlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwGUMdHzm/AZQx0fOb8BlDHR85vwFJ5Punb5e05aZevPgy05bNr8Wgz0HpIv0I7s1bIbQT4rOvqpR2gWE8zVshtBPis5n7pSyy7fNsl8C/wy0ZfqYV7S84zCvaXnGYV7S84zCvaXnGYePUzTTx400f8AyH/lo9P6FreqUdoFhPM1bIbQT4rOb82z+2X8n/b+Va/cP+CC3+oL+m/5fj8P8/DTo06T+gpX7juFK/cdwpX7juFK/cdwpX7juFK/cdwpX7juFK/cdwpX7juFK/cdwUf07X9T8/l8z0fPTp0aC+uq6pR2gWE8zVshtBPis5vzbP7Zfyf9v5Vr9w/4LW9Uo7QLCeZq2Q2gnxWc35tn9sv5P+38q1+4f8EH6R+Tt2yyZGzp/ER/Uwrhu7jmFcN3ccwrhu7jmFcN3ccwrhu7jmFL1+w7aYY0NNkR6CP6/wDvWFUo7QLCeZq2Q2gnxWc35tn9sv5P+38q1+4f8EHL0/k8cstH9WmSMJdmd8BBLszvgIJdmd8BBLszvgIJdmd8BBMyZNMp2CMj/wAGTBawqlHaBYTzNWyG0E+KzmcvT+Txyy0f1aZIwl2Z3wEEuzO+Agl2Z3wEEuzO+Ag7dF8XbBMlp/0yWjW9Uo7QLCeZq2Q2gnxWdfVSjtAsJ5mrZDaCfFZzOUjwnbxlszMtP4SIJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMJYby4phLDeXFMOVbw3btlsjItP4iL/pqlHaBYTzNWyG0E+Kzmcq3hPHjbZGRaPwmQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQSxHl5SCWI8vKQcpHhvHbbZmZaPxGX/TVKO0CwnmatkNoJ8VnX1Uo7QLCeZq2Q2gnxWcylSoJty7+RExo0/Ii/Uwvgd5TC+B3lML4HeUwvgd5TC+B3lML4HeUwvgd5TC+B3lML4HeUwvgd5TC+B3lML4HeUwvgd5TC+B3lML4HeUwvgd5TC+B3lML4HeUwvgd5TC+B3lML4HeUwvgd5TC+B3lML4HeUwvgd5TC+B3lML4HeUwvgd5TC+B3lML4HeUwvgd5TC+B3lML4HeUwvgd5TC+B3lML4HeUwvgd5TC+B3lML4HeUwvgd5TC+B3lML4HeUwvgd5TC+B3lML4HeUwvgd5TC+B3lML4HeUwvgd5TC+B3lML4HeUwvgd5TC+B3lML4HeUw+Tp2mHzGgzbM9GnT+hf21SjtAsJ5mrZDaCfFZ19VKO0CwnmatkNoJ8VnM/SPydu2WTI2dP4iP6mFcN3ccwrhu7jmFcN3ccwrhu7jmFcN3ccwrhu7jmFcN3ccwrhu7jmFcN3ccwrhu7jmFcN3ccwrhu7jmFcN3ccwrhu7jmFcN3ccwrhu7jmFcN3ccwrhu7jmFcN3ccwrhu7jmFcN3ccw/VvzdvGWSImdP4SP6lqaqUdoFhPM1bIbQT4rOZy9P5PHLLR/VpkjCXZnfAQS7M74CCXZnfAQS7M74CCXZnfAQS7M74CCXZnfAQS7M74CCXZnfAQS7M74CCXZnfAQS7M74CCXZnfAQS7M74CCXZnfAQS7M74CCXZnfAQS7M74CCXZnfAQS7M74CCXZnfAQcuj+Ttyyyf1ZZItTVSjtAsJ5mrZDaCfFZ19VKO0CwnmatkNoJ8VnX1Uo7QLCeZq2Q2gnxWdfVSjtAsJ5mrZDaCfFZ19VKO0CwnmatkNoJ8VnX1Uo7QLCeZq2Q2gnxWdfVSjtAsJ5mrZDaCfFZ19VKO0CwnmatkNoJ8VnX1Uo7QLCeZq2Q2gnxWdfVSjtAsJ5mrZDaCfFZ19VKO0CwnmatkNoJ8VnX1Uo7QLCeZq2Q2gnxWdfVSjtAsJ5mrZDaCfFZ19VKO0CwnmatkNoJ8VnX1Uo7QLCeZq2Q2gnxWdfVSjtAsJ5mrZDaCfFZ19VKO0CwnmatkNoJ8VnX1Uo7QLCeZq2Q2gnxWdfVSjtAsJ5mrZDaCfFZ19VKO0CwnmatkNoJ8VnX1Uo7QLCeZq2Q2gnxWdfVSjtAsJ5mrZDaCfFZ19VKO0CwnmatkNoJ8VnX1Uo7QLCeZq2Q2gnxWdfVSjtAsJ5mrZEf37jFZ19VKP8A+8sJ5mYesG7eFpZaLQZfUgt/Sn6XL/wVMqfYF28FL9aU+wLt4KX60p9gXbwUv1pT7Au3gpfrSn2BdvBS/WlPsC7eCl+tKfYF28FL9aU+wLt4KX60p9gXbwUv1pT7Au3gpfrSn2BdvBS/WlPsC7eCl+tKfYF28FL9aU+wLt4KX60p9gXbwUv1pT7Au3gpfrSn2BdvBS/WlPsC7eCl+tKfYF28FL9aU+wLt4KX60p9gXbwUv1pT7Au3gpfrSn2BdvBS/WlPsC7eCl+tKfYF28FL9aU+wLt4KX60p9gXbwUv1pT7Au3gpfrSn2BdvBS/WlPsC7eCl+tKfYF28FL9aU+wLt4KX60p9gXbwUv1pT7Au3gpfrSn2BdvBS/WlPsC7eCl+tKfYF28FL9aU+wLt4KX60p9gXbwUv1pT7Au3gpfrSn2BdvBS/WlPsC7eCl+tKfYF28FL9aU+wLt4KX60p9gXbwUv1pT7Au3gpfrSn2BdvBS/WlPsC7eCl+tKfYF28FL9aU+wLt4KX60p9gXbwUv1pT7Au3gpfrSn2BdvBS/WlPsC7eCl+tKfYF28FL9aU+wLt4KX60p9gXbwUv1pT7Au3gpfrSn2BdvBS/WlPsC7eCl+tKfYHhvCev1yt+0RGTJqlrxR8SP/ej5tHo06C/19M3/8QAHhEAAgMAAwEBAQAAAAAAAAAAAAECERIDMTJAECD/2gAIAQIBAT8AlJo3I3I3I3I3I3I3I3I3I3I3I3I3I3I3I3I3I3I3I3I3I3I3I3I3I3I3I3I3I3Ii20cnYuvx9FFFFFDXzQ8nJ2Lr8fRTMsyxqvoh5OTs0aG7+yHk5OymUymUymUymUymUymUymUymUymUymUymUymUymU/5h5OTstlstlstlstlstlstlstlstlstlstlstlstlstlv+YeTk7NM0zTNM0zTNM0zTNM0zTNM0zTNM0zTNM0zTNM0zTNM0zTG2/wBh5OTstFotFotFotFotFotD+OHk5O/vh5OTv74eTk7++Hk5O/vh5OTv74eTk7++Hk5O/vh5OTv74eTk7++Hk5O/vh5OTv74eTk7++HklGzDMMwzDMMwzDMMwzDMMwzDMMwzDMMwzDMMwzDMMwzDMMwzDMMwyKpH//EAB0RAAMBAQEBAQEBAAAAAAAAAAABEhExAkAQICH/2gAIAQMBAT8AS0lEolEolEolEolEolEolEolEolEolEolEolEolEolEolEofTzwffzz000000T35n088H3889NRSKQnv0Pp54NayRLPsfTzw1Go1Go1Go1Go1Go1Go1Go1Go1Go1Go1Go1Go1Gr+X088MRiMRiMRiMRiMRiMRiMRiMRiMRiMRiMRiMRiMRi/l9PPBrSUSiUSiUSiUSiUSiUSiUSiUSiUSiUSiUSiUSiUShLP19PPDGYzGYzGYzGYzGYzGL43088+99PPPvfTzz73088+99PPPvfTzz73088+99PPPvfTzz73088+99PPPvfTzz730Twoooooooooooooooooooooooooooooof8ArP/Z
"></p>
<p>Voil√† pour cette table ronde, j‚Äôesp√®re que le compte rendu vous a plu. Il est √©vident que c‚Äôest s√ªrement plus int√©ressant en direct, on essayera peut-√™tre par la suite de faire du streaming (live) ou du podcast, √† voir.</p>
<p>N‚Äôh√©sitez pas √† continuer le d√©bat dans les commentaires.</p>
<p>Pour ma part, j‚Äôai d√©j√† d‚Äôautres articles ‚Äúdans le pipe‚Äù (comme disent certains marketeux). Je vous retrouve bient√¥t ici ou sur Twitter, kiss.</p>

]]></description><pubDate>Mon, 05 May 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/table-ronde/bonnes-pratiques-et-organisation-css-html/</link><guid isPermaLink="true">http://putaindecode.fr/posts/table-ronde/bonnes-pratiques-et-organisation-css-html/</guid></item><item><title>Introduction au testing js front</title><description><![CDATA[
<p>Les tests automatis√©s en front-end ont longtemps √©t√© ignor√©s,
et le sont encore trop.</p>
<p>√âcrire des tests peut para√Ætre chiant, mais le temps qu‚Äôils rapportent
compense largement celui que l‚Äôon passe √† les √©crire.</p>
<h2 id="ecrire-du-js-testable"><a class="putainde-Title-anchor" href="#ecrire-du-js-testable">#</a>√âcrire du js testable</h2><p>Prenons un exemple simple et moche :</p>
<pre><code class="lang-javascript"><span class="hljs-comment">//app.js</span>
;(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{

  <span class="hljs-keyword">var</span> cart = $(<span class="hljs-string">"#cart"</span>)
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addToCart</span><span class="hljs-params">(id)</span></span>{
    <span class="hljs-keyword">var</span> element = $(<span class="hljs-string">"&lt;li&gt;&lt;/li&gt;"</span>)
    element.html(catalog[id])
    cart.append(element)
  }

  $(<span class="hljs-string">".js-updateCart"</span>)
    .on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(eventObject)</span></span>{
      addToCart($(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"id"</span>))
    })

})()
</code></pre>
<p>Tester ce code est particuli√®rement lourd, pour plusieurs raisons :</p>
<ul>
<li>les functions √† tester ne sont pas accessibles</li>
<li>on doit simuler un <code>click</code> pour tester un comportement logique.</li>
<li>on doit cr√©er un element et modifier sont <code>data-id</code> √† chaque cas souhait√©.</li>
<li>pour tester <code>addToCart</code> on doit aller regarder dans le DOM.</li>
</ul>
<h3 id="1-rendez-accessibles-vos-methodes-au-test-runner"><a class="putainde-Title-anchor" href="#1-rendez-accessibles-vos-methodes-au-test-runner">#</a>1. Rendez accessibles vos m√©thodes au test runner</h3><p>Vous pouvez utiliser un namespace ad√©quat.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> app = <span class="hljs-built_in">window</span>.app = {}
app.cart = {}
app.cart.addToCart = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{ <span class="hljs-comment">/* ‚Ä¶ */</span> }
</code></pre>
<p>Mais ne souhaitez probablement pas rendre vos m√©thodes accessibles √† la console.</p>
<p>Utilisez un module-system : <a href="http://browserify.org">browserify</a> ou
<a href="http://requirejs.org">requirejs</a> (si vous n‚Äôavez pas besoin de chargement
conditionnel et souhaitez cr√©er un bundle par build, utilisez browserify qui
poss√®de une syntaxe beaucoup plus sympathique et une codebase r√©duite, vous
pourrez m√™me <code>require</code> depuis un module npm
<a href="/posts/js/browserify-all-the-things/">comme on vous l‚Äôexplique dans un article d√©di√©</a>).</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> $ = <span class="hljs-built_in">require</span>(<span class="hljs-string">"jquery"</span>) <span class="hljs-comment">// oh, un module npm</span>

<span class="hljs-built_in">module</span>.exports = {
  element : $(<span class="hljs-string">"#cart"</span>),
  addToCart : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">/* ‚Ä¶ */</span>
  }
}
</code></pre>
<p>Vous pourrez ainsi s√©parer proprement votre application en modules et les tester individuellement.</p>
<h3 id="2-oui-mais-les-modules-interdependants-alors-"><a class="putainde-Title-anchor" href="#2-oui-mais-les-modules-interdependants-alors-">#</a>2. Oui, mais les modules interd√©pendants alors ?</h3><p>L√†, √ßa devient un peu plus tricky.
Ce que je conseille √† titre personnel c‚Äôest d‚Äôutiliser des events
pour faire communiquer les diff√©rentes parties de l‚Äôapplication.</p>
<p>Cela permet d‚Äô√©viter d‚Äôutiliser des mocks d‚Äôautres parties de l‚Äôapplication partout.</p>
<p>Par exemple, si je souhaite tester le fait qu‚Äôun click sur <code>.js-updateCart</code>
d√©clanchera bien <code>updateCart</code> :</p>
<pre><code class="lang-javascript"><span class="hljs-comment">//view.js</span>

<span class="hljs-comment">// view est une petite class qui route les events</span>
<span class="hljs-comment">// en rendant les listeners accessibles aux tests</span>
<span class="hljs-comment">// vous pouvez tr√®s facilement en concevoir une</span>
<span class="hljs-comment">// √† votre go√ªt en quelques lignes de code</span>
<span class="hljs-keyword">var</span> view = <span class="hljs-built_in">require</span>(<span class="hljs-string">"../lib/view"</span>)

<span class="hljs-comment">// eventbus est l'event bus de l'application, il orchestre</span>
<span class="hljs-comment">// la communication entre les diff√©rents modules</span>
<span class="hljs-keyword">var</span> eventbus = <span class="hljs-built_in">require</span>(<span class="hljs-string">"../eventbus"</span>)

<span class="hljs-keyword">var</span> $ = <span class="hljs-built_in">require</span>(<span class="hljs-string">"jquery"</span>)

<span class="hljs-built_in">module</span>.exports = view.extend({
  element : <span class="hljs-built_in">document</span>.body,
  events : [
    {
      type : <span class="hljs-string">"click"</span>,
      selector : <span class="hljs-string">".js-addToCart"</span>,
      listener : <span class="hljs-string">"addToCart"</span>
    }
  ],
  addToCart : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(eventObject)</span></span>{
    <span class="hljs-keyword">var</span> target = eventObject.currentTarget
    <span class="hljs-keyword">var</span> id = $(target).data(<span class="hljs-string">"id"</span>)
    eventbus.fire(<span class="hljs-string">"addToCart"</span>, {
      id : id
    })
  }
})
</code></pre>
<p>et je n‚Äôaurais qu‚Äô√† √©couter cet event depuis <code>cart</code> :</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// cart.js</span>
<span class="hljs-keyword">var</span> eventbus = <span class="hljs-built_in">require</span>(<span class="hljs-string">"../eventbus"</span>)
<span class="hljs-keyword">var</span> catalog = <span class="hljs-built_in">require</span>(<span class="hljs-string">"../catalog"</span>)

<span class="hljs-built_in">module</span>.exports = {
  initialize : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">this</span>._addToCart = <span class="hljs-keyword">this</span>.addToCart.bind(<span class="hljs-keyword">this</span>)
    eventbus.listen(<span class="hljs-string">"addToCart"</span>, <span class="hljs-keyword">this</span>._addToCart)
  },
  release : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    eventbus.stopListening(<span class="hljs-string">"addToCart"</span>, <span class="hljs-keyword">this</span>._addToCart)
  },
  addToCart : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(eventObject)</span></span>{
    <span class="hljs-comment">// et on a eventObject.id</span>
    <span class="hljs-keyword">this</span>.products.push(catalog[eventObject.currentTarget.data(<span class="hljs-string">"id"</span>)])
  }
}
</code></pre>
<p>Gr√¢ce √† cette architecture, je vais pouvoir tester individuellement
les deux modules.</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// view.test.js</span>

<span class="hljs-keyword">var</span> tape = <span class="hljs-built_in">require</span>(<span class="hljs-string">"tape"</span>)
<span class="hljs-keyword">var</span> view = <span class="hljs-built_in">require</span>(<span class="hljs-string">"../app/view"</span>)
<span class="hljs-keyword">var</span> eventbus = <span class="hljs-built_in">require</span>(<span class="hljs-string">"../eventbus"</span>)
<span class="hljs-keyword">var</span> $ = <span class="hljs-built_in">require</span>(<span class="hljs-string">"jquery"</span>)

tape(<span class="hljs-string">"view"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(test)</span></span>{
  test.plan(<span class="hljs-number">1</span>)
  <span class="hljs-keyword">var</span> element = $(<span class="hljs-string">"&lt;div&gt;&lt;/div&gt;"</span>)
  element.data(<span class="hljs-string">"id"</span>, <span class="hljs-number">1</span>)
  <span class="hljs-comment">// on teste facilement l'envoi</span>
  eventbus.listen(<span class="hljs-string">"addToCart"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(eventObject)</span></span>{
    test.equal(eventObject.id, <span class="hljs-number">1</span>)
  })
  view.addToCart({
    currentTarget : element
  })
})
</code></pre>
<pre><code class="lang-javascript"><span class="hljs-comment">// cart.test.js</span>

<span class="hljs-keyword">var</span> tape = <span class="hljs-built_in">require</span>(<span class="hljs-string">"tape"</span>)
<span class="hljs-keyword">var</span> cart = <span class="hljs-built_in">require</span>(<span class="hljs-string">"../app/cart"</span>)
<span class="hljs-keyword">var</span> eventbus = <span class="hljs-built_in">require</span>(<span class="hljs-string">"../eventbus"</span>)
<span class="hljs-keyword">var</span> catalog = <span class="hljs-built_in">require</span>(<span class="hljs-string">"../catalog"</span>)

tape(<span class="hljs-string">"cart"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(test)</span></span>{
  cart.initialize()
  eventbus.fireSync(<span class="hljs-string">"addToCart"</span>, {id:<span class="hljs-number">1</span>})
  test.deepEqual(
    cart[<span class="hljs-number">0</span>],
    catalog[<span class="hljs-number">1</span>],
    <span class="hljs-string">"receives addToCart event"</span>
  )
  test.end()
})
</code></pre>
<h2 id="tester-tous-les-cas-possibles"><a class="putainde-Title-anchor" href="#tester-tous-les-cas-possibles">#</a>Tester tous les cas possibles</h2><p>Ce sont souvent les edge-cases qui nous font nous arracher les cheveux.
Pour pallier ces soucis, tester en profondeur est essentiel.</p>
<p>Prenons un exemple, une m√©thode qui teste si la valeur qu‚Äôon lui passe est
une <code>string</code>.</p>
<p>On serait tent√© de simplement tester les r√©sultats positifs de cette fa√ßon :</p>
<pre><code class="lang-javascript">tape(<span class="hljs-string">"type.isString on strings"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(test)</span></span>{
  test.equal(<span class="hljs-built_in">type</span>.isString(<span class="hljs-string">""</span>), <span class="hljs-keyword">true</span>)
  test.<span class="hljs-keyword">end</span>()
})
</code></pre>
<p>Or, si par m√©garde ma m√©thode <code>isString</code> se r√©v√®le √™tre :</p>
<pre><code class="lang-javascript">type.isString = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value)</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value == <span class="hljs-string">"string"</span>
}
</code></pre>
<p>on ne v√©rifie pas le cas <code>type.isString(new String(&quot;&quot;))</code>.</p>
<p>Du coup, des tests complets :</p>
<pre><code class="lang-javascript">tape(<span class="hljs-string">"type.isString on strings"</span>, <span class="hljs-keyword">function</span>(test){
  test.equal(<span class="hljs-class"><span class="hljs-keyword">type</span>.<span class="hljs-title">isString</span></span>(<span class="hljs-string">""</span>), <span class="hljs-keyword">true</span>)
  test.equal(<span class="hljs-class"><span class="hljs-keyword">type</span>.<span class="hljs-title">isString</span></span>(<span class="hljs-keyword">new</span> String(<span class="hljs-string">""</span>)), <span class="hljs-keyword">false</span>)
  test.<span class="hljs-keyword">end</span>()
})
</code></pre>
<p>permettent ici d‚Äôidentifier qu‚Äôen r√©alit√© on a besoin de :</p>
<pre><code class="lang-javascript"><span class="hljs-built_in">type</span>.isString = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value)</span> {</span>
  <span class="hljs-keyword">return</span> Object.prototype.toString.<span class="hljs-built_in">call</span>(value) == <span class="hljs-string">"[object String]"</span>
}
</code></pre>
<p>Et c‚Äôest √† la force des r√©sultats de tests que vous identifierez rapidement
vous familiariserez √† tous ces edge-cases.</p>
<p>√Ä chaque correctif de bug, ajoutez des tests (mais √ßa, vous le saviez d√©j√†).</p>
<h2 id="cross-browser-testing"><a class="putainde-Title-anchor" href="#cross-browser-testing">#</a>Cross-browser testing</h2><p>√Ä l‚Äôheure actuelle, o√π l‚Äôon se trouve notamment tr√®s souvent avec du
feature testing.
Pour le tester compl√®tement, on doit se servir de vrais navigateurs :
un headless (certes, tr√®s pratique) comme <a href="http://phantomjs.org">phantomjs</a>
ne permettra pas d‚Äôobtenir 100% de coverage.</p>
<pre><code class="lang-javascript">var supportsAnimationFrame =
  !!(
    win.requestAnimationFrame <span class="hljs-string">||</span>
    win.webkitRequestAnimationFrame <span class="hljs-string">||</span>
    win.mozRequestAnimationFrame <span class="hljs-string">||</span>
    win.ORequestAnimationFrame <span class="hljs-string">||</span>
    <span class="hljs-comment">// vous avez fait une faute de frappe,</span>
    <span class="hljs-comment">// et mis un `O` majuscule, seul un</span>
    <span class="hljs-comment">// test sur les version concern√©es d'Opera</span>
    <span class="hljs-comment">// vous permettront de l'identifier</span>
    win.msRequestAnimationFrame
  )
</code></pre>
<p>De plus, vous pouvez par habitude √™tre tent√© d‚Äôutiliser un
<code>Array.prototype.forEach</code> alors que votre scope navigateur inclut
IE8; seuls des tests sur un vrai browser vous permettront d‚Äôidentifier le souci.</p>
<p>Je vous conseille fortement testling, tr√®s simple √† int√©grer dans vos
modules, et gratuit pour tout projet open-source.</p>
<p>Dans le <code>package.json</code> :</p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">testling</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">files</span>": <span class="hljs-value"><span class="hljs-string">"test/**/*.js"</span></span>,
    "<span class="hljs-attribute">browsers</span>": <span class="hljs-value">[
      <span class="hljs-string">"ie/9..latest"</span>,
      <span class="hljs-string">"chrome/22..latest"</span>,
      <span class="hljs-string">"firefox/16..latest"</span>,
      <span class="hljs-string">"safari/6..latest"</span>,
      <span class="hljs-string">"opera/11.0..latest"</span>,
      <span class="hljs-string">"iphone/6..latest"</span>,
      <span class="hljs-string">"ipad/6..latest"</span>,
      <span class="hljs-string">"android-browser/latest"</span>
    ]
  </span>}
</span>}
</code></pre>
<p>Et ajouter un webhook dans l‚Äôadmin de votre repository GitHub pointant vers</p>
<blockquote>
<p><a href="http://git.testling.com">http://git.testling.com</a></p>
</blockquote>
<p>Vous pouvez l‚Äôutiliser avec tape (son test harness par d√©faut)
Mocha, QUnit et n‚Äôimporte quelle biblioth√®que
de test supportant <code>TAP</code> comme indiqu√© sur
<a href="https://ci.testling.com/guide/custom_libraries">le site de testling</a>.</p>
<p>Vous trouverez aussi des alternatives populaires
<a href="http://www.browserstack.com">similaires</a>,
ou ayant <a href="http://karma-runner.github.io">une approche diff√©rente</a>.</p>
<p>Par ailleurs, si dans votre code il existe des variations entre les navigateurs,
vous pouvez utiliser du test conditionnel :</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">if</span>(typeof {}.__proto__ == <span class="hljs-string">"object"</span>){
  test.equal(<span class="hljs-keyword">list</span>.__proto__ === <span class="hljs-keyword">Array</span>.prototype, <span class="hljs-keyword">false</span>, <span class="hljs-string">"__proto__ isn't Array.prototype"</span>)
} <span class="hljs-keyword">else</span> {
  test.equal(<span class="hljs-keyword">list</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-keyword">Array</span>, <span class="hljs-keyword">false</span>, <span class="hljs-string">"Isn't a window Array"</span>)
}
</code></pre>
<p>Happy testing!</p>
<pre><code class="lang-shell">$ testling

TAP version <span class="hljs-number">13</span>
<span class="hljs-preprocessor"># tests</span>
ok <span class="hljs-number">1</span> bisous

<span class="hljs-number">1.</span><span class="hljs-number">.1</span>
<span class="hljs-preprocessor"># tests 1</span>
<span class="hljs-preprocessor"># pass  1</span>

<span class="hljs-preprocessor"># ok</span>
</code></pre>

]]></description><pubDate>Thu, 01 May 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/js/introduction-au-testing-js-front/</link><guid isPermaLink="true">http://putaindecode.fr/posts/js/introduction-au-testing-js-front/</guid></item><item><title>Introduction √† Gulp</title><description><![CDATA[
<p>Vous commencez tous √† connaitre les <em>tasks runners</em>, ces outils qui permettent
d‚Äôautomatiser les t√¢ches de d√©veloppement r√©currentes.
Personnellement
 <a href="http://moox.io/slides/2013/grunt-before-after/">je n‚Äôai</a>
 <a href="http://www.24joursdeweb.fr/2013/automatisez-votre-workflow-front-end/">pas arr√™t√©</a>
 <a href="http://moox.io/slides/2014/introduction-gulp/">d‚Äôen parler</a>
 depuis que
 <a href="/posts/js/premiers-pas-avec-grunt/">Grunt</a>
 √† d√©terr√© cette vielle probl√©matique, assez r√©cente pour le d√©veloppement Web c√¥t√© front end.</p>
<p>Il faut avouer que de par l‚Äô√©volution du d√©veloppement Web, c√¥t√© front end,
on voit beaucoup de personnes qui n‚Äôont pas de vraies bases de d√©veloppeur.
Je veux dire par l√† non pas que ces personnes sont incomp√©tentes, mais plut√¥t
qu‚Äôil manque parfois la bonne flemme du d√©veloppeur, celle qui le pousse √† <strong>d√©velopper</strong>
des solutions techniques pour mieux d√©velopper des produits.
Il manque un peu <a href="http://fr.wiktionary.org/wiki/algorithmie">d‚Äôalgorithmie</a>
dans les veines, de curiosit√© et d‚Äôamour du risque.
Ce n‚Äôest pas en restant dans sa zone de confort qu‚Äôon va de l‚Äôavant. Enfin si vous
avez des exemples contraires, je suis preneur.
Mais tout cela doit provenir du fait que pas mal de m√©tiers dans le web sont nouveaux,
dont celui de ¬´ d√©veloppeur Web front end ¬ª et que du coup, peu de personnes ont
initialement suivi des formations appropri√©s (pour ma part je proviens d‚Äôune
formation <em>d‚Äôanalyste-programmeur</em>, conception et d√©veloppement software quoi).
Je remarque que niveau back end il y a beaucoup moins de lacunes, du fait que
les probl√©matiques g√©r√©es de ce c√¥t√© sont (il me semble) moins nouvelles.</p>
<p>Bref. Je ne vais pas m‚Äô√©terniser sur une intro du pourquoi on met en place un task
runner, ni faire une comparaison entre Make, Rake, Cake, Jake, Grunt, Brunch
et Broccoli.
Rentrons dans le vif. Parlons Gulp.</p>
<h1 id="pourquoi-gulp"><a class="putainde-Title-anchor" href="#pourquoi-gulp">#</a>Pourquoi Gulp</h1><p>Je vais faire court. Pour faire simple, son point fort r√©side dans le fait qu‚Äôil utilise des
<a href="http://dailyjs.com/2012/09/10/streams/">streams</a> (tl;dr: un flux de donn√©es - en m√©moire)
et qu‚Äôil limite au maximum l‚Äôutilisation de fichiers.
Au point qu‚Äôil existe une <a href="https://github.com/godaddy/gulp-header/issues/4#issuecomment-32111457">police Gulp</a>
pour vous dire.
Si vous voulez en savoir plus sur les streams, n‚Äôh√©sitez pas √† lire l‚Äôarticle de
Nicolas Froidure <a href="http://www.insertafter.com/articles-gulp_vs_grunt.html">Gulp remplacera-t-il Grunt ?</a>
qui contient une partie explicative sur les streams.</p>
<p>Dans la pratique cela √©vite d‚Äôavoir un gruntfile qui, si on imagine une task
sass -&gt; autoprefixer -&gt; csso, passe <a href="/posts/css/mise-en-place-autoprefixer/#autoprefixer-avec-grunt">3 fois par des lectures/√©critures sur le syst√®me
de fichiers</a>.</p>
<figure>
  <img src="http://jaysoo.ca/images/grunt-flow-2.png" alt="">
  <figcaption>Sans stream</figcaption>
</figure>

<p>Et du coup au lieu d‚Äôavoir un fichier de conf d‚Äôune soixantaine de lignes, on arrive
√† avoir <a href="http://putaindecode.fr/posts/css/mise-en-place-autoprefixer/#autoprefixer-avec-gulp">quelque chose de concis</a>
(une vingtaine de ligne seulement).</p>
<figure>
  <img src="http://jaysoo.ca/images/gulp-flow.png" alt="">
  <figcaption>Avec stream</figcaption>
</figure>

<h2 id="installation"><a class="putainde-Title-anchor" href="#installation">#</a>Installation</h2><p>Pour avoir la commande globale sur le syst√®me (comme grunt-cli) :</p>
<pre><code class="lang-shell"><span class="hljs-variable">$ </span>npm i -g gulp
</code></pre>
<p>Ensuite dans votre projet :</p>
<pre><code class="lang-shell"><span class="hljs-variable">$ </span>npm i -<span class="hljs-constant">D</span> gulp gulp-util gulp-plumber gulp-<span class="hljs-constant">WHATEVER</span>
</code></pre>
<p><em>Note : <code>npm i -D</code> == <code>npm install --save-dev</code>, c‚Äôest cadeau.</em></p>
<p>Bon dans mon exemple j‚Äôai mis un peu n‚Äôimporte quoi, donc on va faire un mini workflow de hipster hacker.</p>
<h2 id="utilisation"><a class="putainde-Title-anchor" href="#utilisation">#</a>Utilisation</h2><p>On part avec une t√¢che tr√®s simple : pr√©-processeur CSS <a href="http://www.myth.io">Myth</a> et
optimisation avec <a href="https://github.com/css/csso">CSSO</a>.</p>
<pre><code class="lang-shell"><span class="hljs-variable">$ </span>mkdir putaindegulp &amp;&amp; cd putaindegulp
<span class="hljs-variable">$ </span>npm init
<span class="hljs-variable">$ </span>npm i -<span class="hljs-constant">D</span> gulp gulp-util gulp-plumber gulp-myth gulp-csso minimist
</code></pre>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> gulp = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp"</span>)
<span class="hljs-keyword">var</span> gutil = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-util"</span>)
<span class="hljs-keyword">var</span> plumber = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-plumber"</span>)
<span class="hljs-keyword">var</span> myth = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-myth"</span>)
<span class="hljs-keyword">var</span> csso = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-csso"</span>)
<span class="hljs-keyword">var</span> options = <span class="hljs-built_in">require</span>(<span class="hljs-string">"minimist"</span>)(process.argv.slice(<span class="hljs-number">2</span>))

gulp.task(<span class="hljs-string">"styles"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  gulp.src(<span class="hljs-string">"./src/css/*.css"</span>)
    .pipe(options.production ? plumber() : gutil.noop())
    .pipe(myth({sourcemap: !options.production}))
    .pipe(options.production ? csso() : gutil.noop())
    .pipe(gulp.dest(<span class="hljs-string">"./dist/css/"</span>))
})

gulp.task(<span class="hljs-string">"default"</span>, [<span class="hljs-string">"styles"</span>], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  gulp.watch(<span class="hljs-string">"./src/css/**/*"</span>, [<span class="hljs-string">"styles"</span>])
})
</code></pre>
<p>Voil√† c‚Äôest tout. Et heureusement.</p>
<p>Bon, on se refait l‚Äôexemple comment√© :</p>
<pre><code class="lang-js"><span class="hljs-comment">// bah l√† ok, on est oblig√© d'y passer pour avoir l'API Gulp</span>
<span class="hljs-keyword">var</span> gulp = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp"</span>)

  <span class="hljs-comment">// √áa c'est optionnel, c'est pour avoir (entre autres la m√©thode noop())</span>
  <span class="hljs-comment">// je reviens dessus apr√®s</span>
  <span class="hljs-comment">// https://github.com/gulpjs/gulp-util</span>
<span class="hljs-keyword">var</span> gutil = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-util"</span>)

  <span class="hljs-comment">// L√† on a Mario le plombier qui fixe la tuyauterie foireuse.</span>
  <span class="hljs-comment">// Ce plugin patch le probl√®me de stream avec node.js qui fait que tout le process</span>
  <span class="hljs-comment">// explose √† la moindre erreur (pas pratique en cas de watch par exemple)</span>
  <span class="hljs-comment">// en gros, il remplace la m√©thode pipe et attrape les erreurs pour les ressortir gentiment</span>
  <span class="hljs-comment">// https://gist.github.com/floatdrop/8269868</span>
<span class="hljs-keyword">var</span> plumber = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-plumber"</span>)

  <span class="hljs-comment">// Ici, rien de magique, du plugin en veux-tu en voil√†</span>
<span class="hljs-keyword">var</span> myth = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-myth"</span>)
<span class="hljs-keyword">var</span> csso = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-csso"</span>)

  <span class="hljs-comment">// ici on chope les options de la ligne de commande</span>
  <span class="hljs-comment">// exemple: pour avoir options.production √† true,</span>
  <span class="hljs-comment">// il suffit de faire `gulp --production`</span>
<span class="hljs-keyword">var</span> options = <span class="hljs-built_in">require</span>(<span class="hljs-string">"minimist"</span>)(process.argv.slice(<span class="hljs-number">2</span>))

<span class="hljs-comment">// D√©finition d'une t√¢che, un nom et une fonction.</span>
<span class="hljs-comment">// Ce qui est pratique c'est le fait de pouvoir mettre ce qu'on veut</span>
<span class="hljs-comment">// y compris un console.log() ^^</span>
<span class="hljs-comment">// un autre param√®tre peut √™tre ajout√© avant la fonction, qui permet de pr√©ciser</span>
<span class="hljs-comment">// les d√©pendances (cf task dev plus bas par exemple)</span>
gulp.task(<span class="hljs-string">"styles"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

  <span class="hljs-comment">// Ici on attrape les fichiers (glob classique)</span>
  <span class="hljs-comment">// √† la racine (on va consid√©rer que nos fichiers finaux ne seront pas dans</span>
  <span class="hljs-comment">// des sous dossiers, r√©serv√©s aux partials &amp; co)</span>
  gulp.src(<span class="hljs-string">"./src/css/*.css"</span>)

    <span class="hljs-comment">// On utilise plumber que si on build en dev, sinon faut que √ßa p√™te, qu'on</span>
    <span class="hljs-comment">// soit pr√©venu lors d'un build pour la prod</span>
    .pipe(options.production ? plumber() : gutil.noop())

    <span class="hljs-comment">// Et l√† on pipe nos plugins</span>
    <span class="hljs-comment">// toujours en jouant avec les options si besoin</span>
    .pipe(myth({sourcemap: !options.production}))
    .pipe(options.production ? csso() : gutil.noop())

    <span class="hljs-comment">// Super important, on convertit nos streams en fichiers</span>
    .pipe(gulp.dest(<span class="hljs-string">"./dist/css/"</span>))
})

<span class="hljs-comment">// Ici on a une t√¢che de dev qui lance un watch APRES avoir ex√©cut√© `styles` une fois</span>
gulp.task(<span class="hljs-string">"default"</span>, [<span class="hljs-string">"styles"</span>], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

  <span class="hljs-comment">// gulp.watch est natif (pas comme avec grunt)</span>
  <span class="hljs-comment">// vous noterez qu'ici par exemple on va surveiller tous les fichiers</span>
  <span class="hljs-comment">// et non pas ceux juste √† la racine par exemple</span>
  gulp.watch(<span class="hljs-string">"./src/css/**/*"</span>, [<span class="hljs-string">"styles"</span>])
})

<span class="hljs-comment">// Comme grunt, `gulp` sans argument lancera la t√¢che `default`.</span>
</code></pre>
<p>Bien entendu, vous avez d√©j√† compris que si vous voulez remplacer Myth par Sass,
c‚Äôest l‚Äôhistoire de 4 secondes.</p>
<h2 id="putain-de-code-approuve-gulp-"><a class="putainde-Title-anchor" href="#putain-de-code-approuve-gulp-">#</a>Putain de Code approuve Gulp.</h2><p>Ici on est carr√©ment fan de Gulp. Il faut bien avouer que
<a href="https://twitter.com/putaindecode/status/460868992396460032">√ßa va vite</a>
(encore plus appr√©ciable lorsque l‚Äôon n‚Äôa pas de SSD) et que c‚Äôest plaisant √† √©crire.
Pas de configurations pas sp√©cialement verbeuse et trop espac√©e.
Avec Gulp on se sent plus libre, moins contraint.
Du coup, <strong>on a carr√©ment fait notre site avec Gulp</strong>
(puis au passage un petit refresh graphique tant qu‚Äô√† faire).</p>
<p>Pour aller plus loin, vous n‚Äôavez qu‚Äô√† ouvrir notre <a href="https://github.com/putaindecode/website/blob/master/Gulpfile.js">Gulpfile</a>
et regarder nos <a href="https://github.com/putaindecode/website/tree/master/tasks">tasks</a>
qui vont de <a href="https://github.com/putaindecode/website/blob/master/tasks/clean.js">la plus simple</a>
√† <a href="https://github.com/putaindecode/website/blob/master/tasks/contributors.js">la plus compliqu√©</a>.</p>
<p>Pour voir des t√¢ches plus ¬´ real world example ¬ª je vous invite √† regarder les tasks suivantes :</p>
<ul>
<li><a href="https://github.com/putaindecode/website/blob/master/tasks/server.js">server</a>,
le server de dev local avec livereload dedans ;</li>
<li><a href="https://github.com/putaindecode/website/blob/master/tasks/watch.js">watch</a>,
le classique et si simple watcher ;</li>
<li><a href="https://github.com/putaindecode/website/blob/master/tasks/publish.js">publish</a>,
la t√¢che pour publier le dossier <code>dist/</code> sur les <a href="https://pages.github.com/">gh-pages</a> ;</li>
<li><a href="https://github.com/putaindecode/website/blob/master/tasks/icons.js">icons</a>,
qui transforme des SVG en fontes d‚Äôicones avec le bout de CSS qui va bien ;</li>
<li><a href="https://github.com/putaindecode/website/blob/master/tasks/scripts-linting.js">scripts-linting</a>,
qui v√©rifie la qualit√© du code ;</li>
<li><a href="https://github.com/putaindecode/website/blob/master/tasks/scripts.js">scripts</a>,
du <a href="/posts/js/browserify-all-the-things/">browserify</a> pour nos JS c√¥t√© client ;</li>
<li><a href="https://github.com/putaindecode/website/blob/master/tasks/stylesheets.js">stylesheets</a>,
notre t√¢che qui m√©lange (pour l‚Äôinstant) Stylus et Rework (suite √† une rixe √† la r√©cr√©, on n‚Äôa pas r√©ussi √† se mettre d‚Äôaccord, donc chacun √† rajout√© son morceau) ;</li>
</ul>
<p>Bien entendu, si vous ne comprenez pas certaines parties, n‚Äôh√©sitez pas √†
<a href="https://github.com/putaindecode/website/issues/new">ouvrir une issue</a>
pour demander des explications.</p>
<h2 id="vous-reprendrez-bien-un-peu-de-gulp-pardon-"><a class="putainde-Title-anchor" href="#vous-reprendrez-bien-un-peu-de-gulp-pardon-">#</a>Vous reprendrez bien un peu de‚Ä¶ Gulp* ! Pardon.</h2><p>Si vous avez encore envie de d√©tails je vous renvoie sur l‚Äôarticle anglais
<a href="http://markgoodyear.com/2014/01/getting-started-with-gulp/">Getting started with gulp</a>
qui d√©taille tellement bien chaque point que m√™me un anglophobe comprendrait.</p>
<p>Vous avez aussi
<a href="https://github.com/gulpjs/gulp/blob/master/docs/README.md">une documentation</a>
tr√®s bien faite, qui comporte carr√©ment
<a href="https://github.com/gulpjs/gulp/tree/master/docs/recipes">des exemples <em>officiels</em> tout pr√™ts</a>.</p>
<p>Comme je vous disais plus t√¥t, les auteurs de Gulp sont assez carr√©s et valident
(ou plut√¥t <em>invalident</em>) <a href="https://www.npmjs.org/search?q=gulpplugin">les plugins</a> qui
ne respectent pas les
<a href="https://github.com/gulpjs/gulp/blob/master/docs/writing-a-plugin/guidelines.md">r√®gles</a>.
Je trouve que c‚Äôest gage de qualit√©.</p>
<p>Pour finir quelques liens pour ceux qui en veulent toujours plus :</p>
<ul>
<li><a href="http://www.insertafter.com/articles-retour_experience_gulp.html">Gulp : Retour d‚Äôexp√©rience</a></li>
<li><a href="http://jaysoo.ca/2014/01/27/gruntjs-vs-gulpjs/">Grunt vs. Gulp, au-del√† des chiffres</a> (anglais)</li>
</ul>
<pre><code class="lang-shell"><span class="hljs-variable">$ </span>gulp bisous
‚ùØ ‚ô° üòò
</code></pre>

]]></description><pubDate>Tue, 29 Apr 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/js/introduction-gulp/</link><guid isPermaLink="true">http://putaindecode.fr/posts/js/introduction-gulp/</guid></item><item><title>Les post-processeurs CSS</title><description><![CDATA[
<p>Vous avez surement entendu parler des <a href="http://iamvdo.me/blog/les-postprocesseurs-css"><em>post-processeurs CSS</em></a>.
J‚Äôai personnellement pas mal fait r√©f√©rence √† <del>ce concept</del> cette expression ces derniers temps.
Que ce soit lorsque je vous racontais
<a href="/posts/css/comment-en-finir-avec-les-prefixes/">comment se passer des pr√©fixes CSS</a>
ou lors
<a href="/posts/css/le-point-sur-les-preprocesseurs/">d‚Äôun point sur les pr√©-processeurs CSS</a>.
N‚Äôy a-t-il rien qui vous a fait tiquer ?</p>
<h2 id="du-post-processing-"><a class="putainde-Title-anchor" href="#du-post-processing-">#</a>Du post-processing ?</h2><p>Bon on va pas jouer sur les mots mais quand m√™me un peu. <em>Post</em> √ßa veut dire apr√®s.
Mais apr√®s quoi ? Apr√®s du <em>processing</em>. Donc en th√©orie apr√®s que la feuille de
style ait √©t√© trait√©e.</p>
<p>Si on revient sur <em>pr√©-processeurs</em>, on a quelques choses de sens√©.
On travaille sur la feuille de style avant qu‚Äôelle n‚Äôait √©t√© trait√©e.
Trait√©e par qui ? Je dirais le navigateur pas vous ?
Dans ce cas le pr√©-processing est tout √† fait logique.</p>
<p>Mais le post-processing ? Du vrai post-processing √ßa existe ? Oui et √ßa ressemblerait √† √ßa par exemple :
<a href="http://jsfiddle.net/yyx990803/B5JTg/">Interpolation de CSS avec Vue.js</a> (enfin je crois).
Ici on a un process sur du CSS existant, d√©j√† trait√© par le navigateur.</p>
<p>Bon ok j‚Äôavoue que je pinaille un peu. On pourrait consid√©rer que le ‚Äúprocess‚Äù,
c‚Äôest le fait d‚Äôam√©liorer sa feuille de style et dans ce cas, on pourrait accepter pr√©- et post-process.
Mais √ßa reste pas super exact de mon point de vue.</p>
<p>Du coup on appelle √ßa comment les post-processeurs ?
Devrait-on appeler √ßa du <em>post-pr√©-processing</em> ? Je vous le demande.</p>
<p>Assez plaisant√©, passons donc √† l‚Äôexplication de ce qu‚Äôon appelera le <em>post-processing.</em></p>
<h2 id="le-post-processing"><a class="putainde-Title-anchor" href="#le-post-processing">#</a>Le post-processing</h2><p>Quel est la diff√©rence avec du pr√©-processing ? Pour r√©pondre √† cette question,
il faut bien d√©finir ce qu‚Äôest le pr√©-processing dans notre contexte.</p>
<h3 id="le-pre-processing-css"><a class="putainde-Title-anchor" href="#le-pre-processing-css">#</a>Le pr√©-processing CSS</h3><p>Le pr√©-processing est un pr√©-traitement avant le traitment final. Dans le cas de feuille de style,
on travaille donc sur des pr√©-feuilles de style. Ce ne sont donc pas des feuilles de style.
Comment les diff√©rencie-t-on ? La syntaxe.</p>
<p>Hola hola, calmez-vous. J‚Äôen entends d√©j√† chouiner qu‚Äôavec Sass, Less et Stylus,
on peut coller du CSS valide et √áa Marche‚Ñ¢. Oui √ßa marche. Mais seulement dans ce sens.
Si on essaye de faire parser un <code>@foreach</code>, <code>@include</code> ou ce genre de nouveaut√©s
apport√©s par un pr√©-processeur, votre navigateur il va faire la gueule.</p>
<p>En effet un pr√©-processeur n‚Äôest rien d‚Äôautre qu‚Äôun langage. Un nouveau.
Il ajoute des √©l√©ments √† ce langage, et change m√™me √©ventuellement la syntaxe.
Certes il peut s‚Äôappuyer sur un langage existant (par exemple la syntaxe Scss de Sass, ou la syntaxe Less )
mais √ßa n‚Äôest pas oblig√© (exemple avec l‚Äôancienne syntaxe Sass, ou encore pour changer de registre, CoffeeScript pour du JavaScript).</p>
<h3 id="difference-entre-post-processing-et-pre-processing"><a class="putainde-Title-anchor" href="#difference-entre-post-processing-et-pre-processing">#</a>Diff√©rence entre post-processing et pr√©-processing</h3><p>Avant de parler des diff√©rences il nous faut un cas concret pour y voir plus clair.
Autoprefixer est un tr√®s bon exemple, mais je vais vous en montrer un encore plus pertinent: les fallbacks REM.
J‚Äôesp√®re que vous connaissez le REM (root EM), cette unit√© CSS tr√®s utile qui permet d‚Äôavoir la souplesse de l‚Äôunit√© EM,
en se basant non sur l‚Äô√©lement parent, mais l‚Äô√©lement root (donc le document).
Cette unit√© CSS n‚Äôest par exemple pas compatible avec IE8, et certain d‚Äôentre vous doivent encore le supporter.</p>
<p>On a donc vu pas mal de mixins genre <code>rem2px()</code> pour ajouter un fallback, via des pr√©-processeurs CSS.
Sauf que l√†, il semble beaucoup plus pertinent de ne pas alourdir son code (car on y ajoute rien d‚Äôint√©ressant),
surtout lorsque c‚Äôest pour supporter de vieux navigateurs.
Et si on pouvait ajouter un petit coup de peinture magique, je dirais m√™me automatique,
afin d‚Äôavoir ce fallback ?</p>
<p>Et bien, on peut. √áa prend 20 secondes, et √ßa fera les choses bien, sans oubli.
Exemple avec <a href="https://github.com/ctalkington/rework-rem-fallback">rework-rem-fallback</a></p>
<pre><code class="lang-js"><span class="hljs-comment">// il faudrait installer les d√©pendances de la fa√ßon suivante</span>
<span class="hljs-comment">// $ npm i rework rework-rem-fallback</span>

<span class="hljs-keyword">var</span> rework = <span class="hljs-keyword">require</span>(<span class="hljs-string">'rework'</span>) <span class="hljs-comment">// le moteur rework, je reviens dessus apr√®s</span>
<span class="hljs-keyword">var</span> remFallback = <span class="hljs-keyword">require</span>(<span class="hljs-string">'rework-rem-fallback'</span>) <span class="hljs-comment">// le plugin rework</span>

  <span class="hljs-comment">// lecture du fichier css</span>
<span class="hljs-keyword">var</span> css = <span class="hljs-keyword">require</span>(<span class="hljs-string">'fs'</span>).readFileSync(<span class="hljs-string">'dist/index.css'</span>, <span class="hljs-string">'utf8'</span>).toString()

  <span class="hljs-comment">// on traite le CSS en indiquant √† rework la source, et le plugin √† utiliser</span>
<span class="hljs-keyword">var</span> out = rework(css).<span class="hljs-keyword">use</span>(remFallback()).toString()

  <span class="hljs-comment">// ici on fait la m√™me chose, mais comme si la font de base √©tait en 14px</span>
<span class="hljs-keyword">var</span> out14 = rework(css).<span class="hljs-keyword">use</span>(remFallback(<span class="hljs-number">14</span>)).toString()
</code></pre>
<p>Avec l‚Äôexemple d‚Äôavant, et ce bout de CSS:</p>
<pre><code class="lang-css"><span class="hljs-class">.main-header</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"> <span class="hljs-number">5rem</span> </span></span></span>}
</code></pre>
<p>‚Ä¶ On obtiendra le r√©sultat suivant:</p>
<pre><code class="lang-css"><span class="hljs-class">.main-header</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"> <span class="hljs-number">80px</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"> <span class="hljs-number">5rem</span></span></span>;
<span class="hljs-rule">}</span></span>
</code></pre>
<p>Notre exemple n‚Äôest pas int√©gr√© dans un
<a href="http://www.24joursdeweb.fr/2013/automatisez-votre-workflow-front-end/">workflow automatis√©</a>,
mais c‚Äôest juste pour vous montrer que c‚Äôest l‚Äôhistoire de 5 lignes de code
et pas autant de lignes que de fois o√π l‚Äôon a <code>rem</code> dans sa feuille de style.</p>
<p>Sexy n‚Äôest-ce pas ?</p>
<p>L‚Äôautre grosse diff√©rence entre le pr√©- et le post-processing, c‚Äôest le langage.
Ce post-processing s‚Äôeffectue apr√®s du pr√©-processing. Donc apr√®s que le pr√©-processeur,
cet autre langage, ait fait son boulot.</p>
<p><strong>Le post-processing s‚Äôeffectue sur du CSS de mani√®re transparente.</strong></p>
<p><em>Ce processing s‚Äôeffectue sur du vrai CSS (disons la syntaxe CSS).</em></p>
<p>Cette syntaxe √©tant tr√®s simple (se r√©sumant principalement √† <code>selecteur { prop: value }</code> - oui y‚Äôa les r√®gles <code>@*</code> en plus je sais),
<a href="https://github.com/reworkcss/css-parse#performance">c‚Äôest tr√®s rapide √† parser</a>.</p>
<h2 id="pourquoi-du-post-processing-"><a class="putainde-Title-anchor" href="#pourquoi-du-post-processing-">#</a>Pourquoi du post-processing ?</h2><p>Comme on vient de le voir avec les 2 points pr√©c√©dents, on a d√©j√† 3 bonnes raisons :</p>
<ul>
<li>la simplicit√© (pour certains cas de figures, c‚Äôest plus pertinent, √ßa √©vite trop de code et des
oublis)</li>
<li>la vitesse</li>
<li>le fait de pouvoir brancher ses propres plugins</li>
</ul>
<p>Je sais pas vous mais moi √ßa me suffit. Et en cherchant mieux, on pourrait s√ªrement trouver d‚Äôautres arguments.
(<em>Rappel : d‚Äôailleurs n‚Äôh√©sitez pas √† modifier cet article si vous en avez</em>).</p>
<h2 id="avec-quoi-doit-on-post-processer-ces-css-"><a class="putainde-Title-anchor" href="#avec-quoi-doit-on-post-processer-ces-css-">#</a>Avec quoi doit-on post-processer ces CSS ?</h2><p>Comme vous avez pu le voir tout √† l‚Äôheure j‚Äôai pris dans un exemple Rework,
mais il existe aussi PostCSS, plus r√©cent.</p>
<h3 id="-a-href-https-github-com-reworkcss-rework-rework-a-"><a class="putainde-Title-anchor" href="#-a-href-https-github-com-reworkcss-rework-rework-a-">#</a><a href="https://github.com/reworkcss/rework">Rework</a></h3><p>Rework a √©t√© initi√© par le grand <a href="https://github.com/visionmedia">TJ Holowaychuck</a>,
cette machine de guerre (<a href="http://www.quora.com/TJ-Holowaychuk-1/How-is-TJ-Holowaychuk-so-insanely-productive">que certains ne pensent m√™me pas humain</a> pour vous dire).
TJ √©tait il fut un temps utilisateur de Sass, il avait donc m√™me commenc√© le
portage de <a href="https://github.com/stunti/sass.js">Sass en Node</a>.
Il a d√ª se rendre compte bien avant nous que ce n‚Äô√©tait finalement pas forc√©ment la meilleure option.
Il a donc d√©velopp√© <a href="https://github.com/LearnBoost/stylus/">Stylus</a> (si, si, c‚Äôest bien lui),
le temps de comprendre qu‚Äôune autre approche √©tait possible (pour info, il ne maintient maintenant plus Stylus).</p>
<p>C‚Äôest donc <a href="https://github.com/reworkcss/rework/commit/0a7be255bfe753d03f93c7072351266fa636e80a">le 1er Septembre 2012 qu‚Äôil pousse la premi√®re version de Rework</a>.</p>
<p>L‚Äôobjectif de Rework n‚Äôest pas sp√©cialement de g√©rer du post-process.
Rework se place comme un manipulateur de CSS, permettant (entre autres) :</p>
<ul>
<li>l‚Äôautomatisation d‚Äôajout des pr√©fixes</li>
<li>la cr√©ation de nouvelles propri√©t√©s</li>
<li>l‚Äôint√©gration d‚Äôimages inline</li>
</ul>
<p>Vous me direz que √ßa ressemble vachement √† un pr√©-processeur n‚Äôest-ce pas ?
Vu l‚Äôhistorique que je viens de vous conter et <a href="https://github.com/reworkcss/rework#plugins">les plugins par d√©faut</a>,
vous aurez bien compris que c‚Äôest l‚Äôid√©e : faire un moteur de pr√©-processeur o√π l‚Äôon y branche des plugins pour ajouter nos propres fonctionnalit√©s.
C‚Äôest gr√¢ce √† ce projet qu‚ÄôAutoprefixer a initialement vu le jour d‚Äôailleurs.</p>
<h3 id="-a-href-https-github-com-ai-postcss-postcss-a-"><a class="putainde-Title-anchor" href="#-a-href-https-github-com-ai-postcss-postcss-a-">#</a><a href="https://github.com/ai/postcss">PostCSS</a></h3><p>Beaucoup plus r√©cent, PostCSS a √©t√© √©crit par l‚Äôauteur d‚ÄôAutoprefixer.</p>
<blockquote>
<p>Heu mais quoi ? Tu viens de nous dire que Autoprefixer utilisait Rework ?!</p>
</blockquote>
<p>Oui <em>c‚Äô√©tait</em> le cas. <em>Utilisait</em>. L‚Äôauteur de PostCSS s‚Äôexplique dans <a href="https://github.com/ai/postcss#rework">son README</a>.
Il y indique que, bien que tr√®s similaire, Rework et PostCSS n‚Äôont pas √©t√© d√©velopp√© pour les m√™mes raisons.
C‚Äôest ce qui explique les diff√©rences au niveau des moteurs.
PostCSS se veut plus pr√©servateur par rapport √† votre source d‚Äôorigine,
et g√®re donc mieux sourcemap, peut conserver votre espacement et indentation,
parse de mani√®re plus s√©curis√© (vu que √ßa se veut mieux g√©rer le code legacy).</p>
<p>Dans la pratique je n‚Äôai jamais eu de probl√®me avec Rework, me souciant peu de la mise en forme de la sortie CSS.
Mais PostCSS semble avoir une API plus haut niveau et plus souple pour mieux travailler les feuilles de styles.</p>
<h3 id="rework-ou-postcss-"><a class="putainde-Title-anchor" href="#rework-ou-postcss-">#</a>Rework ou PostCSS ?</h3><p>Tout d√©pend ce que vous voulez faire. Si vous avez en t√™te l‚Äôid√©e de d√©velopper un outil,
je pencherais plus vers PostCSS. Mais en temps qu‚Äôutilisateur, pour l‚Äôinstant, d√©finitivement Rework.</p>
<p>Ce dernier a clairement beaucoup plus de plugins existants. Voyez par vous-m√™mes :</p>
<ul>
<li><a href="https://www.npmjs.org/search?q=rework">npmjs.org/search?q=rework</a></li>
<li><a href="https://www.npmjs.org/search?q=postcss">npmjs.org/search?q=postcss</a></li>
</ul>
<h2 id="rework-ce-n-est-pas-em-que-em-du-post-processing-"><a class="putainde-Title-anchor" href="#rework-ce-n-est-pas-em-que-em-du-post-processing-">#</a>Rework ce n‚Äôest pas <em>que</em> du post-processing ?</h2><p>Oui en effet, comme je le disais avant, c‚Äôest pas le but. C‚Äôest du ‚Äúprocessing‚Äù.
Pr√©-, post-‚Ä¶ Qu‚Äôest-ce que √ßa change dans le fond hein ?</p>
<p>L‚Äôid√©e, en temps que d√©veloppeur, est d‚Äôam√©liorer le confort d‚Äô√©criture sans contrainte.
Comme je l‚Äôai indiqu√© <a href="/posts/css/le-point-sur-les-preprocesseurs/#mon-avis-sur-les-pr-processeurs">pr√©c√©demment</a>,
j‚Äôai lach√© les pr√©-processeurs ‚Äúclassiques‚Äù ayant l‚Äôimpression d‚Äôutiliser un tank pour tuer une mouche.
Car au fond pour 90% (si ce n‚Äôest plus) d‚Äôentres nous,
que nous faut-il pour bien d√©velopper des feuilles de styles ?
Un peu d‚Äôorganisation, des variables et un poil de math ?
Personnellement je me contente de √ßa. Pour l‚Äôorganisation, je suis devenu fan de BEM
(on vous en parle bient√¥t).</p>
<p><strong>Et en attendant de vraiment pouvoir utiliser les variables CSS associ√© √† <code>calc()</code>,
je reste sur du <em>custom pr√©-processing</em> via Rework avec lequel je peux coder avec la syntaxe des specs (m√™me si c‚Äôest en draft), plus future-proof.</strong></p>
<p>J‚Äôaime conserver la syntaxe CSS et avoir un process ultra-rapide et transparent.</p>
<h3 id="prochaine-etape-faire-son-propre-pre-post-processeur-css-c-est-simple"><a class="putainde-Title-anchor" href="#prochaine-etape-faire-son-propre-pre-post-processeur-css-c-est-simple">#</a>Prochaine √©tape: faire son propre pr√©/post-processeur CSS, c‚Äôest simple</h3><p>Rework ayant un bon petit paquet de plugins d√©j√† existants, c‚Äôest assez simple de <a href="/posts/css/preprocesseur-a-la-carte/">r√©aliser son propre pr√©-processeur</a> via quelques lignes de code seulement.</p>

]]></description><pubDate>Tue, 08 Apr 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/css/les-post-processeurs/</link><guid isPermaLink="true">http://putaindecode.fr/posts/css/les-post-processeurs/</guid></item><item><title>Le point sur les pr√©-processeurs CSS</title><description><![CDATA[
<h2 id="pourquoi-les-pre-processeurs"><a class="putainde-Title-anchor" href="#pourquoi-les-pre-processeurs">#</a>Pourquoi les pr√©-processeurs</h2><p>Voil√† ce que j‚Äôai √©crit en 2011 dans
<a href="http://moox.io/blog/utiliser-des-variables-fonctions-css/">mon premier post sur les pr√©-processeur</a>.
Je venais de d√©couvrir cette notion et j‚Äôavais donc fait le tour de la question.</p>
<blockquote>
<p>Le langage des CSS n‚Äôa pas de c√¥t√© dynamique. C‚Äôest lui avec lequel, √† chaque
fois qu‚Äôon int√®gre une maquette graphique, on doit se taper tout de z√©ro.
Il a beau exister des CSS ¬´ Reset ¬ª, des frameworks CSS, tout un tas de
grilles pr√™te √† l‚Äôemploi, des composants de CSS r√©utilisables avec l‚Äôapproche
objet, je n‚Äôai jamais r√©ellement √©t√© satisfait par ces m√©thodes, que ce soit
√† cause des contraintes qu‚Äôimpose la syntaxe (devoir mettre des classes √† tout
va dans l‚ÄôHTML √ßa peut vite devenir chiant dans un CMS), ou par d‚Äô√©ventuelles
limitations qui obligent √† ¬´ trop ¬ª modifier la source du document (pas assez
de, ou trop de, ou seulement √ßa ne me plait pas comment c‚Äôest fait).</p>
</blockquote>
<p>J‚Äôavais tout dit, m√™me des trucs qu‚Äôaujourd‚Äôhui je pense √™tre des conneries (il
n‚Äôy a que les cons qui ne changent pas d‚Äôavis + c‚Äôest en faisant des erreurs
qu‚Äôon apprend le mieux), mais je reviendrais dessus plus tard.</p>
<p>Du coup on en retire quoi ? Qu‚Äôutiliser un pr√©-processeur se justifie par
l‚Äôajout de fonctionnalit√©s lorsque vous √©crivez des feuilles de style (en tant
que d√©veloppeur). En tant qu‚Äôutilisateur du code produit, cela va permettre
d‚Äôajouter une couche abstraction (ce qui peut poser des probl√®mes, je reviendrais
sur ce point plus tard).</p>
<h2 id="principales-fonctionnalites"><a class="putainde-Title-anchor" href="#principales-fonctionnalites">#</a>Principales fonctionnalit√©s</h2><ul>
<li>variables</li>
<li>fonctions</li>
<li>mixins (permettant de r√©aliser des sorties CSS param√©trables)</li>
<li><code>@import</code> intelligent (pas c√¥t√© client)</li>
<li>nesting (imbrications des s√©lecteurs pour √©viter la r√©p√©tition)</li>
<li>optimisation et abstraction pouss√©e (via les mixins, placeholders et <code>@extend</code>)</li>
</ul>
<p>Anciennement on aurait rajout√© √† cette liste la gestion du CSS 3, mais comme
je l‚Äôexpliquais il y a peu, ce n‚Äôest plus n√©cessaire, on a une m√©thode bien
mieux, rapide et surtout <b>maintenu √† jour</b> avec
<a href="/posts/css/comment-en-finir-avec-les-prefixes/">AutoPrefixer</a></p>
<h2 id="les-principaux-pre-processeurs"><a class="putainde-Title-anchor" href="#les-principaux-pre-processeurs">#</a>Les principaux pr√©-processeurs</h2><h3 id="-a-href-http-sass-lang-com-sass-a-"><a class="putainde-Title-anchor" href="#-a-href-http-sass-lang-com-sass-a-">#</a><a href="http://sass-lang.com/">Sass</a></h3><p>Sass est √† mon avis le plus mature des pr√©-processeurs CSS.
Il poss√®de 2 syntaxes (une indent√©e et une plus proche de CSS).
Ce projet avance √† bon rythme. Niveau fonctionnalit√©s, rien √† dire si ce n‚Äôest que
celui-ci a un petit plus pour avec la feature <code>@content</code> qui permet pour le coup de
passer tout un bloc de propri√©t√©s en param√®tre √† des mixins. Ce qui est super
pratique lorsque l‚Äôon √©crit pas mal de media queries.
(Apr√®s, venez pas me dire qu‚Äôon a plein de fois les media-queries qui se
r√©p√®tent et que ce n‚Äôest pas bien pour la taille du fichier, gzip se chargera de √ßa -
<small><a href="https://twitter.com/kaelig/status/412909849207644160">exemple similaire</a>)</small>.</p>
<p>Le langage Sass poss√®de une impl√©mentation d‚Äôorigine en Ruby mais aussi depuis
quelques temps une impl√©mentation C qui se veut beaucoup plus rapide et portable:
<a href="http://libsass.org/">libsass</a> mais qui est encore un peu en retard niveau
fonctionnalit√© (affaire √† suivre). Surtout depuis la version 3.3 qui poss√®de de
nouvelles fonctionnalit√©s (comme les maps, entre autres).</p>
<p>Avec ce pr√©-processeur, on peut s‚Äô√©loigner pas mal du CSS natif, que ce soit avec
la syntaxe ou l‚Äôaspect programmation (il n‚Äôy a qu‚Äô√† voir des trucs comme
<a href="https://github.com/Team-Sass/modular-scale">modular-scale</a> ou
<a href="https://github.com/HugoGiraudel/SassyMatrix">SassyMatrix</a>).</p>
<p>Bibliot√®ques construites sur Sass :</p>
<ul>
<li><a href="http://compass-style.org/">Compass</a>, solide, bas√© sur Ruby (incompatible libsass),</li>
<li><a href="http://bourbon.io/">Bourbon</a>, plus light mais plus rapide.</li>
</ul>
<h3 id="-a-href-http-lesscss-org-less-a-"><a class="putainde-Title-anchor" href="#-a-href-http-lesscss-org-less-a-">#</a><a href="http://lesscss.org/">LESS</a></h3><p>Je n‚Äôai pas trop envie de parler de ce pr√©-processeur assez classique, qui a fait un
choix assez √©trange pour les variables par exemple (oui, <code>@</code> est un caract√®re
sp√©cial en CSS, c‚Äôest assez √©trange de rajouter une couche avec pour les variables
avec ce dernier).
J‚Äôesp√®re seulement que ceux qui l‚Äôutilisent aujourd‚Äôhui n‚Äôutilise pas le script c√¥t√© client
(ce qui provoquerait un affichage sans CSS si le client n‚Äôa pas JavaScript activ√©).
Bien qu‚Äôil soit populaire, le repository sur GitHub n‚Äôest pas signe de bonne sant√©
√† mes yeux. Voir des pull-requests qui tra√Ænent vielles de plusieurs
<del>mois</del> <ins>ann√©es</ins> me laissent dubitatif‚Ä¶
Puis il n‚Äôy a qu‚Äô√† voir l‚Äôexemple sur la homepage du site avec les box-shadow,
pour voir que ce pr√©-processeur est assez d√©pr√©ci√©.</p>
<p>Ajoutons √† cela le fait que Twitter Boostrap a (enfin) une version Sass‚Ä¶</p>
<p>C√¥t√© fonctionnalit√©s, l‚Äôaspect programmation est assez laborieux avec la fa√ßon dont
sont g√©r√©s les mixins conditionnels. Je passe sur ce point gerbant.</p>
<p>Bibliot√®ques construites sur Less :</p>
<ul>
<li><a href="http://lesshat.madebysource.com/">LESS Hat</a>,</li>
<li><a href="http://www.lesselements.com/">LESS Elements</a>.</li>
</ul>
<h3 id="-a-href-http-learnboost-github-io-stylus-stylus-a-"><a class="putainde-Title-anchor" href="#-a-href-http-learnboost-github-io-stylus-stylus-a-">#</a><a href="http://learnboost.github.io/stylus/">Stylus</a></h3><p>Stylus se veut plus transparent que les autres pr√©-processeurs. C‚Äôest un point
r√©ussi puisqu‚Äôil permet d‚Äôavoir des mixins transparents au niveau √©criture.
Cela peut par contre bien entendu rendre la maintenance et la compr√©hension plus
difficile si on en abuse.
Il permet aussi de coder sans <code>{}</code> ni <code>:</code> ni <code>;</code> (bien que tout cela soit optionnel)</p>
<p>Niveau fonctionnalit√©s cela ne vaut pas Sass. Ici pas de <code>@content</code> ou de maps.</p>
<p>Bibliot√®que construite sur Stylus :</p>
<ul>
<li><a href="http://visionmedia.github.io/nib/">Nib</a></li>
</ul>
<h3 id="alternatives"><a class="putainde-Title-anchor" href="#alternatives">#</a>Alternatives</h3><p>On peut s‚Äôamuser √† faire un pr√©-processeur CSS avec n‚Äôimporte quel langage c‚Äôest
√©vident.
Mais <a href="http://www.alsacreations.com/astuce/lire/1433-utiliser-php-pour-gerer-vos-styles-css.html">les enfants, ne faites pas √ßa.</a>
√Ä moins que vous souhaitiez alourdir vos CSS plus que vous y gagnerez.
Puis si c‚Äôest juste pour ajouter des variables, il existe d‚Äôautres solutions‚Ä¶</p>
<p><em>Note: si vous avez d‚Äôautres pr√©-processeurs int√©ressants, je me ferais un plaisir
de les ajouter ici. Mais bon <a href="https://github.com/putaindecode/website/blob/master/pages/posts/css/le-point-sur-les-preprocesseurs/index.md">vous pouvez aussi le faire tout seul comme un
grand</a>.</em></p>
<h2 id="les-pre-processeurs-sont-ils-vraiment-necessaire-"><a class="putainde-Title-anchor" href="#les-pre-processeurs-sont-ils-vraiment-necessaire-">#</a>Les pr√©-processeurs sont-ils vraiment n√©cessaire ?</h2><blockquote>
<p>Oula. Le mec vient de nous poser un post pour nous parler des pr√©-processeurs,
et il nous sort une question comme √ßa ? Il est o√π le pi√®ge ?</p>
</blockquote>
<p>Si je pose la question c‚Äôest que j‚Äôai une petite r√©ponse par l√†. Et elle ne va
peut-√™tre pas vous plaire.</p>
<p>Je vais revenir sur certains points qui peuvent poser probl√®me avec les pr√©-processeurs.</p>
<h3 id="le-nesting-cay-mal"><a class="putainde-Title-anchor" href="#le-nesting-cay-mal">#</a>Le nesting cay mal</h3><p>Ahh‚Ä¶ Le nesting, c‚Äôest bien pratique lorsque l‚Äôon travaille sur un CMS
(ou n‚Äôimporte quoi ayant un code HTML qu‚Äôon ne maitrise pas facilement)
de pouvoir utiliser le nesting pour pouvoir rapidement produire les s√©lecteurs ad√©quats.
Mais en terme de maintenance et surtout de r√©utilisation, c‚Äôest vraiment √† chier.
Faut dire ce qui est.</p>
<pre><code class="lang-scss"><span class="hljs-input"><span class="hljs-prompt">.widget {
  // titre
  h3 { }

  // widget body
  &gt;</span> div {

    <span class="hljs-regexp">//</span> liste</span>
    ul {

    }
  }
}
</code></pre>
<p>Cet exemple est parfait pour d√©montrer les limites du nesting.
Comment faire si, sur un widget donn√©e, nous avons comme titre un h2 ou h4 ?
Il faut alourdir la CSS. Pareillement, si notre fameuse liste dans le corps n‚Äôest
pas dans la m√™me arborescence que celle d√©crite, il faut √† nouveau alourdir notre CSS.
Sans rentrer dans ces solutions solides (nous parlerons de BEM tr√®s bient√¥t),
cette solution serait bien plus √©l√©gante pour la r√©utilisation :</p>
<pre><code class="lang-css"><span class="hljs-class">.widget</span> <span class="hljs-rules">{<span class="hljs-rule">}</span></span>

  <span class="hljs-class">.widget-title</span> <span class="hljs-rules">{ <span class="hljs-rule">}</span></span>

  <span class="hljs-class">.widget-body</span> <span class="hljs-rules">{ <span class="hljs-rule">}</span></span>

    <span class="hljs-class">.widget-body-list</span> <span class="hljs-rules">{ <span class="hljs-rule">}</span></span>
</code></pre>
<p>Vous remarquerez que j‚Äôai un code ici beaucoup plus compr√©hensible par un nouveau,
mais aussi bien mieux r√©utilisable et surtout, point tr√®s important, non coupl√©
(non d√©pendant) √† notre arborescence HTML (coucou le DOM).
De plus, utiliser le nesting provoque des s√©lecteurs √† rallonges, apr√®s c‚Äôest la
course √† la longueur (et au poids) des s√©lecteurs quand il faut surcharger une
r√®gle h√©rit√©e.
Avec de simple s√©lecteurs, pas de souci de ce genre l√†.</p>
<p><em>ProTip‚Ñ¢ : vous remarquerez que j‚Äôindente mon CSS √† l‚Äôimage des composants, √ßa mange
pas de pain, est cela facilite la lecture, moins lin√©aire.</em></p>
<p>Donc je reviens sur ce que je disais, il faut utiliser pleins de classes dans l‚ÄôHTML.
√áa sert √† √ßa. Votre CSS produit de cette fa√ßon sera bien plus r√©utilisable.</p>
<h3 id="l-abstraction-cay-dangereux"><a class="putainde-Title-anchor" href="#l-abstraction-cay-dangereux">#</a>L‚Äôabstraction cay dangereux</h3><p>On en revient √† la magie. Lorsqu‚Äôon a trop de couche qui cache ce qu‚Äôil y a
r√©ellement sous le capot, <a href="http://linuxfr.org/news/encore-un-exemple-de-code-spaghetti-toyota">on peut vite perdre le contr√¥le</a>.</p>
<p>Et voici <a href="https://github.com/MoOx/compass-recipes/issues/104">un parfait exemple</a>
o√π un utilisateur de ma biblioth√®que <a href="https://github.com/MoOx/compass-recipes">Compass Recipes</a>
avait un probl√®me lorsqu‚Äôil utilisait 2 mixins qui cachaient trop de code.
Dans  notre cas corners-tucked (version coin scotch√©) et background-noise (bruit visuel).
Il en a perdu des choses simples et avait pass√© beaucoup de temps √† se prendre la t√™te
alors que la solution √©tait tr√®s (trop) simple (une histoire entre <code>background-image</code>
et le shorthand <code>background</code>).</p>
<p>Je me laisse souvent attirer par la magie d‚Äôun code, mais mon exp√©rience m‚Äôindique
aujourd‚Äôhui qu‚Äôil ne faut pas abuser de cette partie myst√©rieuse o√π l‚Äôon ne sait
plus ce qui se passe.</p>
<p>Je vous laisse imaginer du nesting cach√© dans des mixins qui utilisent d‚Äôautres mixins
qui font des @extends de placeholders‚Ä¶</p>
<blockquote>
<p>Un grand pouvoir implique de grandes responsabilit√©s.</p>
</blockquote>
<p>Tout est dit. Il faut faire attention. Tr√®s attention.</p>
<h2 id="mon-avis-sur-les-pre-processeurs"><a class="putainde-Title-anchor" href="#mon-avis-sur-les-pre-processeurs">#</a>Mon avis sur les pr√©-processeurs</h2><p>Je pense que les pr√©-processeurs restent utiles mais seulement pour des projets
de tr√®s grosse envergure, qui poss√®de √©norm√©ment de code CSS et/ou extr√™mement dynamique.
Ou que vous utilisez de solutions comme <a href="http://getbootstrap.com/">Bootstrap</a> ou
<a href="http://foundation.zurb.com/">Foundation</a>, chose que je d√©conseille pour autre chose que des prototypes.</p>
<p>De part mon exp√©rience et mon recul (si si j‚Äôen prends je vous jure), je pense que
j‚Äôaurais pu m‚Äôen passer bien plus souvent que j‚Äôai voulu l‚Äôadmettre par le pass√©.
Mais bon comme je dis souvent, quel plaisir de se planter quand ce n‚Äôest pas dans un platane !</p>
<p>Ce qu‚Äôil faut retenir clairement c‚Äôest que ce ne sont pas les pr√©-processeurs qui
vont vous faire √©crire des meilleurs feuilles de styles. C‚Äôest plus un travail sur
une m√©thodologie et  une organisation adapt√©es √† vos besoins qui am√©lioreront
votre quotidien de webdesigner (oui quoi, d√®s qu‚Äôon code du CSS, on peut
utiliser l‚Äôappellation webdesigner sur son CV, √ßa en jette).</p>
<p>J‚Äôai donc longtemps appr√©ci√© les pr√©-processeurs CSS, mais aujourd‚Äôhui je commence
√† leur tourner le dos du fait que je n‚Äôutilise que trop peu de leurs fonctionnalit√©s.
J‚Äô√©vite l‚Äôoverkill quoi.</p>
<p>Quand on voit que des <em>grands</em> de l‚ÄôHTML / CSS comme <a href="http://nicolasgallagher.com/">@necolas</a>
n‚Äôutilise pas de pr√©-processeur, on a de quoi se poser des questions.
Avec une bonne biblioth√®que comme <a href="https://github.com/suitcss/suit/">SUIT CSS</a>,
on s‚Äôen retrouve √† ne manquer que des petites choses.</p>
<p>Que l‚Äôon peut combler.</p>
<p>Avec les post-processeurs par exemple.</p>
<p>J‚Äôai donc √† ce jour moi aussi conserv√© une couche pour ajouter le minimum vital en tant que d√©veloppeur.</p>
<p>Mais ne voulant pas alourdir ce post consacr√© aux pr√©-processeurs CSS,
vous pourrez continuer la lecture au prochain √©pisode qui sera consacr√© aux post-processeurs‚Ä¶</p>
<p><small>(Mamam, t‚Äôas vu ce cliffhanger digne des s√©ries US !)</small></p>
<p><del>Bon promis la prochaine fois je vous en parle des post-processeurs. Pour de vrai.</del>
Chose promise, chose due : <a href="/posts/css/les-post-processeurs/">Les post-processeurs CSS</a></p>

]]></description><pubDate>Tue, 11 Mar 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/css/le-point-sur-les-preprocesseurs/</link><guid isPermaLink="true">http://putaindecode.fr/posts/css/le-point-sur-les-preprocesseurs/</guid></item><item><title>Mise en place d‚Äôautoprefixer</title><description><![CDATA[
<p>Suite √† mon pr√©c√©dent article <a href="/posts/css/comment-en-finir-avec-les-prefixes/">Comment en finir avec les pr√©fixes CSS</a>,
certains sont rest√©s sur leur faim.
Voici donc de rapides exemples de mise en place de cette solution.</p>
<h2 id="installation-d-autoprefixer"><a class="putainde-Title-anchor" href="#installation-d-autoprefixer">#</a>Installation d‚Äôautoprefixer</h2><p>Il vous faudra <a href="http://nodejs.org/">Node.js</a> (qui embarque maintenant <a href="https://www.npmjs.org/">Npm</a>) afin de pouvoir
installer ce nouveau joujou.</p>
<pre><code class="lang-shell"># <span class="hljs-keyword">on</span> install autoprefixer via npm <span class="hljs-keyword">en</span> <span class="hljs-keyword">global</span>
$ npm install --<span class="hljs-keyword">global</span> autoprefixer
# <span class="hljs-keyword">ou</span> pour les fain√©ants
$ npm <span class="hljs-keyword">i</span> -<span class="hljs-keyword">g</span> autoprefixer
</code></pre>
<p>Une fois ceci fait, vous devriez avoir la commande <code>autoprefixer</code> disponible.
On v√©rifie de suite avec <code>autoprefixer -v</code>.</p>
<pre><code class="lang-shell"><span class="hljs-variable">$ </span>autoprefixer -v
autoprefixer <span class="hljs-number">1.0</span>.<span class="hljs-number">20140203</span>
</code></pre>
<p>Vous remarquerez que le num√©ro de version est un peu sp√©cial : il contient une
date en place d‚Äôun num√©ro de patch. Cette date correspond √† la derni√®re mise √†
jour de la base de donn√©es de <em>Can I Use</em>.</p>
<h2 id="utilisation-d-autoprefixer"><a class="putainde-Title-anchor" href="#utilisation-d-autoprefixer">#</a>Utilisation d‚Äôautoprefixer</h2><pre><code class="lang-shell"><span class="hljs-variable">$ </span>autoprefixer *.css
</code></pre>
<p>C‚Äôest aussi simple que √ßa.</p>
<p>En fait non je plaisante, c‚Äôest un tout petit peu plus long car par d√©faut,
comme beaucoup de commandes, vous allez avoir la sortie crach√©e en plein visage.</p>
<p>Pour voir les options, comme d‚Äôhabitude <code>--help</code> ou <code>-h</code> :</p>
<pre><code class="lang-shell"><span class="hljs-variable">$ </span>autoprefixer -h
</code></pre>
<p>On y apprend l‚Äôexistance des options suivantes :</p>
<pre><code>Option<span class="hljs-variable">s:</span>
  -<span class="hljs-keyword">b</span>, --browsers BROWSERS  <span class="hljs-built_in">add</span> prefixes <span class="hljs-keyword">for</span> selected browsers
  -<span class="hljs-keyword">o</span>, --output FILE        <span class="hljs-keyword">set</span> output <span class="hljs-keyword">file</span>
  -<span class="hljs-keyword">d</span>, --dir DIR            <span class="hljs-keyword">set</span> output dir
  -<span class="hljs-keyword">m</span>, --<span class="hljs-built_in">map</span>                generate <span class="hljs-keyword">source</span> <span class="hljs-built_in">map</span>
  -<span class="hljs-keyword">i</span>, --info               show selected browsers <span class="hljs-built_in">and</span> properties
  -<span class="hljs-keyword">h</span>, --<span class="hljs-keyword">help</span>               show <span class="hljs-keyword">help</span> text
  -<span class="hljs-keyword">v</span>, --<span class="hljs-keyword">version</span>            <span class="hljs-keyword">print</span> program <span class="hljs-keyword">version</span>
</code></pre><p>Du coup si on veut faire un coup de commande bien personnalis√©e on pourra faire :</p>
<pre><code class="lang-shell">$ autoprefixer -<span class="hljs-keyword">b</span> <span class="hljs-string">"last 2 versions, &gt; 1%, Explorer 7, Android 2"</span> -<span class="hljs-keyword">o</span> prefixed.css <span class="hljs-built_in">index</span>.css
</code></pre>
<p>Il va par contre nous falloir un fichier css pour tester :</p>
<pre><code class="lang-shell"># <span class="hljs-keyword">on</span> met un peu de CSS dans <span class="hljs-built_in">index</span>.css mani√®re de tester <span class="hljs-keyword">le</span> bouzin
$ <span class="hljs-keyword">echo</span> <span class="hljs-string">"* { box-sizing:border-box}"</span> &gt; <span class="hljs-built_in">index</span>.css
</code></pre>
<p>On peut donc essayer notre commande plus haut qui va remplir le fichier <code>prefixed.css</code></p>
<p>Pour v√©rifier :</p>
<pre><code class="lang-shell">$ <span class="hljs-tag">cat</span> <span class="hljs-tag">prefixed</span><span class="hljs-class">.css</span>
* <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">-webkit-box-sizing</span>:<span class="hljs-value">border-box</span></span>; <span class="hljs-rule"><span class="hljs-attribute">-moz-box-sizing</span>:<span class="hljs-value">border-box</span></span>; <span class="hljs-rule"><span class="hljs-attribute">box-sizing</span>:<span class="hljs-value">border-box</span></span></span>}
</code></pre>
<p>On a bien eu des pr√©fixes ajout√©s en fonction de notre demande (bon rien pour IE
qui n‚Äôest pas pass√© par une version pr√©fix√©)</p>
<p>Par d√©faut, <em>autoprefixer</em> utilise <code>&gt; 1%, last 2 versions, Firefox ESR, Opera 12.1</code> pour les navigateurs.
Je pense que pour la plupart d‚Äôentre vous voudront ajouter ‚ÄúExplorer 8‚Äù √† la liste, mais √ßa
n‚Äôest en th√©orie pas n√©cessaire vu le permier argument qui demande de pr√©fixer tous les navigateurs
dont l‚Äôusage global est sup√©rieur √† 1%. Peut-√™tre Explorer 7 pour certains ?
Faites un tour sur la <a href="http://caniuse.com/usage_table.php">page d√©di√© aux statistiques globales sur CanIUse.com</a> pour avoir une id√©e.</p>
<p>Sinon, pour du petit one shot, un plugin dans votre √©diteur suffira:</p>
<ul>
<li><a href="https://github.com/sindresorhus/atom-autoprefixer">plugin autoprefixer pour Atom</a></li>
<li><a href="https://github.com/sindresorhus/sublime-autoprefixer">plugin autoprefixer pour Sublime Text</a></li>
<li><a href="https://github.com/mikaeljorhult/brackets-autoprefixer">plugin autoprefixer pour Brackets</a></li>
</ul>
<figure>
  <img src="../../../images/posts/sublime-text/autoprefixer.gif" alt="sublime text autoprefixer preview">
  <figcaption>Int√©gration dans Sublime Text</figcaption>
</figure>

<h2 id="automatisation-d-autoprefixer-autoception-"><a class="putainde-Title-anchor" href="#automatisation-d-autoprefixer-autoception-">#</a>Automatisation d‚Äôautoprefixer (autoception)</h2><p>Bien entendu on va pas se taper la commande √† la main tout le temps hein‚Ä¶
Il nous faut automatiser nos processus. Sans quoi on perd du temps, et
<a href="http://deboutlesgens.com/blog/jai-pas-le-temps-la-pire-excuse-qui-soit/">le temps‚Ä¶ C‚Äôest du temps !</a></p>
<p>Donc, comme je l‚Äôai dit pr√©c√©demment, on peut utiliser <em>autoprefixer</em> avec les solutions
suivantes:</p>
<ul>
<li>via <a href="https://github.com/ai/autoprefixer#nodejs">Node.js</a> directement,</li>
<li>en plugin <a href="https://www.npmjs.org/package/gulp-autoprefixer">Gulp</a>,</li>
<li>en plugin <a href="https://github.com/ai/autoprefixer#grunt">Grunt</a>,</li>
<li>via <a href="https://github.com/ai/autoprefixer#compass">Compass</a>,</li>
<li>en plugin <a href="https://github.com/ai/autoprefixer#stylus">Stylus</a>,</li>
<li>avec <a href="https://github.com/ai/autoprefixer#ruby-on-rails">RoR</a> ou <a href="https://github.com/ai/autoprefixer#ruby">Ruby</a>,</li>
<li>avec l‚Äôapplication <a href="https://github.com/ai/autoprefixer#prepros">Prepros</a></li>
<li>via <a href="https://github.com/ai/autoprefixer#mincer">Mincer</a></li>
<li>via <a href="https://github.com/ai/autoprefixer#middleman">Middleman</a></li>
<li>avec <a href="https://github.com/ai/autoprefixer#php">PHP</a> (vous avez bien lu)</li>
</ul>
<p>Si vous avez besoin, je pense que vous trouverez sans trop de probl√®me d‚Äôautres
impl√©mentations.</p>
<p>Cela dit, je vais vous montrer quelques cas d‚Äôutilisations:</p>
<h3 id="make"><a class="putainde-Title-anchor" href="#make">#</a>Make</h3><p>L√† c‚Äôest facile, tout bon d√©veloppeur doit avoir <code>make</code> sur sa machine (sinon
c‚Äôest que t‚Äôes pas d√©veloppeur, je sais pas trop ce que tu fais ici du coup).</p>
<p>On peut tout simplement cr√©er un fichier <code>Makefile</code> avec la commande pr√©c√©dente:</p>
<pre><code class="lang-shell"># <span class="hljs-keyword">cr</span>√©ation <span class="hljs-keyword">d</span>‚Äôun dossier pour notre popote (puis <span class="hljs-keyword">on</span> va dedans...)
$ <span class="hljs-built_in">mkdir</span> autoprefixer-test &amp;&amp; <span class="hljs-keyword">cd</span> autoprefixer-test

# On <span class="hljs-keyword">cr</span>√©er un makefile avec une <span class="hljs-keyword">t</span>√¢<span class="hljs-keyword">che</span> `css` (<span class="hljs-keyword">cr</span>√©ation/√©crasement via &gt;)
$ <span class="hljs-keyword">echo</span> <span class="hljs-string">"css:"</span> &gt; Makefile

# On <span class="hljs-keyword">v</span>√©rifie qu‚Äô<span class="hljs-keyword">on</span> <span class="hljs-keyword">a</span> bien rempli <span class="hljs-keyword">le</span> fichier
$ <span class="hljs-keyword">cat</span> Makefile

## On ajoute notre commande <span class="hljs-keyword">au</span> fichier (ajout <span class="hljs-keyword">au</span> fichier existant via &gt;&gt;)
$ <span class="hljs-keyword">echo</span> <span class="hljs-string">"\tautoprefixer index.css -b \"last 2 versions, &gt; 1%, Explorer 7, Android 2\" -o prefixed.css"</span> &gt;&gt; Makefile

# On <span class="hljs-keyword">v</span>√©rifie qu‚Äô<span class="hljs-keyword">on</span> <span class="hljs-keyword">a</span> bien rempli <span class="hljs-keyword">le</span> fichier
$ <span class="hljs-keyword">cat</span> Makefile
</code></pre>
<p>Voil√† votre Makefile doit √™tre bien rempli. Pour tester la commande <code>css</code>:</p>
<pre><code class="lang-shell">$ <span class="hljs-keyword">make</span> css
</code></pre>
<p>Vous remarquerez que la commande <em>autoprefixer</em> s‚Äôaffiche, si √ßa vous emb√™te, rajoutez
<code>@</code> devant. Vous pouvez modifier votre Makefile dans ce sens:</p>
<pre><code><span class="hljs-keyword">cs</span><span class="hljs-variable">s:</span>
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"‚ùØ Autoprefixage magique."</span>
    @autoprefixer <span class="hljs-built_in">index</span>.css -<span class="hljs-keyword">b</span> <span class="hljs-string">"last 2 versions, &gt; 1%, Explorer 7, Android 2"</span> -<span class="hljs-keyword">o</span> prefixed.css
</code></pre><p><em>Attention : Les Makefiles utilisent des tabulations uniquement ! Sans quoi cela
ne va pas marcher comme pr√©vu.</em></p>
<p>Vous avez donc maintenant un exemple assez simpliste qui peut √™tre utilis√© si
vous n‚Äôavez pas encore <a href="http://www.24joursdeweb.fr/2013/automatisez-votre-workflow-front-end/">automatis√© votre workflow</a>
via des outils comme <a href="http://gulpjs.com/">Gulp</a> ou <a href="http://gruntjs.com/">Grunt</a>.</p>
<p>Passons justement √† ces solutions plus s√©rieuses.</p>
<h3 id="autoprefixer-avec-gulp"><a class="putainde-Title-anchor" href="#autoprefixer-avec-gulp">#</a>Autoprefixer avec Gulp</h3><p>Je ne vais pas trop rentrer dans les d√©tails de Gulp (ce n‚Äôest pas le sujet ici).
Voici cependant une exemple assez bref et compr√©hensible pour commencer, avec
une seule √©criture sur le syst√®me de fichier (contrairement √† la solution Grunt).</p>
<pre><code class="lang-js"><span class="hljs-comment">// gulp stuff</span>
<span class="hljs-keyword">var</span> gulp = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp"</span>)
<span class="hljs-keyword">var</span> gutil = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-util"</span>)
  <span class="hljs-comment">// le plombier ajuste les fuites des tuyaux (erreur de pipe)</span>
  <span class="hljs-comment">// ceci est conseill√© pour √©viter que chaque erreur "casse" tout le process</span>
  <span class="hljs-comment">// d√®s qu‚Äôune erreur est remont√© par un plugin</span>
<span class="hljs-keyword">var</span> plumber = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-plumber"</span>)

<span class="hljs-comment">// css stuff</span>
<span class="hljs-keyword">var</span> sass = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-ruby-sass"</span>)
<span class="hljs-keyword">var</span> autoprefixer = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-autoprefixer"</span>)
<span class="hljs-keyword">var</span> csso = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-csso"</span>)

<span class="hljs-comment">// css task: sass, autoprefixer et csso si --production</span>
gulp.task(<span class="hljs-string">"styles"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  gulp.src(<span class="hljs-string">"./src/css/*.scss"</span>)
    <span class="hljs-comment">// it‚Äôs me, Mario</span>
    .pipe(plumber())

    .pipe(sass({style: <span class="hljs-string">"expanded"</span>}))

    <span class="hljs-comment">// Autoprefixer \\</span>
    <span class="hljs-comment">// vous remarquerez que ici chaque option est un param√®tre</span>
    <span class="hljs-comment">// pas comme pour l‚Äôappel en ligne de commande.</span>
    .pipe(autoprefixer(<span class="hljs-string">"last 2 versions"</span>, <span class="hljs-string">"&gt; 1%"</span>, <span class="hljs-string">"Explorer 7"</span>, <span class="hljs-string">"Android 2"</span>))

    <span class="hljs-comment">// optimisation CSS pour la prod uniquement</span>
    .pipe(gulp.env.production ? csso() : gutil.noop())

    <span class="hljs-comment">// unique √©criture sur disque</span>
    .pipe(gulp.dest(<span class="hljs-string">"./dist/css/"</span>))
    <span class="hljs-comment">// je passe sur cette partie √† configurer, mais ici on peut imaginer un</span>
    <span class="hljs-comment">// livereload en plus, il faudra d√©finir livereload et livereloadServer</span>
    <span class="hljs-comment">// cette partie d√©pend un peu de votre serveur durant le d√©v.</span>
    <span class="hljs-comment">// ca fera l‚Äôobjet d‚Äôun post tiens...</span>
    <span class="hljs-comment">//.pipe(livereload(livereloadServer))</span>
})

gulp.task(<span class="hljs-string">"dev"</span>, [<span class="hljs-string">"styles"</span>], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  gulp.watch(<span class="hljs-string">"./src/css/**/*"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> </span>{
    gulp.run(<span class="hljs-string">"styles"</span>)
  })
})

<span class="hljs-comment">// T√¢ches disponibles :</span>

<span class="hljs-comment">// - pour g√©n√©rer les feuilles de styles</span>
<span class="hljs-comment">//   (pour optimiser pour la prod, utiliser l‚Äôoption)</span>
<span class="hljs-comment">// $ gulp styles [--production]</span>

<span class="hljs-comment">// - pour le dev, surveille et lance la t√¢che `styles` d√®s que n√©cessaire</span>
<span class="hljs-comment">// $ gulp dev</span>
</code></pre>
<h3 id="autoprefixer-avec-grunt"><a class="putainde-Title-anchor" href="#autoprefixer-avec-grunt">#</a>Autoprefixer avec Grunt</h3><p>Voici un petit Gruntfile avec la m√™me configuration que ci dessus</p>
<pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(grunt)</span> </span>{
<span class="hljs-pi">  "use strict"</span>;

  grunt.loadNpmTasks(<span class="hljs-string">"grunt-contrib-sass"</span>)
  grunt.loadNpmTasks(<span class="hljs-string">"grunt-autoprefixer"</span>)
  grunt.loadNpmTasks(<span class="hljs-string">"grunt-csso"</span>)
  grunt.loadNpmTasks(<span class="hljs-string">"grunt-contrib-watch"</span>)

  grunt.initConfig({
    sass: {
      dist: {
        options: {
          style: <span class="hljs-string">"expanded"</span>
        },
        files: [{
          expand: <span class="hljs-literal">true</span>,
          flatten: <span class="hljs-literal">true</span>,
          cwd: <span class="hljs-string">"./src/css"</span>,
          src: [<span class="hljs-string">"*.scss"</span>],
          dest: <span class="hljs-string">"./dist/css"</span>,
          ext: <span class="hljs-string">".css"</span>
        }]
      }
    },
    autoprefixer: {
      options: {
        browsers: [<span class="hljs-string">"last 2 versions"</span>, <span class="hljs-string">"&gt; 1%"</span>, <span class="hljs-string">"Explorer 7"</span>, <span class="hljs-string">"Android 2"</span>]
      },
      dist: {
        expand: <span class="hljs-literal">true</span>,
        flatten: <span class="hljs-literal">true</span>,
        cwd: <span class="hljs-string">"./dist/css"</span>,
        src: [<span class="hljs-string">"*.css"</span>],
        dest: <span class="hljs-string">"./dist/css/"</span>
      }
    },
    csso: {
      dist: {
        expand: <span class="hljs-literal">true</span>,
        flatten: <span class="hljs-literal">true</span>,
        cwd: <span class="hljs-string">"./dist/css/"</span>,
        src: [<span class="hljs-string">"*.css"</span>],
        dest: <span class="hljs-string">"./dist/css/"</span>
      }
    },
    watch: {
      styles: {
        files: [<span class="hljs-string">"./src/css/**/*.scss"</span>],
        tasks: [<span class="hljs-string">"styles"</span>]
      }
    }
  })

  grunt.registerTask(<span class="hljs-string">"styles"</span>, [<span class="hljs-string">"sass"</span>, <span class="hljs-string">"autoprefixer"</span>])
  grunt.registerTask(<span class="hljs-string">"styles:production"</span>, [<span class="hljs-string">"sass"</span>, <span class="hljs-string">"autoprefixer"</span>, <span class="hljs-string">"csso"</span>])
  grunt.registerTask(<span class="hljs-string">"dev"</span>, [<span class="hljs-string">"sass"</span>, <span class="hljs-string">"watch"</span>])
}

<span class="hljs-comment">// T√¢ches disponibles :</span>

<span class="hljs-comment">// - pour g√©n√©rer les feuilles de styles</span>
<span class="hljs-comment">// $ grunt styles</span>

<span class="hljs-comment">// - pareil, mais optimiser pour la prod</span>
<span class="hljs-comment">// $ grunt styles:production</span>

<span class="hljs-comment">// - pour le dev, surveille et lance la t√¢che `styles` d√®s que n√©cessaire</span>
<span class="hljs-comment">// $ grunt watch</span>
</code></pre>
<p>Comme vous pouvez le voir, la version Grunt est un peu plus volumineuse (bien qu‚Äôespac√©e).
Personnellement j‚Äôaime la concision de gulp.
De plus la version Grunt sera plus longue car nous aurons 3 lectures / √©critures sur le disque.</p>
<p><em>Notez que bien entendu dans notre exemple pr√©c√©dent, nous pouvons remplacer Sass
par un autre pr√© / post-processeur.</em></p>
<h3 id="autoprefixer-avec-stylus"><a class="putainde-Title-anchor" href="#autoprefixer-avec-stylus">#</a>Autoprefixer avec Stylus</h3><p>Dans les exemples pr√©c√©dents, j‚Äôai montr√© une solution classique avec Sass.
Mais voici compl√®tement autre chose: <em>autoprefixer</em> peut s‚Äôutiliser en ‚Äúplugin‚Äù Stylus.</p>
<p>C‚Äôest assez simple il suffit d‚Äôutiliser l‚Äôoption <code>use</code> (<code>-u</code> en cli).
Voil√† ce qu‚Äôon aurait en cli :</p>
<pre><code class="lang-shell">$ npm <span class="hljs-operator"><span class="hljs-keyword">install</span> -g stylus autoprefixer-stylus
$ stylus -u autoprefixer-stylus -o <span class="hljs-keyword">index</span>.css <span class="hljs-keyword">index</span>.styl</span>
</code></pre>
<h4 id="avec-grunt"><a class="putainde-Title-anchor" href="#avec-grunt">#</a>Avec Grunt</h4><p>Il suffira d‚Äôutiliser donc l‚Äôoption <code>use</code> dans votre configuration.</p>
<h4 id="-del-avec-gulp-del-"><a class="putainde-Title-anchor" href="#-del-avec-gulp-del-">#</a><del>Avec Gulp</del></h4><p>La fa√ßon de faire de gulp, via des streams pour √©viter la lecture / √©criture multiple fait que le plugin
<em>autoprefixer-stylus</em> est vide de sens.
Vous pouvez donc utiliser <em>autoprefixer</em> normalement, apr√®s l‚Äôappel du pr√©-processeur.</p>
<hr>
<p>Voil√† j‚Äôesp√®re que cette fois-ci vous √™tes rassasi√©(e) afin de ne plus avoir envie de manger des pr√©fixes CSS !</p>

]]></description><pubDate>Tue, 04 Mar 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/css/mise-en-place-autoprefixer/</link><guid isPermaLink="true">http://putaindecode.fr/posts/css/mise-en-place-autoprefixer/</guid></item><item><title>Git, boutez les bugs, domptez votre historique!</title><description><![CDATA[
<p>Vous viendez de lire l‚Äô<a href="/posts/git/versionner-avec-git/">article de madx</a> sur le gestionnaire
de version Git et vous vous dites que vous aimeriez en d√©couvrir plus! Vous l‚Äôutilisez d√©j√† mais √™tes
en qu√™te de quelques nouvelles (ou pas) astuces √† vous mettre sous la dent! Bienvenue!</p>
<p>Si vous d√©sirez vous servir de cet article comme d‚Äôun tutoriel il est recommand√© d‚Äôavoir quelques
bases concernant l‚Äôutilisation et le fonctionnement de Git (commits/branches/etc‚Ä¶).</p>
<p>Allez, je ne vous fais pas plus attendre, voici ma liste des fonctionnalit√©s Git dont je ne
saurais plus me passer:</p>
<h2 id="git-lg-l-alias-qui-vous-parle-d-histoire"><a class="putainde-Title-anchor" href="#git-lg-l-alias-qui-vous-parle-d-histoire">#</a>git lg, l‚Äôalias qui vous parle d‚ÄôHistoire</h2><p>√Ä l‚Äôaide, √† l‚Äôaide je ne comprends plus rien √† l‚Äôhistorique de mon d√©p√¥t Git!
J‚Äôai cr√©√© un monstre‚Ä¶ Pas de panique! J‚Äôai pour vous l‚Äôalias qu‚Äôil vous faut,
honteusement pomp√© de <a href="https://coderwall.com/p/euwpig">ce site</a>, mais
comme j‚Äôai pas d‚Äôhonneur‚Ä¶ Pour le mettre en place il suffit d‚Äôentrer la commande
suivante dans votre terminal pr√©f√©r√©:</p>
<pre><code class="lang-bash">$ git config --global alias.lg <span class="hljs-string">"log --color --graph --pretty=format:'<span class="hljs-variable">%Cred</span><span class="hljs-variable">%h</span><span class="hljs-variable">%Creset</span> -<span class="hljs-variable">%C</span>(yellow)<span class="hljs-variable">%d</span><span class="hljs-variable">%Creset</span> <span class="hljs-variable">%s</span> <span class="hljs-variable">%Cgreen</span>(<span class="hljs-variable">%cr</span>) <span class="hljs-variable">%C</span>(bold blue)&lt;<span class="hljs-variable">%an</span>&gt;<span class="hljs-variable">%Creset</span>' --abbrev-commit"</span>
</code></pre>
<p>Au cas o√π vous ne seriez pas √† l‚Äôaise avec ce genre de choses, sachez simplement que la commande
<code>git config --global alias.lg</code> permet d‚Äôinscrire √† votre configuration g√©n√©rale un nouvel alias (
ici lg). Le reste est ce que doit faire cet alias, √† savoir afficher un historique reformat√© de votre
d√©p√¥t Git.</p>
<p>Allez, je vous met au d√©fi d‚Äôoser taper un coup de <code>git lg</code> dans votre terminal
maintenant (dans un d√©p√¥t Git bien entendu banane). Pour l‚Äôexemple, je l‚Äôai r√©alis√© dans le d√©p√¥t
de Putain De Code:</p>
<figure>
  <img src="../../../images/posts/git/boutez-les-bugs-domptez-votre-historique/omagad-history.png" alt="capture historique">
  <figcaption>Le pouvoir de l‚Äôarc en ciel</figcaption>
</figure>

<p>Eh oui, sous vos yeux √©bahis se dessine maintenant l‚Äôhistorique de votre d√©p√¥t!
Tout y est: cr√©ations de branches, commits, merges, les miaouOnes‚Ä¶ Voil√†, vous ne pourrez plus
dire que vous n‚Äôy comprenez rien, vous seriez un fieff√© menteur.</p>
<h2 id="git-bisect-trouver-et-punir"><a class="putainde-Title-anchor" href="#git-bisect-trouver-et-punir">#</a>git bisect, trouver et punir</h2><p>S‚Äôil y a bien quelque chose d‚Äôaga√ßant dans l‚Äôactivit√© de d√©veloppement, c‚Äôest que bien
souvent on est amen√© √† travailler en √©quipe, et √©videmment, il y en a toujours
un pour introduire des Putain De Bugs. Alors c‚Äôest parti on sort le d√©bugger pour
l‚Äôautre ingrat, on place les <code>console.log</code> et autres <code>var_dump()</code> pour trouver d‚Äôo√π
peut bien venir ce fichu probl√®me, et on se coule un caf√© parce qu‚Äôentre nous, √ßa peut
prendre du temps.</p>
<p>Heureusement pour nous, l√† aussi Git est au rendez-vous avec sa fonctionnalit√© de <em>bisecting</em>. Je vous vois d√©j√† en
train de baver devant votre √©cran, mais non, Git ne va pas corriger vos bugs bien √©videmment, il va vous aider
√† trouver le changement dans le code qui l‚Äôa fait appara√Ætre et ceci gr√¢ce √† la commande <code>git bisect</code>.</p>
<p>Pour lancer une <em>bisection</em> par Git il suffit d‚Äôentrer <code>git bisect start</code> dans votre terminal pr√©f√©r√©
et le tour est jou√©!</p>
<pre><code class="lang-bash"><span class="hljs-variable">$ </span>git bisect start
$
</code></pre>
<figure>
    <figcaption> Capitaine, regardez il n‚Äôy a rien </figcaption>
</figure>

<p>Oui bon d‚Äôaccord, il va falloir s‚Äôinvestir un peu plus pour parvenir √† nos fins. Pour l‚Äôinstant Git est
pass√© en mode <em>bisection</em>, maintenant il a besoin d‚Äôinformations pour s‚Äôex√©cuter:</p>
<ul>
<li>Un commit o√π le bug est pr√©sent</li>
<li>Un commit o√π le bug est absent</li>
</ul>
<p>Imaginons que le commit sur lequel nous sommes comporte le bug, nous allons donc le signaler √† Git avec
<code>git bisect bad</code>. Nous allons ensuite nous d√©placer sur un commit plus ancien qui ne comporte pas le bug et
le signaler √† son tour: <code>git bisect good</code>.</p>
<p>Git va alors se mettre en route et vous d√©placer automatiquement de commit en commit. Pour chacun d‚Äôeux vous n‚Äôaurez
qu‚Äô√† le d√©clarer bon ou mauvais comme expliqu√© au dessus, jusqu‚Äô√† ce que Git vous fournisse le premier commit
comportant le bug, celui dont le changement a r√©v√©l√© le disfonctionnement.</p>
<pre><code class="lang-bash">$ git bisect bad
1082351d9157e98aed1bbee8b9ad6deedca1288f is the first bad <span class="hljs-operator"><span class="hljs-keyword">commit</span>
<span class="hljs-keyword">commit</span> <span class="hljs-number">1082351</span>d9157e98aed1bbee8b9ad6deedca1288f
Author: Maxime Thirouin &lt;m@***.io&gt;
<span class="hljs-built_in">Date</span>:   Fri Jan <span class="hljs-number">17</span> <span class="hljs-number">08</span>:<span class="hljs-number">19</span>:<span class="hljs-number">46</span> <span class="hljs-number">2014</span> +<span class="hljs-number">0100</span>

    ¬Ø\_(„ÉÑ)_/¬Ø Fix shit bring <span class="hljs-keyword">in</span> <span class="hljs-number">34</span>a44c98048f2b74fc2dd20f0be807c1e23e8b58

:<span class="hljs-number">040000</span> <span class="hljs-number">040000</span> <span class="hljs-number">7</span>a5d5010f0aaa052ffdc0747b182dc6178a346db d3562872efd1b9d662a89825a3070d64f860cc34 M  src</span>
</code></pre>
<figure>
    <figcaption>1, 2, 3, Soleil!</figcaption>
</figure>

<p>Et voil√†, le tour est jou√©, en plus Git vous a positionn√© sur ce commit, il ne manque plus qu‚Äôun petit coup de
<code>git show</code> et vous savez tout. Pour revenir √† votre travail, un simple <code>git bisect reset</code> fera l‚Äôaffaire!
Il ne vous reste plus qu‚Äô√† punir la personne fautive, mais pour √ßa je vous laisse avec votre imagination,
je suis s√ªr que vous trouverez.</p>
<p>Pour les fanatiques de l‚Äôefficacit√© et de l‚Äôautomatisation, sachez que Git en a encore dans le ventre. Si vous
connaissez d√©j√† un bon et un mauvais commit, vous pouvez tout simplement lancer la <em>bissection</em> √† grand coup de
<code>git bisect start MAUVAIS_COMMIT BON_COMMIT</code> et si, cerise sur le g√¢teau, vous √™tes en possession d‚Äôune suite de tests
unitaires (oui non je sais faut pas d√©conner), <code>git bisect run &lt;votre_script&gt;</code> vous permettra de la lancer et la
recherche du premier commit d√©fectueux se fera alors toute seule!</p>
<h2 id="git-rebase-du-pur-story-telling"><a class="putainde-Title-anchor" href="#git-rebase-du-pur-story-telling">#</a>git rebase, du pur story-telling</h2><p>Je ne sais pas s‚Äôil vous est d√©j√† arriv√© de naviguer dans les d√©p√¥ts Git de projets libres, mais souvent on y trouve que tr√®s
peu de commits poubelles, ces commits avec comme message ‚Äústep‚Äù ou autre ‚Äústuff‚Äù. Chaque commit correspond √† une fonctionnalit√©,
un bug fix, une unit√© logique coh√©rente. Je ne sais pas pour vous, mais personnellement un <em>git log</em> ne ressemble pas √†
√ßa chez moi!</p>
<pre><code><span class="hljs-operator"><span class="hljs-keyword">commit</span> e739e7c0248b841b0250eb85d99a1b4ba149149d
Author: Martin GOYOT (Erwyn/Martinus) &lt;martin@***.com&gt;
<span class="hljs-built_in">Date</span>:   Tue Feb <span class="hljs-number">18</span> <span class="hljs-number">21</span>:<span class="hljs-number">39</span>:<span class="hljs-number">50</span> <span class="hljs-number">2014</span> +<span class="hljs-number">0100</span>

    <span class="hljs-keyword">Now</span> my new functionality finally works

<span class="hljs-keyword">commit</span> <span class="hljs-number">551</span>b243525d826afcfece3e2c4c471ebd1e91779
Author: Martin GOYOT (Erwyn/Martinus) &lt;martin@***.com&gt;
<span class="hljs-built_in">Date</span>:   Tue Feb <span class="hljs-number">18</span> <span class="hljs-number">21</span>:<span class="hljs-number">39</span>:<span class="hljs-number">23</span> <span class="hljs-number">2014</span> +<span class="hljs-number">0100</span>

    misc

<span class="hljs-keyword">commit</span> <span class="hljs-number">9</span>db49a39fdb05a54adcfc2b46832818ef05b9c72
Author: Martin GOYOT (Erwyn/Martinus) &lt;martin@***.com&gt;
<span class="hljs-built_in">Date</span>:   Tue Feb <span class="hljs-number">18</span> <span class="hljs-number">21</span>:<span class="hljs-number">38</span>:<span class="hljs-number">43</span> <span class="hljs-number">2014</span> +<span class="hljs-number">0100</span>

    <span class="hljs-keyword">stuff</span>

<span class="hljs-keyword">commit</span> ca4ff952310d6246216e83f49309b32b2d2fa010
Author: Martin GOYOT (Erwyn/Martinus) &lt;martin@***.com&gt;
<span class="hljs-built_in">Date</span>:   Tue Feb <span class="hljs-number">18</span> <span class="hljs-number">21</span>:<span class="hljs-number">38</span>:<span class="hljs-number">35</span> <span class="hljs-number">2014</span> +<span class="hljs-number">0100</span>

    <span class="hljs-keyword">first</span> <span class="hljs-keyword">commit</span></span>
</code></pre><figure>
    <figcaption>best git log, ever</figcaption>
</figure>

<p>Bien que l‚Äôon essaye de nous faire croire que les logiciels libres sont cod√©s par des rockstars, ce qui permet de justifier le
mythe du <em>1 commit = 1 fonctionnalit√©</em>, vous n‚Äô√™tes pas dupes; l‚Äôhistorique Git de ces d√©p√¥ts est bel et bien retravaill√©, et ceci dans
le but de maintenir sa coh√©rence et de permettre √† tous les contributeurs de le comprendre. Si cela s‚Äôapplique particuli√®rement
dans le cadre des logiciels libres, il n‚Äôen est pas moins satisfaisant d‚Äôavoir √©galement un historique clair sur ses propres d√©p√¥ts.</p>
<p>Pour cela, l‚Äôarme de choix s‚Äôappelle <code>git rebase</code>. Cette fonctionnalit√© permet de r√©√©crire l‚Äôhistorique de vos d√©p√¥ts, de
r√©organiser les commits, d‚Äôen supprimer, de changer leur message associ√© etc‚Ä¶ La fonctionnalit√© est assez simple √† utiliser, nous allons
prendre exemple sur l‚Äôhistorique pr√©sent√© ci-dessus: je voudrais supprimer le commit dont le message est ‚Äòstuff‚Äô parce que finalement il
s‚Äôav√®re inutile. Je veux √©galement fusionner le commit ‚Äòmisc‚Äô avec le commit ‚ÄòNow my new functionality finally works‚Äô et renommer ce dernier
pour qu‚Äôil soit plus explicite et fasse r√©f√©rence √† ma User Story correspondante dans mon outil de tracking pr√©f√©r√©.</p>
<p>Pour commencer, il faut dire jusqu‚Äô√† quel commit on souhaite effectuer cette r√©√©criture; pour cela, dans mon cas, deux solutions:</p>
<ul>
<li>Faire r√©f√©rence √† partir de HEAD (l‚Äô√©tiquette courante), ici: HEAD~3 (je veux r√©√©crire jusqu‚Äôau commit avant ‚Äòstuff‚Äô)</li>
<li>Fournir le SHA1 du commit avant ‚Äòstuff‚Äô (ici 2645b1cdbdd72bea6c392c011320556997327761)</li>
</ul>
<p>Je vais utiliser la premi√®re m√©thode (le choix n‚Äôinflue en rien sur la suite), et donc lancer la r√©√©criture en invoquant la commande: <code>git rebase -i HEAD~3</code>
( -i voulant dire de lancer un <em>rebase</em> en mode int√©ractif). Voici ce qui m‚Äôest alors pr√©sent√©:</p>
<pre><code>pick <span class="hljs-number">9</span>db49a3 stuff
pick <span class="hljs-number">551</span>b243 misc
pick e739e7c Now my <span class="hljs-keyword">new</span> functionality finally works

<span class="hljs-preprocessor"># Rebase ca4ff95..e739e7c onto ca4ff95</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor"># Commands:</span>
<span class="hljs-preprocessor">#  p, pick = use commit</span>
<span class="hljs-preprocessor">#  r, reword = use commit, but edit the commit message</span>
<span class="hljs-preprocessor">#  e, edit = use commit, but stop for amending</span>
<span class="hljs-preprocessor">#  s, squash = use commit, but meld into previous commit</span>
<span class="hljs-preprocessor">#  f, fixup = like "squash", but discard this commit's log message</span>
<span class="hljs-preprocessor">#  x, exec = run command (the rest of the line) using shell</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor"># These lines can be re-ordered; they are executed from top to bottom.</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor"># If you remove a line here THAT COMMIT WILL BE LOST.</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor"># However, if you remove everything, the rebase will be aborted.</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor"># Note that empty commits are commented out</span>
</code></pre><p>Git m‚Äôaffiche tous les commits concern√©s par l‚Äôop√©ration (en ordre inverse), devant chacun d‚Äôeux, la mention <em>pick</em>, et une l√©gende en bas.
<em>pick</em>, comme l‚Äôindique la l√©gende, signifie que ce commit sera conserv√©, mais je peux remplacer cette mention par les suivantes:</p>
<ul>
<li>reword : modifier le message de commit.</li>
<li>edit : utiliser le commit mais me laisser le modifier avec un <code>git commit --amend</code> qui permet de commiter l‚Äô√©tat courant de la copie de travail en
l‚Äôincorporant au commit pr√©c√©dent.</li>
<li>squash : utiliser le commit en le fusionnant avec le commit pr√©c√©dent.</li>
<li>fixup : utiliser le commit en le fusionnant avec le commit pr√©c√©dent et ne pas utiliser son message associ√©.</li>
<li>exec : ex√©cuter une commande sur ce commit.</li>
</ul>
<p>En plus de ces diff√©rentes mentions, je peux √©galement effectuer deux autres actions:</p>
<ul>
<li>d√©placer un commit, ce qui aura pour effet final de le d√©placer dans l‚Äôhistorique.</li>
<li>supprimer un commit, ce qui aura comme r√©sultat de le faire dispara√Ætre de l‚Äôhistorique.</li>
</ul>
<p>Pour ma part, je vais:</p>
<ul>
<li>supprimer la premi√®re ligne parce que j‚Äôai d√©cid√© que le commit ‚Äòstuff‚Äô ne me servait √† rien.</li>
<li>mettre la mention reword devant le commit ‚Äòmisc‚Äô, car je vais fusionner le dernier commit avec celui-ci et mettre un nouveau message.</li>
<li>mettre la mention fixup devant le commit ‚ÄòNow my new functionality finally works‚Äô car je vais le fusionner au pr√©c√©dent et abandonner son message.</li>
</ul>
<p>Ce qui nous donne le r√©sultat suivant:</p>
<pre><code>reword <span class="hljs-number">551</span>b243 misc
fixup e739e7c Now my <span class="hljs-keyword">new</span> functionality finally works

<span class="hljs-preprocessor"># Rebase ca4ff95..e739e7c onto ca4ff95</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor"># Commands:</span>
<span class="hljs-preprocessor">#  p, pick = use commit</span>
<span class="hljs-preprocessor">#  r, reword = use commit, but edit the commit message</span>
<span class="hljs-preprocessor">#  e, edit = use commit, but stop for amending</span>
<span class="hljs-preprocessor">#  s, squash = use commit, but meld into previous commit</span>
<span class="hljs-preprocessor">#  f, fixup = like "squash", but discard this commit's log message</span>
<span class="hljs-preprocessor">#  x, exec = run command (the rest of the line) using shell</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor"># These lines can be re-ordered; they are executed from top to bottom.</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor"># If you remove a line here THAT COMMIT WILL BE LOST.</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor"># However, if you remove everything, the rebase will be aborted.</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor"># Note that empty commits are commented out</span>
</code></pre><figure>
    <figcaption>Attention ch√©rie, √ßa va trancher</figcaption>
</figure>

<p>Il n‚Äôy a plus qu‚Äô√† sauvegarder et quitter (:x dans vim) pour que la machine se mette en route. Si certaines actions que vous avez effectu√©es, notamment
le d√©placement de commits, provoquent des conflits, Git va vous demander de les r√©soudre au fur et √† mesure; il suffit pour cela d‚Äô√©diter vos fichiers, puis
de les marquer comme r√©solus au moyen de la commande <code>git add &lt;lefichier&gt;</code> avant de reprendre avec la commande <code>git rebase --continue</code>. Comme convenu,
Git vous demande d‚Äô√©diter le message du commit marqu√© en <em>reword</em>:</p>
<pre><code>Story #<span class="hljs-number">34</span> - Poker cards now have a real back picture

<span class="hljs-preprocessor"># Please enter the commit message for your changes. Lines starting</span>
<span class="hljs-preprocessor"># with '#' will be ignored, and an empty message aborts the commit.</span>
<span class="hljs-preprocessor"># HEAD detached at ca4ff95</span>
<span class="hljs-preprocessor"># You are currently rebasing branch 'master' on 'ca4ff95'.</span>
<span class="hljs-preprocessor">#   (all conflicts fixed: run "git rebase --continue")</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor"># Changes to be committed:</span>
<span class="hljs-preprocessor">#   (use "git reset HEAD &lt;file&gt;..." to unstage)</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor"># modified:   README.txt</span>
<span class="hljs-preprocessor">#</span>
</code></pre><figure>
    <figcaption>Un commit qu‚Äôil est mieux pour le relire</figcaption>
</figure>

<p>L‚Äôop√©ration va continuer puis Git va vous rendre la main. Il vous suffit alors de faire un <code>git log</code> pour appr√©cier le r√©sultat:</p>
<pre><code><span class="hljs-operator"><span class="hljs-keyword">commit</span> <span class="hljs-number">481</span>b4dccf4fedf4ed9d7f4e83ae5c19a07f7e12e
Author: Martin GOYOT (Erwyn/Martinus) &lt;martin@***.com&gt;
<span class="hljs-built_in">Date</span>:   Tue Feb <span class="hljs-number">18</span> <span class="hljs-number">21</span>:<span class="hljs-number">39</span>:<span class="hljs-number">23</span> <span class="hljs-number">2014</span> +<span class="hljs-number">0100</span>

    Story #<span class="hljs-number">34</span> - Poker cards <span class="hljs-keyword">now</span> have a <span class="hljs-built_in">real</span> back picture</span>
</code></pre><figure>
    <figcaption>Et c‚Äôest le succ√®√®√®√®√®√®√®s</figcaption>
</figure>

<p>Vous n‚Äôavez plus qu‚Äôun seul commit tout beau tout propre! Vous pouvez maintenant le pousser sur votre d√©p√¥t et vous vanter d‚Äôavoir un bel historique, parce
que vous aussi, vous √™tes une rockstar :).</p>
<p>Pour ceux qui d√©sirent aller encore plus loin dans l‚Äôautomatisation de ce processus de rebase, je vous conseille d‚Äôaller jeter un ≈ìil √† l‚Äôutilisation
de l‚Äôoption <a href="http://madx.me/articles/git_rebase_autosquash.html">‚Äîautosquash</a>.</p>
<h2 id="git-reflog-la-commande-de-celui-qui-a-fait-n-importe-quoi"><a class="putainde-Title-anchor" href="#git-reflog-la-commande-de-celui-qui-a-fait-n-importe-quoi">#</a>git reflog, la commande de celui qui a fait n‚Äôimporte quoi</h2><p>Voici venu le temps <del>des rires et des chants</del> de la deni√®re commande que je souhaitais vous pr√©senter, j‚Äôai nomm√© <code>git reflog</code>. Cette commande
c‚Äôest votre <em>joker</em>, elle assure votre survie, notamment si vous avez √©t√© assez zinzins pour suivre les exemples donn√©s dans cet article, parce
que honn√™tement‚Ä¶</p>
<figure>
    <img src="http://i1.kym-cdn.com/photos/images/newsfeed/000/305/224/3e1.jpg" alt="I have no idea what I&#39;m doing">
</figure>

<p>Vous ne le savez peut √™tre pas, mais Git, dans sa grande bont√©, garde une r√©f√©rence de toutes vos actions, de tous les endroits o√π vous vous √™tes d√©placez.
Ce registre, c‚Äôest le <em>references log</em>, et en plus on peut y acc√©der simplement gr√¢ce √† la commande <code>git reflog</code> (sans d√©conner). Faisons un petit tour
dans le miens:</p>
<pre><code><span class="hljs-number">481</span>b4dc HEAD@{<span class="hljs-number">0</span>}: rebase -i (finish): <span class="hljs-keyword">returning</span> <span class="hljs-keyword">to</span> refs/heads/master
<span class="hljs-number">481</span>b4dc HEAD@{<span class="hljs-number">1</span>}: rebase -i (fixup): Story <span class="hljs-comment">#34 - Poker cards now have a real back picture</span>
<span class="hljs-number">8</span>fd5835 HEAD@{<span class="hljs-number">2</span>}: rebase -i (<span class="hljs-keyword">continue</span>): Story <span class="hljs-comment">#34 - Poker cards now have a real back picture</span>
ca4ff95 HEAD@{<span class="hljs-number">3</span>}: checkout: moving <span class="hljs-keyword">from</span> master <span class="hljs-keyword">to</span> ca4ff952310d6246216e83f49309b32b2d2fa010
e739e7c HEAD@{<span class="hljs-number">4</span>}: rebase -i (finish): <span class="hljs-keyword">returning</span> <span class="hljs-keyword">to</span> refs/heads/master
e739e7c HEAD@{<span class="hljs-number">5</span>}: checkout: moving <span class="hljs-keyword">from</span> master <span class="hljs-keyword">to</span> e739e7c
e739e7c HEAD@{<span class="hljs-number">6</span>}: rebase -i (finish): <span class="hljs-keyword">returning</span> <span class="hljs-keyword">to</span> refs/heads/master
e739e7c HEAD@{<span class="hljs-number">7</span>}: checkout: moving <span class="hljs-keyword">from</span> master <span class="hljs-keyword">to</span> e739e7c
e739e7c HEAD@{<span class="hljs-number">8</span>}: rebase -i (finish): <span class="hljs-keyword">returning</span> <span class="hljs-keyword">to</span> refs/heads/master
e739e7c HEAD@{<span class="hljs-number">9</span>}: checkout: moving <span class="hljs-keyword">from</span> master <span class="hljs-keyword">to</span> e739e7c
e739e7c HEAD@{<span class="hljs-number">10</span>}: rebase -i (finish): <span class="hljs-keyword">returning</span> <span class="hljs-keyword">to</span> refs/heads/master
e739e7c HEAD@{<span class="hljs-number">11</span>}: checkout: moving <span class="hljs-keyword">from</span> master <span class="hljs-keyword">to</span> e739e7c
e739e7c HEAD@{<span class="hljs-number">12</span>}: commit: Now <span class="hljs-keyword">my</span> new functionality finally works
<span class="hljs-number">551</span>b243 HEAD@{<span class="hljs-number">13</span>}: commit: misc
<span class="hljs-number">9</span>db49a3 HEAD@{<span class="hljs-number">14</span>}: commit (amend): stuff
af7fc36 HEAD@{<span class="hljs-number">15</span>}: commit: misc
ca4ff95 HEAD@{<span class="hljs-number">16</span>}: commit (initial): <span class="hljs-keyword">first</span> commit
</code></pre><figure>
    <figcaption>Il est beau mon reflog, il est frais</figcaption>
</figure>

<p>On voit ici l‚Äôensemble de mes op√©rations appara√Ætre comme le <em>rebase</em> effectu√© pr√©c√©demment (bon d‚Äôaccord il appara√Æt plusieurs fois parce que j‚Äôai
fait quelques tests avant d‚Äô√©crire cette partie de l‚Äôarticle). Chaque op√©ration poss√®de un SHA1 qui est en fait une r√©f√©rence vers le commit concern√©, dans l‚Äô√©tat
dans lequel il √©tait au moment de l‚Äôop√©ration. Bien, imaginons que j‚Äôai fait n‚Äôimporte quoi avec le rebase et que je veuille retrouver mon √©tat pr√©c√©dent, et bien
il me suffira ici de faire un <code>git checkout e739e7c</code> (dans votre cas la ligne sera probablement plus simple √† trouver). Et l√† si je refais un <code>git log</code>, miracle:</p>
<pre><code><span class="hljs-operator"><span class="hljs-keyword">commit</span> e739e7c0248b841b0250eb85d99a1b4ba149149d
Author: Martin GOYOT (Erwyn/Martinus) &lt;martin@***.com&gt;
<span class="hljs-built_in">Date</span>:   Tue Feb <span class="hljs-number">18</span> <span class="hljs-number">21</span>:<span class="hljs-number">39</span>:<span class="hljs-number">50</span> <span class="hljs-number">2014</span> +<span class="hljs-number">0100</span>

    <span class="hljs-keyword">Now</span> my new functionality finally works

<span class="hljs-keyword">commit</span> <span class="hljs-number">551</span>b243525d826afcfece3e2c4c471ebd1e91779
Author: Martin GOYOT (Erwyn/Martinus) &lt;martin@***.com&gt;
<span class="hljs-built_in">Date</span>:   Tue Feb <span class="hljs-number">18</span> <span class="hljs-number">21</span>:<span class="hljs-number">39</span>:<span class="hljs-number">23</span> <span class="hljs-number">2014</span> +<span class="hljs-number">0100</span>

    misc

<span class="hljs-keyword">commit</span> <span class="hljs-number">9</span>db49a39fdb05a54adcfc2b46832818ef05b9c72
Author: Martin GOYOT (Erwyn/Martinus) &lt;martin@***.com&gt;
<span class="hljs-built_in">Date</span>:   Tue Feb <span class="hljs-number">18</span> <span class="hljs-number">21</span>:<span class="hljs-number">38</span>:<span class="hljs-number">43</span> <span class="hljs-number">2014</span> +<span class="hljs-number">0100</span>

    <span class="hljs-keyword">stuff</span>

<span class="hljs-keyword">commit</span> ca4ff952310d6246216e83f49309b32b2d2fa010
Author: Martin GOYOT (Erwyn/Martinus) &lt;martin@***.com&gt;
<span class="hljs-built_in">Date</span>:   Tue Feb <span class="hljs-number">18</span> <span class="hljs-number">21</span>:<span class="hljs-number">38</span>:<span class="hljs-number">35</span> <span class="hljs-number">2014</span> +<span class="hljs-number">0100</span>

    <span class="hljs-keyword">first</span> <span class="hljs-keyword">commit</span></span>
</code></pre><p>Vous voil√† retomb√©s sur vos pieds! Vous n‚Äôavez plus qu‚Äô√† reconnecter votre branche √† ce commit si jamais vous en aviez une et vous √™tes reparti pour de nouvelles
aventures.</p>
<p>Sachez tout de m√™me que ce <em>references log</em> peut √™tre effac√©, et il est m√™me conseill√© de le faire r√©guli√®rement pour des probl√©matiques de performance de Git sur
votre d√©p√¥t; conserver tous ces commits peut devenir co√ªteux √† la longue. La commande <code>git gc</code> pour <em>garbage collector</em> s‚Äôoccupera de faire le m√©nage
pour vous.</p>
<p>Voil√†, on arrive au bout de notre aventure, j‚Äôesp√®re que vous avez appris quelque chose et que Git vous fait maintenant moins peur.</p>
<p>Amike,</p>

]]></description><pubDate>Thu, 27 Feb 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/git/boutez-les-bugs-domptez-votre-historique/</link><guid isPermaLink="true">http://putaindecode.fr/posts/git/boutez-les-bugs-domptez-votre-historique/</guid></item><item><title>Twitter comme lecteur de flux</title><description><![CDATA[
<p><em>(Note : dans cet article, j‚Äôai volontairement pris comme exemple la version Web afin que tout le monde puisse profiter de l‚Äôexp√©rience mais il est √©vident que vous puissiez le faire avec votre application twitter favorite).</em></p>
<p>Bien avant la fin de Google Reader, je me posais d√©j√† la question de l‚Äôint√©r√™t d‚Äôun lecteur de flux {rss|atom}. En effet, il m‚Äô√©tait p√©nible d‚Äôorganiser les flux que je souhaitais lire : les ranger par cat√©gorie, supprimer les sites morts ou ceux qui ne m‚Äôint√©ressaient plus; de plus, je n‚Äôai jamais r√©ellement utilis√© les fonctionnalit√©s d‚Äôun lecteur de flux comme le syst√®me de marquage, savoir si le flux a √©t√© lu ou non, lire l‚Äôarticle dans le lecteur (je le lis toujours sur le site, jamais dans l‚Äôapplication). Et puis c‚Äôest parfois p√©nible de trouver un lecteur de flux simple, multi-OS et gratuit.</p>
<p>J‚Äôai √©t√© un grand fan √† l‚Äô√©poque de Netvibes puis je l‚Äôai d√©laiss√© pour Google Reader et nous voil√† quelques temps apr√®s, sans r√©elle solution √† mon sens pour lire agr√©ablement des flux tel que je le concois.</p>
<p>J‚Äôexp√©rimente pourtant une solution depuis quelques mois qui me sied bien. J‚Äôutilise en effet Twitter en tant que lecteur de flux. Oui, car cela a plusieurs avantages :</p>
<ul>
<li><p>Il existe une application pour <a href="https://play.google.com/store/apps/details?id=com.twitter.android&amp;hl=fr">Android</a>, <a href="https://about.twitter.com/products/iphone">iOS</a> ainsi que <a href="https://itunes.apple.com/fr/app/twitter/id409789998?mt=12">Mac</a>; mais aussi la <a href="https://twitter.com/">version Web</a> et <a href="https://tweetdeck.twitter.com/">Tweetdeck</a> est disponible sur tous les environnements.</p>
</li>
<li><p>Je fais ma veille majoritairement via Twitter; j‚Äô√©cr√®me au fil de la journ√©e ce qui m‚Äôint√©resse ou non. Si c‚Äôest rapide √† lire alors je le lis, sinon je <em>bookmark</em> l‚Äôarticle en ‚ÄúRead later‚Äù sur mon navigateur. Cela permet de trier rapidement l‚Äôinformation et de lire plus paisiblement cela au moment opportun.
De plus, √©tant donn√© que l‚Äôinformation est donn√©e par mes <em>following</em> et que je suis les personnes qui m‚Äôint√©ressent vraiment, l‚Äôinformation est alors souvent pertinente. Encore faut-il avoir la bonne TL.
Et  si j‚Äôai besoin d‚Äôaller chercher une information pr√©cise, j‚Äôirai la trouver √† travers un moteur de recherche‚Ä¶ donc aucune probl√©matique de ‚Äúneutralit√©‚Äù de l‚Äôinformation.</p>
</li>
<li><p>De plus, √©tant donn√© que je fais justement cette veille via Twitter, cela me permet d‚Äôavoir qu‚Äôun seul outil. Cela m‚Äôennuie au plus haut point de collectionner les outils. Je suis certes partisant d‚Äôutiliser le bon outil pour chaque t√¢che plut√¥t qu‚Äôun couteau-suisse, mais finalement Twitter et un lecteur de flux ne sont pas si √©loign√©s.</p>
</li>
<li><p>Enfin, la majorit√© des blogs / sites que j‚Äôappr√©cie ont leur propre compte twitter qui postent l‚Äôurl de leurs articles, il suffit alors de les suivre. Et si ce n‚Äôest pas le cas, je vous montrerai une petite astuce pour que √ßa le soit.</p>
</li>
</ul>
<p>Vous vous sentez chaud(e) pour commencer ? Tr√®s bien, c‚Äôest parti !</p>
<h2 id="creer-une-liste-twitter"><a class="putainde-Title-anchor" href="#creer-une-liste-twitter">#</a>Cr√©er une liste Twitter</h2><p>Pour cr√©er une liste, aucun probl√®me, vous allez dans ‚ÄúMe‚Äù dans le <em>header</em> puis ‚ÄúList‚Äù dans la colonne de gauche pour vous retrouver ici :</p>
<p><img src="../../../images/posts/twitter/twitter-list.jpg" alt=""></p>
<p>Puis vous cliquez sur <code>Create list</code> et vous rentrez les informations que vous souhaitez :</p>
<p><img src="../../../images/posts/twitter/create-list.png" alt=""></p>
<p>Nous voil√† avec notre belle liste. Il n‚Äôy a plus qu‚Äô√† la remplir de jolis <em>following</em>.</p>
<p>Prenons par exemple <code>@nodenpm</code>, un beau <em>bot</em> tweetant les nouveaux packages node.js ou/et les updates de ces packages.</p>
<p><img src="../../../images/posts/twitter/nodenpm.jpg" alt=""></p>
<p>Ajoutons-le √† notre liste.</p>
<p><img src="../../../images/posts/twitter/add-in-list.png" alt=""></p>
<p>Nous voil√† maintenant avec notre liste comprenant un <em>following</em>. Ce qui en ayant ajout√© quelques comptes donnera quelque chose comme ceci :</p>
<p><img src="../../../images/posts/twitter/twitter-list-read.jpg" alt=""></p>
<p>Vous pouvez maintenant appr√©cier votre lecteur de flux.</p>
<p>Oh mais ! C‚Äôest l√† que vous constatez qu‚Äôun de vos sites pr√©f√©r√©s n‚Äôa pas de compte Twitter ! Que faire ? Haha, et si on utilisait la puissance de IFTTT pour se cr√©er un bot twitter qui tweet chaque nouvel article d‚Äôun des sites que vous appr√©ciez ?! Mais ouais !</p>
<h2 id="ifttt-la-solution-pour-parfaire-notre-lecteur"><a class="putainde-Title-anchor" href="#ifttt-la-solution-pour-parfaire-notre-lecteur">#</a>IFTTT, la solution pour parfaire notre lecteur</h2><p>Mais avant tout, cr√©ons notre compte twitter ‚Äúbot‚Äù qui va tweeter ce qu‚Äôon souhaite.</p>
<h3 id="compte-twitter-bot-"><a class="putainde-Title-anchor" href="#compte-twitter-bot-">#</a>Compte twitter ‚Äúbot‚Äù</h3><ul>
<li>D√©connectez-vous</li>
<li>Inscrivez-vous √† nouveau sur Twitter (le mien s‚Äôappelle <a href="https://twitter.com/kud_feeds">@kud_feeds</a> par exemple)</li>
<li>Mettez-lui une belle bio, un bel avatar</li>
<li>D√©connectez-vous √† nouveau</li>
<li>Connectez-vous avec votre vrai compte</li>
<li>Ajoutez votre ‚Äúbot‚Äù √† la liste que vous venez de cr√©er pr√©c√©demment</li>
</ul>
<p>‚Ä¶ et voil√† !</p>
<h3 id="ifttt"><a class="putainde-Title-anchor" href="#ifttt">#</a>IFTTT</h3><p><img src="../../../images/posts/ifttt.png" alt=""></p>
<p>Maintenant, IFTTT.</p>
<blockquote>
<p>IFTTT (‚ÄúIf This Then That‚Äù) est un service qui permet aux utilisateurs de connecter diff√©rentes applications ensemble √† travers de simples conditions nomm√©es ‚Äúrecettes‚Äù.</p>
</blockquote>
<p>IFTTT va vous permettre d‚Äôaller pomper les flux {rss|atom} de vos sites pr√©f√©r√©s puis ayant acc√®s √† votre <em>bot</em> va permettre de tweeter le contenu des flux ! C‚Äôest pas beau √ßa hein ?! =)</p>
<ul>
<li>Allez sur <a href="https://ifttt.com">ifttt.com</a></li>
<li>Cr√©ez-vous un compte (je vous conseille de cr√©er un compte sp√©cialement pour le <em>bot</em> car IFTTT ne propose de relier qu‚Äôun seul compte twitter. Du coup, si comme moi vous appr√©ciez IFTTT et que vous souhaitez autant utiliser IFTTT pour votre compte twitter principal que votre compte <em>bot</em>, je vous conseille de vous cr√©er deux comptes IFTTT)</li>
<li>Cr√©ez une nouvelle recette en cliquant sur <code>Create</code></li>
<li>Cliquez sur <code>this</code></li>
<li>Puis <code>feed</code></li>
<li>Choissisez le <em>trigger</em> (‚Äúd√©clencheur‚Äù) que vous souhaitez, moi je prends plut√¥t le premier <code>New feed item</code> (le plus simple)</li>
<li>Indiquez l‚Äôurl du flux de votre site, par exemple <code>http://dribbble.com/_kud/shots/following.rss</code></li>
<li>Puis <code>then</code></li>
<li>Twitter</li>
<li><code>Post a tweet</code></li>
<li>Laissez tel quel le <em>template</em> de base pour le moment (vous pourrez le changer quand vous serez √† l‚Äôaise avec IFTTT)</li>
<li>Mettez la description qui va bien</li>
</ul>
<p>Et on est bon.</p>
<p>Vous avez maintenant une nouvelle recette qui d√®s qu‚Äôun article sortira, un tweet de votre <em>bot</em> apparaitra. Vous pouvez d‚Äôailleurs v√©rifier que tout marche bien en cliquant sur la fl√®che <em>Check Recipe Now</em>.</p>
<p>Vous n‚Äôaurez plus qu‚Äô√† cr√©er une nouvelle recette en dupliquant cette recette √† chaque fois que vous voudrez suivre un nouveau flux. Certes √©ventuellement plus contraignant qu‚Äôun vrai lecteur de flux mais vous y gagnerez largement par la suite ;)</p>
<p>Et voil√†, nous avons maintenant une belle liste Twitter qui repr√©sentre votre lecteur de flux. Voici la mienne : <a href="https://twitter.com/_kud/lists/feeds">https://twitter.com/_kud/lists/feeds</a></p>
<p>Vous pouvez m√™me pousser le vice en cr√©ant plusieurs listes par cat√©gorie mais √ßa sous-entend aussi de cr√©er des <em>bots</em> et donc des comptes IFTTT par cat√©gorie. Heureusement que j‚Äôen ai qu‚Äôune. ;)</p>
<p>Enjoy!</p>

]]></description><pubDate>Wed, 26 Feb 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/hack/twitter-comme-lecteur-de-flux/</link><guid isPermaLink="true">http://putaindecode.fr/posts/hack/twitter-comme-lecteur-de-flux/</guid></item><item><title>Comment en finir avec les pr√©fixes CSS</title><description><![CDATA[
<p>En mettant de c√¥t√© le d√©bat trollesque <em>faut-il ou pas des pr√©fixes CSS ?</em>
(car avouons-le, ils sont l√†, il faut faire avec), on ne va pas se le cacher,
les pr√©fixes CSS √ßa nous brise tous les‚Ä¶ touches du clavier.
Eh bien oui, sans automatisation on est oblig√© de se taper des caract√®res en plus.
M√™me avec un IDE correct, on peut faire √ßa rapidement, mais √ßa n√©cessite
presque √† chaque fois une action de notre part.</p>
<h2 id="prefixer-via-des-outils-en-ligne"><a class="putainde-Title-anchor" href="#prefixer-via-des-outils-en-ligne">#</a>Pr√©fixer via des outils en ligne</h2><p>Les √©l√®ves au fond de la classe me montreront de suite des solutions comme
<a href="http://prefixmycss.com/">prefixmycss.com</a> ou l‚Äôancien prefixr.
Inopin√©ment, un moche ‚ÄúMourrez moi sile vou pler‚Äù sort de mon corps.
Non, s√©rieusement, ce n‚Äôest pas une fa√ßon de faire √ßa. Aller sur une web app √†
chaque fois que je veux pr√©fixer mes CSS ? S√©rieusement ?
Vous avez qu‚Äô√† aussi faire un service postal o√π j‚Äôenvoie mes fichiers CSS dans
une cl√© USB et qu‚Äôon me renvoie sous 48h avec les pr√©fixes ajout√©s.
Super pratique.</p>
<h2 id="prefixer-via-javascript"><a class="putainde-Title-anchor" href="#prefixer-via-javascript">#</a>Pr√©fixer via JavaScript</h2><p>Une autre solution serait <a href="http://leaverou.github.io/prefixfree/">prefix-free</a>,
mais je ne vais m√™me pas en parler tellement l‚Äôid√©e de d√©pendre de JavaScript pour
avoir un <code>border-radius</code> ou une <code>transition</code> CSS me donne une migraine.
Je vous passe les d√©tails niveau performance. Selon les cas, on pourrait m√™me avoir
un petit flash visuel sans les propri√©t√©s pr√©fix√©es.
Non mais fl√ªte. On ne fait pas √ßa. On n‚Äôalourdit pas une page web avec du JavaScript
pour parser la feuille de style et r√©int√©grer des pr√©fixes quoi. Au secours.</p>
<h2 id="prefixer-via-les-pre-processeurs-css"><a class="putainde-Title-anchor" href="#prefixer-via-les-pre-processeurs-css">#</a>Pr√©fixer via les pr√©-processeurs CSS</h2><p>Alors l√†, j‚Äôen entends d√©j√† qui parle √† voix haute au milieu de la classe :</p>
<blockquote>
<p>Bah lui c‚Äôest clair il‚Äôconnait pas les pr√©-processeurs CSS le noube</p>
</blockquote>
<p>Sans rentrer dans un d√©bat trollesque (encore un), √† part peut-√™tre avec <em>Stylus</em> et ces
mixins transparent (coucou <em><a href="http://visionmedia.github.io/nib/">Nib</a></em>),
on est oblig√© de rajouter du code.
Avec <em>Sass</em> il faudra (en scss) rajouter <code>@include</code> et un couple de parenth√®se (et
au passage avoir <em>Compass</em> si on ne veut pas coder les mixins √† la main).
Avec <em>Less</em> il faudra aussi une librairie <em>Less Hat</em> si on n‚Äôa pas envie de se taper
du mixin qui donne de la naus√©e comme on peut voir sur la
<a href="http://lesscss.org/">page d‚Äôaccueil</a>.</p>
<h2 id="les-prefixes-c-est-comme-le-lait-a-tourne"><a class="putainde-Title-anchor" href="#les-prefixes-c-est-comme-le-lait-a-tourne">#</a>Les pr√©fixes, c‚Äôest comme le lait, √ßa tourne</h2><p>D‚Äôailleurs, parlons en vite fait de cette page d‚Äôaccueil qui au jour o√π j‚Äô√©cris
ce post, comporte <b>en premier exemple</b> un mixin pour <code>box-shadow</code>
(hashtag ohlol).</p>
<p>Certaines propri√©t√©s comme <code>box-shadow</code>, ou encore <code>border-radius</code>, sont
aujourd‚Äôhui pr√©fix√©es √† tort, car comme on peut le voir sur le site de
<a href="http://caniuse.com/">CanIUse.com</a>, elles n‚Äôont plus vraiment besoin d‚Äô√™tre pr√©fix√©es, √†
moins que vous supportiez encore Firefox 3.6, Safari iOS 3 ou Android 2‚Ä¶
Je vous renvoie rapidement sur ce (vieil) article de Chris Coyier
<a href="http://css-tricks.com/do-we-need-box-shadow-prefixes/">Do we need box-shadow or border-radius prefixes anymore?</a>
en guise de m√©mo :)</p>
<p>Sans √™tre de mauvaise foi, on va vite avouer qu‚Äôon ne peut pas forc√©ment tout savoir.
Donc on ne peut pas √™tre au top pour conna√Ætre quand il faut ou quand il n‚Äôy a plus
besoin de pr√©fixer x ou y (oui bon x et y ne sont pas des propri√©t√©s CSS, c‚Äôest
pour l‚Äôexemple).
Qui sait qu‚Äôon peut enfin arr√™ter de pr√©fixer box-sizing dans Firefox depuis la 29 ?
Ou la 30 je ne sais plus‚Ä¶</p>
<p>Bon mais alors comment faire ? J‚Äôentends les fayots du premier rang parler d‚Äôauto‚Ä¶
auto‚Ä¶ AUTOPREFIXER ?!</p>
<p>MAIS C‚ÄôEST POSSIBLE √áA ?</p>
<p>Bon allons √† l‚Äôessentiel, assez troll√©.</p>
<h1 id="autoprefixer"><a class="putainde-Title-anchor" href="#autoprefixer">#</a>Autoprefixer</h1><p>Ce magnifique outil, bas√© sur une solide base de donn√©es (au hasard, CanIUse.com),
permet de pr√©fixer automatiquement vos CSS, et ce, de mani√®re intelligente.
Vous pouvez en effet configurer autoprefixer, afin de lui pr√©ciser quel
navigateur vous voulez utiliser.
Vous pouvez au choix lui demander de supporter X versions en arri√®re, les versions
qui ont un usage global &gt; √† Y% de trafic, ou encore une version minimale donn√©e.</p>
<p>Voici quelques exemples de configuration.</p>
<pre><code class="lang-js">// Je supporte une version en arri√®re et les navigateurs qui ont plus de <span class="hljs-number">1</span>% de trafic ainsi qu<span class="hljs-attribute">'Internet</span> Explorer <span class="hljs-number">7</span>
autoprefixer(<span class="hljs-string">"last 1 version"</span>, <span class="hljs-string">"&gt; 1%"</span>, <span class="hljs-string">"Explorer 7"</span>).<span class="hljs-keyword">process</span>(css).css;

// Je supporte <span class="hljs-number">2</span> versions en arri√®re, et minimum BlackBerry <span class="hljs-number">10</span> et Android <span class="hljs-number">4</span>
autoprefixer(<span class="hljs-string">"last 2 version"</span>, <span class="hljs-string">"BlackBerry 10"</span>, <span class="hljs-string">"Android 4"</span>).<span class="hljs-keyword">process</span>(css).css;
</code></pre>
<p>Dans ces lignes de code JavaScript‚Ä¶ Quoi attendez c‚Äôest en JavaScript ? Oh le
fourbe, il nous recale sa techno de front-end de mes deux.
Bon faites pas les relous, que vous soyez front-end ou back-end, vous avez Node.js hein ?</p>
<p>Donc aucune inqui√©tude, il existe une commande pour que vous puissiez faire √ßa rapidement :</p>
<pre><code class="lang-shell"># <span class="hljs-keyword">on</span> install autoprefixer via npm <span class="hljs-keyword">en</span> <span class="hljs-keyword">global</span>
npm install --<span class="hljs-keyword">global</span> autoprefixer
# <span class="hljs-keyword">ou</span> pour les fain√©ants
npm <span class="hljs-keyword">i</span> -<span class="hljs-keyword">g</span> autoprefixer

# <span class="hljs-keyword">on</span> prefixe !
autoprefixer *.css
</code></pre>
<p>L√† bon de suite, r√©flexe, vous me sautez dessus √† la gorge en me criant:</p>
<blockquote>
<p>NON MAIS T‚ÄôAS CRU QUE J‚ÄôALLAIS TAPER LA COMMANDE √Ä CHAQUE FOIS TOCARD ?</p>
</blockquote>
<p>No problem, comme tout outil bien foutu, il y‚Äôa une multitudes de fa√ßon de
l‚Äôutiliser :</p>
<ul>
<li>via <a href="https://github.com/ai/autoprefixer#nodejs">Node.js</a> directement,</li>
<li>en plugin <a href="https://www.npmjs.org/package/gulp-autoprefixer">Gulp</a>,</li>
<li>en plugin <a href="https://github.com/ai/autoprefixer#grunt">Grunt</a>,</li>
<li>via <a href="https://github.com/ai/autoprefixer#compass">Compass</a>,</li>
<li>en plugin <a href="https://github.com/ai/autoprefixer#stylus">Stylus</a>,</li>
<li>avec <a href="https://github.com/ai/autoprefixer#ruby-on-rails">RoR</a> ou <a href="https://github.com/ai/autoprefixer#ruby">Ruby</a>,</li>
<li>avec l‚Äôapplication <a href="https://github.com/ai/autoprefixer#prepros">Prepros</a></li>
<li>via <a href="https://github.com/ai/autoprefixer#mincer">Mincer</a></li>
<li>via <a href="https://github.com/ai/autoprefixer#middleman">Middleman</a></li>
<li>avec <a href="https://github.com/ai/autoprefixer#php">PHP</a> (vous avez bien lu),</li>
</ul>
<p>Bien entendu, parfois, lorsqu‚Äôon fait un petit bout de CSS standalone,
vous avez aussi √† dispo des plugins pour
<a href="https://github.com/sindresorhus/sublime-autoprefixer">Sublime Text</a>
 ou <a href="https://github.com/mikaeljorhult/brackets-autoprefixer">Brackets</a>
 afin de ne pas forc√©ment avoir √† utiliser les app ou process cit√©s juste avant.</p>
<figure>
  <img src="../../../images/posts/sublime-text/autoprefixer.gif" alt="sublime text autoprefixer preview">
  <figcaption>Int√©gration dans Sublime Text</figcaption>
</figure>

<p>Cet outil est maintenant bas√© sur <a href="https://github.com/ai/postcss">PostCSS</a>,
un post-processeur CSS. Vous pouvez donc l‚Äôutiliser en plugin pour ce post-proc√©sseur.</p>
<p>Attends attends, un WAT ? Un <strong>POST</strong>-processeur ? Oui tu as bien lu car les
pr√©-processeurs c‚Äôest so 2000. Regarde par l√† <a href="/posts/css/le-point-sur-les-preprocesseurs/">Le point sur les pr√©-processeurs CSS</a> ;)</p>
<p>Tout plein de -moz-bisous.</p>
<hr />

<p>PS: Convaincu par cette solution ? Tant mieux, elle est simple √† mettre en place.
Tout √ßa est d√©crit dans la <a href="/posts/css/mise-en-place-autoprefixer/">mise en place d‚Äôautoprefixer</a>
avec des exemples concrets pour ajouter √ßa dans un workflow existant.</p>

]]></description><pubDate>Tue, 25 Feb 2014 00:00:00 GMT</pubDate><link>http://putaindecode.fr/posts/css/comment-en-finir-avec-les-prefixes/</link><guid isPermaLink="true">http://putaindecode.fr/posts/css/comment-en-finir-avec-les-prefixes/</guid></item></channel></rss>