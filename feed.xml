<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[putaindecode.io]]></title><description><![CDATA[putaindecode.io]]></description><link>http://putaindecode.io</link><generator>RSS for Node</generator><lastBuildDate>Tue, 01 Dec 2015 22:13:29 GMT</lastBuildDate><atom:link href="http://putaindecode.io/feed.xml" rel="self" type="application/rss+xml"/><item><title><![CDATA[Avantages Ã  diviser ses storyboards sur iOS/OS X]]></title><description><![CDATA[<p>Aujourdâ€™hui, on va parler dâ€™un sujet qui parle Ã  tous les devs iOSÂ : les
<strong>storyboards</strong>.</p>
<blockquote>
<p>Pour faire courtÂ :  les storyboards sont les fichiers dâ€™interface sous iOS/OSÂ X.
Câ€™est lÃ  oÃ¹ vous placer vos <code>vues</code> dans vos <code>scenes</code>, vous les positionnez
entre elles, vous pouvez crÃ©er des interactions entre les <code>scenes</code> pour passer
de lâ€™une Ã  lâ€™autre. Câ€™est proche des XAML de Visual ou des Layouts dâ€™Android,
mais avec la notion de relation entre les <code>scenes</code> en plus. Ã‡a permet de crÃ©er
graphiquement et simplement le workflow de lâ€™application.</p>
</blockquote>
<h2 id="pourquoi-d-couper-son-storyboard"><a class="markdownIt-Anchor" href="#pourquoi-d-couper-son-storyboard">#</a> Pourquoi dÃ©couper son storyboard</h2>
<p>Pouvoir relier aussi facilement toutes les <code>scenes</code> dans un mÃªme storyboard,
câ€™est gÃ©nial. Mais alors pourquoi les diviser ?</p>
<h3 id="viter-des-conflits"><a class="markdownIt-Anchor" href="#viter-des-conflits">#</a> Ã‰viter des conflits</h3>
<p>Si vous travaillez Ã  plusieurs, vous avez sÃ»rement dÃ©jÃ  rencontrÃ© des
conflits lors de merges oÃ¹ tout le monde a dÃ©cidÃ© dâ€™Ã©diter le <code>storyboard</code> en
mÃªme temps. Le storyboard est donc corrompu et le seul moyen de le rÃ©cupÃ©rer
est de prendre celui de quelquâ€™un et refaire les changements ou de corriger les
sources en croisant les doigts. AccompagnÃ© de 4Â L de cafÃ©.<br>
Avec plusieurs <code>storyboards</code>Â : chacun bosse sur sa partie graphique. Si <em>Bob</em>
travaille sur les <em>vues de comptes</em> et <em>Joe</em> sur les <em>settings</em> de lâ€™app,
chacun a un storyboard et ne change pas ceux des autres. Ã‡a fait beaucoup moins
de chance dâ€™avoir des conflits, voire aucun si tout le monde se met dâ€™accord !</p>
<h3 id="les-gros-projets-plus-faciles-diter-comprendre"><a class="markdownIt-Anchor" href="#les-gros-projets-plus-faciles-diter-comprendre">#</a> Les gros projets plus faciles Ã  Ã©diter/comprendre</h3>
<p>Pour les gros projets, avec beaucoup de <code>scenes</code>, ranger ces <code>scenes</code> par
groupes dans diffÃ©rents <code>storyboards</code> peut Ãªtre un bon moyen de sâ€™y retrouver
facilement. Vous nâ€™avez pas Ã  dÃ©zoomer Ã  chaque fois que vous voulez chercher
une <code>scene</code> Ã  lâ€™autre bout du storyboard.</p>
<h3 id="augmenter-la-vitesse-de-compilation"><a class="markdownIt-Anchor" href="#augmenter-la-vitesse-de-compilation">#</a> Augmenter la vitesse de compilation</h3>
<p>Recompiler tout le storyboard juste pour un label changÃ© Ã§a ne sert pas Ã 
grand chose et certains <code>storyboards</code> peuvent Ãªtre long Ã  compiler. Donc moins
dâ€™Ã©lÃ©ments vous avez Ã  recompiler, plus vite Ã§a ira.</p>
<h3 id="r-utilisation-de-code"><a class="markdownIt-Anchor" href="#r-utilisation-de-code">#</a> RÃ©utilisation de code</h3>
<p>Imaginons que vous bossez dans une boÃ®te qui fait souvent les mÃªmes apps
pour les clients, vous pouvez vous faire des petits storyboards que vous
rÃ©utiliserez et customiserez grÃ¢ce aux contrÃ´leurs (couleur, font, etc). Ã‡a peut
faire gagner du temps, mais aussi beaucoup en perdre si vous en abusez âš ï¸.</p>
<h2 id="comment-faire"><a class="markdownIt-Anchor" href="#comment-faire">#</a> Comment faire</h2>
<p>Rentrons dans le vif du sujet, le cÃ´tÃ© technique. En quelques lignes de codeÂ :</p>
<pre><code class="language-swift"><span class="hljs-comment">// *** Swift ***</span>
<span class="hljs-comment">// Aller chercher le storyboard</span>
<span class="hljs-keyword">let</span> storyboardSettings = <span class="hljs-type">UIStoryboard</span>(name: <span class="hljs-string">"settings"</span>, bundle: <span class="hljs-literal">nil</span>)
<span class="hljs-comment">// Aller chercher le contrÃ´leur qui est dans le storybard</span>
<span class="hljs-keyword">let</span> controllerSettings =
storyboardSettings.instantiateViewControllerWithIdentifier(<span class="hljs-string">"settingsController"</span>)
<span class="hljs-comment">// PrÃ©senter</span>
<span class="hljs-keyword">self</span>.presentViewController(controllerSettings,animated: <span class="hljs-literal">true</span>, completion: <span class="hljs-literal">nil</span>)</code></pre>
<pre><code class="language-objc"><span class="hljs-comment">// *** Objective C ***</span>
<span class="hljs-comment">// Aller chercher le sotyboard</span>
<span class="hljs-built_in">UIStoryboard</span> * storyboardSettings = [<span class="hljs-built_in">UIStoryboard</span> storyboardWithName:<span class="hljs-string">@"settings"</span>
bundle:<span class="hljs-literal">nil</span>];
<span class="hljs-comment">// Aller chercher le contrÃ´leur qui est dans le storybard</span>
<span class="hljs-built_in">UIViewController</span>* controllerSettings = [storyboardSettings
instantiateViewControllerWithIdentifier:<span class="hljs-string">@"settingsController"</span>];
<span class="hljs-comment">// PrÃ©senter</span>
[<span class="hljs-keyword">self</span> presentViewController:controllerSettings animated:<span class="hljs-literal">YES</span> completion:<span class="hljs-literal">nil</span>];</code></pre>
<p>Rien de plus simpleÂ ! Mais câ€™est bien connu, les dÃ©veloppeurs iOS sont des
fainÃ©ants, alors il y a encore plus simple, sans taper une seule ligne de codeÂ :</p>
<ul>
<li>crÃ©ez un nouveau storyboard pour votre <em>secteur</em>
(Fileâ†’Newâ†’Fileâ†’[OS]â†’User Interface),</li>
<li>ajoutez une <code>scene</code> (<code>UIViewController</code>), mettre lâ€™une en <code>vue initial</code>
(sinon le compilateur nâ€™aime pas),</li>
<li>nommez les <code>storyboardID</code> de chacune de ces <code>scenes</code> dans le menu
<code>Utilies&gt;Identity Inspector</code>,</li>
<li>dans votre storyboard original, dans le menu <code>Utilies&gt;Object Library</code> cherchez
<code>storyboard</code> et ajoutez une <strong><code>Storyboard References</code></strong>,</li>
<li>sur la rÃ©fÃ©rence dans <code>Utilises&gt;Attributes Inspector</code> rentrez le nom dans
votre storyboard (dans <em>storyboard</em>) et remplissez <em>Reference ID</em> avec le
<em>storyboardID</em> de la <code>scene</code>,</li>
<li>pour finir, ajoutez une <code>segue</code>, Ã  partir dâ€™un bouton (par exemple) vers les
<em>Storyboard Reference</em> voulus.</li>
</ul>
<p>Plus long Ã  lire quâ€™Ã  faire !</p>
]]></description><link>http://putaindecode.io/fr/articles/xcode/storyboards/diviser/</link><guid isPermaLink="true">http://putaindecode.io/fr/articles/xcode/storyboards/diviser/</guid><pubDate>Tue, 01 Dec 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[ES6, ES2015 : la dÃ©claration de variables avec const, let et var]]></title><description><![CDATA[<p>ES6 (aussi appelÃ© ES2015) vous apporte de nouvelles faÃ§ons de dÃ©clarer vos
variables grÃ¢ce Ã  <code>let</code> et <code>const</code> mais garde aussi la dÃ©claration par <code>var</code>
dans la spÃ©cification du langage.</p>
<p>PremiÃ¨re Ã©tape, on oublie tout ce quâ€™on sait sur <code>var</code>.</p>
<h1 id="d-clarations"><a class="markdownIt-Anchor" href="#d-clarations">#</a> DÃ©clarations</h1>
<h2 id="const"><a class="markdownIt-Anchor" href="#const">#</a> const</h2>
<p><code>const</code> vous permet de dÃ©clarer une variable Ã  assignation unique bindÃ©e
lexicalement. Bon, Ã§a fait un peu pompeux, alors pour les devs au fond de la
salle Ã  cÃ´tÃ© du radiateur, Ã§a veut simplement dire que vous pouvez dÃ©clarer une
variable qui ne contiendra quâ€™une valeur et qui sera scopÃ©e au niveau du bloc.</p>
<p>Si vous avez dÃ©jÃ  lu des posts ou des ressources parlant de <code>const</code>, mÃ©fiez-vous
: ce ne sont pas des vraies constantes au sens <em>valeur</em> de variable. Ce sont des
constantes au niveau rÃ©fÃ©rence. Câ€™est Ã  dire que le contenu dâ€™un tableau ou dâ€™un
objet dÃ©clarÃ© avec <code>const</code> bloque la rÃ©assignation de la variable, mais ne rend
pas la valeur immutable.</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> foo = <span class="hljs-string">"bar"</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">const</span> foo <span class="hljs-comment">// SyntaxError, la variable a besoin d'Ãªtre assignÃ©e</span>
    <span class="hljs-keyword">const</span> foo = <span class="hljs-string">"qux"</span>
    foo = <span class="hljs-string">"norf"</span> <span class="hljs-comment">// SyntaxError, la variable ne peut pas Ãªtre rÃ©assignÃ©e</span>
    <span class="hljs-built_in">console</span>.log(foo)
    <span class="hljs-comment">// "qux", la variable appartient au scope de son bloc (le "if")</span>
  }
  <span class="hljs-built_in">console</span>.log(foo)
  <span class="hljs-comment">// "bar", la variable appartient au scope de la fonction "fn"</span>
}</code></pre>
<p>Le fonctionnement <code>const</code> peut Ãªtre utilisÃ© de maniÃ¨re cool dans le cas
dâ€™itÃ©rables :</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> el <span class="hljs-keyword">of</span> arr) {
    <span class="hljs-built_in">console</span>.log(el)
  }
}</code></pre>
<p>En effet, on pourrait croire quâ€™un <code>let</code> doit Ãªtre utilisÃ© ici, mais la
dÃ©claration est Ã©valuÃ©e Ã  chaque passage de lâ€™itÃ©rateur, <code>const</code> est donc un
meilleur choix !</p>
<h2 id="let"><a class="markdownIt-Anchor" href="#let">#</a> let</h2>
<p><code>let</code> vous permet de faire pareil que <code>const</code> mais sans la contrainte
dâ€™assignation unique. Vous devriez donc instinctivement voir que les cas
dâ€™utilisation pour <code>let</code> sont les mÃªmes que ceux de <code>var</code>, son ancÃªtre.
Dâ€™ailleurs, vous entendrez souvent : <code>let</code> est le nouveau <code>var</code> (<em><code>let</code> is the
new <code>var</code></em>). Câ€™est en partie vrai car il est capable de faire les mÃªmes choses,
mais en mieux, car il a cette caractÃ©ristique dâ€™Ãªtre scopÃ© au bloc courant.</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">let</span> foo = <span class="hljs-string">"bar"</span>
  <span class="hljs-keyword">var</span> foo2 = <span class="hljs-string">"bar"</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">let</span> foo <span class="hljs-comment">// pas d'erreur, foo === undefined</span>
    <span class="hljs-keyword">var</span> foo2
    <span class="hljs-comment">// Attention, les dÃ©clarations "var" ne sont pas scopÃ©es au niveau bloc</span>
    <span class="hljs-comment">// foo2 est en rÃ©alitÃ© Ã©crasÃ© !</span>
    foo = <span class="hljs-string">"qux"</span>
    foo2 = <span class="hljs-string">"qux"</span>
    <span class="hljs-built_in">console</span>.log(foo)
    <span class="hljs-comment">// "qux", la variable appartient au scope de son blocs (le "if")</span>
    <span class="hljs-built_in">console</span>.log(foo2)
    <span class="hljs-comment">// "qux"</span>
  }
  <span class="hljs-built_in">console</span>.log(foo)
  <span class="hljs-comment">// "bar", la variable appartient au scope de son bloc (la fonction "fn")</span>
  <span class="hljs-built_in">console</span>.log(foo2)
  <span class="hljs-comment">// "qux"</span>
}</code></pre>
<p>Vous pouvez par exemple utiliser <code>let</code> pour vos boucles, la variable servant Ã 
lâ€™itÃ©ration est dÃ©sormais scopÃ©e au niveau de cette boucle et nâ€™entrera pas en
conflit avec votre code autour. Plus de problÃ¨me de <code>i</code> dÃ©jÃ  pris !</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn2</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i=i; i&lt;<span class="hljs-number">10</span>; i++) {
    <span class="hljs-built_in">console</span>.log(i)
  }
  <span class="hljs-built_in">console</span>.log(i)
  <span class="hljs-comment">// 0</span>

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j=i; j&lt;<span class="hljs-number">10</span>; j++) {}
  <span class="hljs-built_in">console</span>.log(j)
  <span class="hljs-comment">// j is not defined</span>
}
fn2() <span class="hljs-comment">// 0, 1, 2, 3, 4, 5, 6, 7, 8, 9</span></code></pre>
<p>Note : lâ€™exemple avec <code>const</code> dans une boucle <code>for ... of</code> ne peut Ãªtre
reproduit ici. En effet, la boucle <code>for</code> classique est impÃ©rative, et la
dÃ©claration nâ€™est effectuÃ©e quâ€™une seule fois au dÃ©but de la boucle. Un <code>const</code>
nâ€™est donc pas utilisable.</p>
<h2 id="var"><a class="markdownIt-Anchor" href="#var">#</a> var</h2>
<p>On a vu <code>const</code>, on a vu <code>let</code>. Avec ces deux nouveaux outils, il ne reste pas
de grande place pour <code>var</code>. Ã€ mon avis, le seul cas dâ€™utilisation valable pour
<code>var</code> est lors de lâ€™utilisation de <code>try</code>/<code>catch</code>, et ce nâ€™est pas dans le cadre
dâ€™un bug, mais juste de syntaxe et de prÃ©fÃ©rence
(<a href="https://twitter.com/getify/status/658662478528643072">exemple</a>).</p>
<h1 id="pi-ge-du-hoisting-et-de-la-tdz-temporal-dead-zone"><a class="markdownIt-Anchor" href="#pi-ge-du-hoisting-et-de-la-tdz-temporal-dead-zone">#</a> PiÃ¨ge du hoisting et de la TDZ (<em>Temporal Dead Zone</em>)</h1>
<p>Pour rappel, JavaScript possÃ¨de un mÃ©canisme de hoisting, par exemple, vous
pouvez Ã©crire :</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(foo) <span class="hljs-comment">// "bar"</span>
  <span class="hljs-keyword">var</span> foo = <span class="hljs-string">"bar"</span>
}</code></pre>
<p>ConcrÃ¨tement, le moteur dâ€™exÃ©cution JavaScript va lire toutes les dÃ©clarations
et remonter celles avec <code>var</code> au dÃ©but du scope de votre fonction.</p>
<p><code>let</code> et <code>const</code> ne bÃ©nÃ©ficient pas de ce mÃ©canisme de hoisting, ce qui peut
mener Ã  des problÃ¨mes de TDZ (<em>Temporal Dead Zone</em>). Vu que la dÃ©claration de
votre variable nâ€™est pas remontÃ©e au scope de la fonction, il existe un moment
oÃ¹ votre variable nâ€™existe pas. Ce moment, câ€™est la TDZ.</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(foo)
  <span class="hljs-comment">// ReferenceError, on est dans la TDZ pour la variable foo</span>
  <span class="hljs-keyword">let</span> foo = <span class="hljs-string">"bar"</span>
}</code></pre>
<h1 id="outro"><a class="markdownIt-Anchor" href="#outro">#</a> Outro</h1>
<p>Comment choisir quelle dÃ©claration de variable utiliser ? Câ€™est trÃ¨s simple :</p>
<ul>
<li>Utilisez une dÃ©claration par <code>const</code> (99% du temps, câ€™est le bon choix)</li>
<li>Si au fil de votre code vous changez sa valeur, modifiez pour un <code>let</code> (1%)</li>
<li>Si vous avez trouvÃ© le pire cas dâ€™utilisation du monde, changez pour un <code>var</code>
(je vous laisse faire le calcul)</li>
</ul>
]]></description><link>http://putaindecode.io/fr/articles/js/es2015/const-let-var/</link><guid isPermaLink="true">http://putaindecode.io/fr/articles/js/es2015/const-let-var/</guid><pubDate>Tue, 01 Dec 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[Tester unitairement des composants React]]></title><description><![CDATA[<p>Lâ€™Ã©quipe de React a implÃ©mentÃ© une fonctionnalitÃ© appelÃ©e
<a href="http://facebook.github.io/react/docs/test-utils.html#shallow-rendering">shallow rendering</a>
(rendu peu profond),
qui permet de rendre un composant avec un seul niveau de profondeur de rendu.</p>
<p>Cela permet du coup de vÃ©rifier ce que le rendu retourne sans avoir Ã  se
soucier du comportement des composants enfants, qui ne sont pas instanciÃ©s ni
rendus. Cela ne nÃ©cessite pas de DOM.</p>
<p>IntÃ©ressant, nâ€™est-ce pas ? Et dâ€™ailleurs, le <em>shallow rendering</em> est
actuellement
<a href="https://discuss.reactjs.org/t/whats-the-prefered-way-to-test-react-js-components/26">la mÃ©thode recommandÃ©e pour tester vos composants React</a>.</p>
<p>Comme vous pourrez le voir dans un article listÃ© Ã  la fin de celui-ci,
le code permettant de tester des composants avec cette technique nâ€™est pas
forcÃ©ment trÃ¨s concis, contrairement Ã  ce quâ€™on pourrait attendre.</p>
<p>Heureusement, <a href="https://github.com/vvo">quelquâ€™un</a> a codÃ© un truc plutÃ´t cool :
<a href="https://github.com/algolia/react-element-to-jsx-string">react-element-to-jsx-string</a>.
Comme le nom lâ€™indique, cette librairie permet de rendre un composant React en
tant que chaÃ®ne JSX.</p>
<p>Câ€™est maintenant les choses deviennent intÃ©ressantesÂ :
avec ces concepts en tÃªte (le shallow render et le rendu de composant en strings
JSX), on peut facilement ajouter de simple tests unitaires sur ses composants.</p>
<p><em>Il y a dâ€™autres techniques pour tester des composants React, et la plupart
implique le DOM. Vous devrez donc Ã©xecuter vos tests dans un navigateur (ou
en utilisant jsdom)Â : vos tests seront plus lents que la technique qui va suivre
(qui pour le coup est plus du vrai test unitaire, dans le sens oÃ¹ vous utilisez
moins de code et ne nÃ©cessitez pas un gros environnement).</em></p>
<h2 id="tester-facilement-des-composants-react-sans-dom"><a class="markdownIt-Anchor" href="#tester-facilement-des-composants-react-sans-dom">#</a> Tester facilement des composants React (sans DOM)</h2>
<p>On va partir avec ce simple composantÂ :</p>
<pre><code class="language-js"><span class="hljs-comment">// web_modules/Picture/index.js</span>

<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>
<span class="hljs-keyword">import</span> { PropTypes } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

const Component = ({
  img,
  title,
  Loader,
  Title,
}) =&gt; (
  &lt;div&gt;
    {
      (!img || !img.src) &amp;&amp; Loader &amp;&amp;
      &lt;Loader /&gt;
    }
    {
      img &amp;&amp; img.src &amp;&amp;
      &lt;img src={ img.src } alt={ img.alt }/&gt;
    }
    {
      title &amp;&amp; Title &amp;&amp;
      &lt;Title text={ title } /&gt;
    }
  &lt;/div&gt;
)

Component.propTypes = {
  img: PropTypes.object,
  title: PropTypes.string,
  Loader: PropTypes.func.isRequired,
  Title: PropTypes.func.isRequired,
}

Component.displayName = <span class="hljs-string">"Picture"</span>

export default Component</code></pre>
<p>Ce composant affiche une image avec un composant pour le titre.
Si les donnÃ©es de lâ€™image ne sont pas prÃªtes, on peut afficher un composant pour
indiquer le chargement.</p>
<p>Ã‰crivons maintenant un petit test. Pour notre exemple, on va utiliser
<a href="https://medium.com/javascript-scene/why-i-use-tape-instead-of-mocha-so-should-you-6aa105d8eaf4">tape</a>
couplÃ© avec <a href="https://github.com/atabel/tape-jsx-equals">tape-jsx-equals</a>,
mais vous nâ€™aurez pas de mal Ã  trouver un paquet Ã 
<a href="https://www.npmjs.com/search?q=expect+jsx">votre sauce sur npm</a>.</p>
<pre><code class="language-js"><span class="hljs-comment">// web_modules/Picture/__tests__/index.js</span>

<span class="hljs-keyword">import</span> tape <span class="hljs-keyword">from</span> <span class="hljs-string">"tape"</span>
<span class="hljs-keyword">import</span> addAssertions <span class="hljs-keyword">from</span> <span class="hljs-string">"extend-tape"</span>
<span class="hljs-keyword">import</span> jsxEquals <span class="hljs-keyword">from</span> <span class="hljs-string">"tape-jsx-equals"</span>
const test = addAssertions(tape, { jsxEquals })

<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>
<span class="hljs-keyword">import</span> { createRenderer } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-addons-test-utils"</span>

<span class="hljs-keyword">import</span> Picture <span class="hljs-keyword">from</span> <span class="hljs-string">".."</span>

// fixtures (empty and stateless react components)
const Loader = () =&gt; {}
const Title = () =&gt; {}

test(<span class="hljs-string">"PageContainer is properly rendered"</span>, (t) =&gt; {
  const renderer = createRenderer()

  renderer.render(
    &lt;Picture
      Loader={ Loader }
      Title={ Title }
    /&gt;
  )
  t.jsxEquals(
    renderer.getRenderOutput(),
    &lt;div&gt;
      &lt;Loader /&gt;
    &lt;/div&gt;,
    <span class="hljs-string">"can render a Loader component if no image data are passed"</span>
  )

  renderer.render(
    &lt;Picture
      Loader={ Loader }
      Title={ Title }
      img={ {
        src: <span class="hljs-string">"SRC"</span>,
        alt: <span class="hljs-string">"ALT"</span>,
      } }
    /&gt;
  )
  t.jsxEquals(
    renderer.getRenderOutput(),
    &lt;div&gt;
      &lt;img src=<span class="hljs-string">"SRC"</span> alt=<span class="hljs-string">"ALT"</span> /&gt;
    &lt;/div&gt;,
    <span class="hljs-string">"should render an image if data are passed"</span>
  )

  renderer.render(
    &lt;Picture
      Loader={ Loader }
      Title={ Title }
      img={ {
        src: <span class="hljs-string">"SRC"</span>,
        alt: <span class="hljs-string">"ALT"</span>,
      } }
      title={ <span class="hljs-string">"TITLE"</span> }
    /&gt;
  )
  t.jsxEquals(
    renderer.getRenderOutput(),
    &lt;div&gt;
      &lt;img src=<span class="hljs-string">"SRC"</span> alt=<span class="hljs-string">"ALT"</span> /&gt;
      &lt;Title text=<span class="hljs-string">"TITLE"</span> /&gt;
    &lt;/div&gt;,
    <span class="hljs-string">"can render a Title if data are passed"</span>
  )

  t.end()
})</code></pre>
<p>Ces tests sont une couverture minimale pour vous assurer que vous ne cassez rien
lorsque vous travaillez sur votre composant.</p>
<p>Comme vous pouvez le constater, les tests sont assez simples Ã  Ã©crire et vont
droit au but.
<strong>Ce qui est intÃ©ressant ici, câ€™est que nous ne comparons pas Ã  lâ€™aide de
simples chaÃ®nes. Nous utilisons directement des composants React.</strong></p>
<p>Vous pouvez tranquillement exÃ©cuter lâ€™exemple complet et le rÃ©cupÃ©rer depuis le
repositoryÂ :</p>
<p><a href="https://github.com/MoOx/react-component-unit-testing-example">github.com/MoOx/react-component-unit-testing-example</a></p>
<p>Cet exemple contient les commandes et dÃ©pendances
(dÃ©finies dans le <code>package.json</code>)
dont vous aurez besoin.</p>
<h1 id="et-comment-tester-les-v-nements-comme-onclick"><a class="markdownIt-Anchor" href="#et-comment-tester-les-v-nements-comme-onclick">#</a> Et comment tester les Ã©vÃ¨nements comme <code>onClick</code> ?</h1>
<p>Vous nâ€™avez pas Ã  reproduire le clic complÃ¨tement.</p>
<p><strong>Vos tests nâ€™ont pas besoin de vÃ©rifier que la prop <code>onClick</code> va bien Ãªtre
exÃ©cutÃ©e lorsque vous cliquerez sur un Ã©lÃ©ment du DOM.</strong>
<em>React couvre probablement cela dans sa suite de tests.</em></p>
<p>Ce que vous avez besoin de tester, câ€™est que la valeur que vous passez au
<code>onClick</code> fait bien ce que vous voulez.
En gros, si vous avez un bout de code qui ressemble Ã 
<code>onClick={ yourCallback }</code>, vous nâ€™avez tout simplement quâ€™Ã  appeler directement
<code>yourCallback()</code> dans vos tests juste avant votre comparaison.
Câ€™est bien assez !</p>
<p>Si vous voulez aller un peu plus loin, vous pouvez continuer par lireÂ :</p>
<ul>
<li><a href="https://simonsmith.io/unit-testing-react-components-without-a-dom/"><em>Unit testing React components without a DOM</em></a>,
par Simon Smith, qui couvre le mÃªme sujet, sans la simplicitÃ© de la comparaison
JSX,</li>
<li><a href="https://blog.algolia.com/how-we-unit-test-react-components-using-expect-jsx/"><em>How we unit test React components using expect-jsx</em></a>
sur le blog dâ€™Algolia, qui explique pourquoi ils ont choisi et crÃ©Ã© les outils
pour cette approche.</li>
</ul>
<p>Avec ces exemples, nous espÃ©rons vraiment que vous nâ€™aurez plus peur de tester
votre code et que vous nâ€™hÃ©siterez plus Ã  couvrir tous vos composants React de
tests ğŸ˜.</p>
]]></description><link>http://putaindecode.io/fr/articles/js/react/test-unitaires/</link><guid isPermaLink="true">http://putaindecode.io/fr/articles/js/react/test-unitaires/</guid><pubDate>Tue, 24 Nov 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[Unit testing React components]]></title><description><![CDATA[<p>The React team has implemented a feature called
<a href="http://facebook.github.io/react/docs/test-utils.html#shallow-rendering">shallow rendering</a>,
which</p>
<blockquote>
<p>lets you render a component â€œone level deepâ€ and assert facts about
what its render method returns, without worrying about the behavior of child
components, which are not instantiated or rendered.
This does not require a DOM.</p>
</blockquote>
<p>Sounds good, right? And guess what, shallow rendering is currently the
<a href="https://discuss.reactjs.org/t/whats-the-prefered-way-to-test-react-js-components/26">preferred way to test your React components</a>.</p>
<p>As you can see in the post mentioned at the end of this one, the
actual code to test some components might seem a bit longer that what you could
expect.</p>
<p>Hopefully, <a href="https://github.com/vvo">someone</a> created something pretty cool:
<a href="https://github.com/algolia/react-element-to-jsx-string">react-element-to-jsx-string</a>.
As the name of the package says, this library helps to render a react component
into a JSX string.</p>
<p>Now things start to become interesting:
with those two things in mind (shallow render and react components as JSX strings),
we can easily add some basic unit tests to some components.</p>
<p><em>There are others techniques to test React components, and most of those
involve the DOM. This means you will need to run your tests in the browser (or
using jsdom): your tests will be slower than the following method
(which is more real unit testing since you execute less code and do not require
a huge environment).</em></p>
<h2 id="easy-unit-testing-react-components-without-a-dom"><a class="markdownIt-Anchor" href="#easy-unit-testing-react-components-without-a-dom">#</a> Easy unit testing React components (without a DOM)</h2>
<p>Letâ€™s do this with the following (dumb) component:</p>
<pre><code class="language-js"><span class="hljs-comment">// web_modules/Picture/index.js</span>

<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>
<span class="hljs-keyword">import</span> { PropTypes } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

const Component = ({
  img,
  title,
  Loader,
  Title,
}) =&gt; (
  &lt;div&gt;
    {
      (!img || !img.src) &amp;&amp; Loader &amp;&amp;
      &lt;Loader /&gt;
    }
    {
      img &amp;&amp; img.src &amp;&amp;
      &lt;img src={ img.src } alt={ img.alt }/&gt;
    }
    {
      title &amp;&amp; Title &amp;&amp;
      &lt;Title text={ title } /&gt;
    }
  &lt;/div&gt;
)

Component.propTypes = {
  img: PropTypes.object,
  title: PropTypes.string,
  Loader: PropTypes.func.isRequired,
  Title: PropTypes.func.isRequired,
}

Component.displayName = <span class="hljs-string">"Picture"</span>

export default Component</code></pre>
<p>This component displays an image with a title component.
If the image data are not ready yet, it can display a loader component.</p>
<p>Now letâ€™s write some simple test for it. For the example we will use
<a href="https://medium.com/javascript-scene/why-i-use-tape-instead-of-mocha-so-should-you-6aa105d8eaf4">tape</a>
with the help of <a href="https://github.com/atabel/tape-jsx-equals">tape-jsx-equals</a>,
but you will find
<a href="https://www.npmjs.com/search?q=expect+jsx">all kind of flavors on npm</a>.</p>
<pre><code class="language-js"><span class="hljs-comment">// web_modules/Picture/__tests__/index.js</span>

<span class="hljs-keyword">import</span> tape <span class="hljs-keyword">from</span> <span class="hljs-string">"tape"</span>
<span class="hljs-keyword">import</span> addAssertions <span class="hljs-keyword">from</span> <span class="hljs-string">"extend-tape"</span>
<span class="hljs-keyword">import</span> jsxEquals <span class="hljs-keyword">from</span> <span class="hljs-string">"tape-jsx-equals"</span>
const test = addAssertions(tape, { jsxEquals })

<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>
<span class="hljs-keyword">import</span> { createRenderer } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-addons-test-utils"</span>

<span class="hljs-keyword">import</span> Picture <span class="hljs-keyword">from</span> <span class="hljs-string">".."</span>

// fixtures (empty and stateless react components)
const Loader = () =&gt; {}
const Title = () =&gt; {}

test(<span class="hljs-string">"PageContainer is properly rendered"</span>, (t) =&gt; {
  const renderer = createRenderer()

  renderer.render(
    &lt;Picture
      Loader={ Loader }
      Title={ Title }
    /&gt;
  )
  t.jsxEquals(
    renderer.getRenderOutput(),
    &lt;div&gt;
      &lt;Loader /&gt;
    &lt;/div&gt;,
    <span class="hljs-string">"can render a Loader component if no image data are passed"</span>
  )

  renderer.render(
    &lt;Picture
      Loader={ Loader }
      Title={ Title }
      img={ {
        src: <span class="hljs-string">"SRC"</span>,
        alt: <span class="hljs-string">"ALT"</span>,
      } }
    /&gt;
  )
  t.jsxEquals(
    renderer.getRenderOutput(),
    &lt;div&gt;
      &lt;img src=<span class="hljs-string">"SRC"</span> alt=<span class="hljs-string">"ALT"</span> /&gt;
    &lt;/div&gt;,
    <span class="hljs-string">"should render an image if data are passed"</span>
  )

  renderer.render(
    &lt;Picture
      Loader={ Loader }
      Title={ Title }
      img={ {
        src: <span class="hljs-string">"SRC"</span>,
        alt: <span class="hljs-string">"ALT"</span>,
      } }
      title={ <span class="hljs-string">"TITLE"</span> }
    /&gt;
  )
  t.jsxEquals(
    renderer.getRenderOutput(),
    &lt;div&gt;
      &lt;img src=<span class="hljs-string">"SRC"</span> alt=<span class="hljs-string">"ALT"</span> /&gt;
      &lt;Title text=<span class="hljs-string">"TITLE"</span> /&gt;
    &lt;/div&gt;,
    <span class="hljs-string">"can render a Title if data are passed"</span>
  )

  t.end()
})</code></pre>
<p>These tests are the minimum coverage to ensure you donâ€™t break anything when you work
on your component.</p>
<p>As you can see, tests here are pretty easy to write &amp; straightforward.<br>
<strong>The interesting part is that you donâ€™t compare using strings.
You can use real React components.</strong></p>
<p>You can easily run this full example by getting it from this repository:</p>
<p><a href="https://github.com/MoOx/react-component-unit-testing-example">github.com/MoOx/react-component-unit-testing-example</a></p>
<p>This example contains all the commands and dependencies
(defined in the <code>package.json</code>)
that you might need.</p>
<h1 id="what-about-testing-events-like-onclick"><a class="markdownIt-Anchor" href="#what-about-testing-events-like-onclick">#</a> What about testing events like <code>onClick</code>?</h1>
<p>You donâ€™t need to reproduce the entire click.</p>
<p><strong>Your tests donâ€™t need to check that your <code>onClick</code> prop will be executed when
you click on a DOM element.</strong>
<em>React probably have tests to cover this.</em></p>
<p>You only need to test that the <code>onClick</code> prop value will do what you want.
So if you have something like <code>onClick={ yourCallback }</code>,
just call directly <code>yourCallback()</code> in your test just before your comparison.
Thatâ€™s enough!</p>
<p>If you want to go deeper, you might also read:</p>
<ul>
<li><a href="https://simonsmith.io/unit-testing-react-components-without-a-dom/"><em>Unit testing React components without a DOM</em></a>,
by Simon Smith, that covers the same topic without the simplicity of the JSX
comparisons,</li>
<li><a href="https://blog.algolia.com/how-we-unit-test-react-components-using-expect-jsx/"><em>How we unit test React components using expect-jsx</em></a>
on Algolia blog, that explains why they choose and create tools for this approach.</li>
</ul>
<p>With all those examples, we hope you will stop being afraid to test your code
and will not hesitate to cover all your React components with tests ğŸ˜.</p>
]]></description><link>http://putaindecode.io/en/articles/js/react/unit-testing/</link><guid isPermaLink="true">http://putaindecode.io/en/articles/js/react/unit-testing/</guid><pubDate>Tue, 24 Nov 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[Un favicon vite fait bien fait]]></title><description><![CDATA[<p>Oublions un instant CSS et JavaScript pour parler dâ€™un sujet vraiment
important : le favicon.</p>
<p>Alors dâ€™accord, le favicon nâ€™est que le petit dÃ©tail quâ€™on expÃ©die en fin de
projet. Mais oubliez-le et votre client comprendra tout de suite quâ€™il manque
quelque chose.</p>
<p>Dans ce post, nous allons voir comment sâ€™acquitter de cette tÃ¢che dans les temps
et les rÃ¨gles de lâ€™art. Et nous ferons intervenir un outil dont je suis lâ€™heureux
auteur.</p>
<h2 id="vite-fait"><a class="markdownIt-Anchor" href="#vite-fait">#</a> Vite fait</h2>
<p>Pourquoi vite fait ? Parce quâ€™on ne peut pas consacrer trop de temps au favicon.
Lâ€™optimisation pour les smartphones, lâ€™amÃ©lioration du score PageSpeed ou
encore lâ€™augmentation du taux de conversion, voilÃ  des sujets sur lesquels on
peut plancher des heures, des jours ou bien plus. Mais le favicon, franchement,
est-ce vraiment la raison Ã  invoquer pour expliquer le retard dâ€™un projet ? Un
dÃ©tail quâ€™on vous dit !</p>
<p>Pour crÃ©er un favicon vite fait :</p>
<ul>
<li>CrÃ©ez un <code>favicon.ico</code> avec nâ€™importe quel gÃ©nÃ©rateur trouvÃ© sur le net.
DÃ©clarez-le avec <code>&lt;link rel=&quot;icon&quot; href=&quot;favicon.ico&quot; type=&quot;image/x-icon&quot;&gt;</code>.
Ou peut-Ãªtre <code>&lt;link rel=&quot;shortcut icon&quot; href=&quot;favicon.ico&quot; type=&quot;image/x-icon&quot;&gt;</code> ? Non parce quâ€™on trouve les deux. Dans le doute,
dÃ©clarez-le deux fois.</li>
<li>CrÃ©ez une Touch icon (pour iOS et les autres). Si on en croit les rÃ©sultats
pour â€œapple touch icon sizeâ€ sur Google, la taille maximale est 144x144.</li>
</ul>
<p>VoilÃ . Si vous faites tout Ã§a, vous vous serez acquittÃ© de la tÃ¢che rapidement.
Bon, Ã§a sera mal fait, mais fait. Câ€™est un dÃ©but.</p>
<h2 id="bien-fait"><a class="markdownIt-Anchor" href="#bien-fait">#</a> Bien fait</h2>
<p>Ã€ prÃ©sent, penchons-nous sur les difficultÃ©s qui nous attendent.</p>
<h3 id="c-est-la-taille-qui-compte"><a class="markdownIt-Anchor" href="#c-est-la-taille-qui-compte">#</a> Câ€™est la taille qui compte</h3>
<p>Ã‡a ne fait pas plaisir Ã  entendre et pourtant nous sommes au cÅ“ur du problÃ¨me
(nous parlons bien de favicon).</p>
<p><code>favicon.ico</code> devrait-il Ãªtre en 16x16 ou 32x32 ? <a href="https://msdn.microsoft.com/library/gg491740(v=vs.85).aspx">Les deux, selon
Microsoft</a>. Quelle
est la taille de la Touch icon dâ€™Apple ? <a href="https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/IconMatrix.html#//apple_ref/doc/uid/TP40006556-CH27-SW2">180x180 depuis iOS 8</a>.
La tuile <code>square70x70logo</code> pour Windows 8 et 10, câ€™estâ€¦ du 70x70, hein ?
Moui, mais <a href="https://msdn.microsoft.com/library/dn455106(v=vs.85).aspx">idÃ©alement, 128x128</a>.</p>
<p>Ã‡a nâ€™est pas tout : encore faut-il trouver ces informations. Google est
assez variable sur ce point. Il met dans le mille pour une recherche concernant
le favicon classique (16x16 <em>et</em> 32x32), mais Ã©choue, on lâ€™a vu, pour la
Touch icon. Les Ã©diteurs ne sont pas en reste. Si <a href="https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/IconMatrix.html#//apple_ref/doc/uid/TP40006556-CH27-SW2">Apple indique bien les
dimensions attendues pour lâ€™iPhone 6</a>,
il a en revanche <a href="https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html">oubliÃ© de mettre Ã  jour sa page qui sort pourtant en premier rÃ©sultat pour la recherche â€œapple touch iconâ€</a> (152x152 dâ€™aprÃ¨s elle).</p>
<p>Le <a href="https://github.com/audreyr/favicon-cheat-sheet">favicon cheat sheet</a> est une
ressource intÃ©ressante Ã  ce titre, quoique pas Ã  jour Ã  lâ€™heure oÃ¹ ces lignes
sont Ã©crites.</p>
<p>Bref, le temps de rassembler toutes ces informations et lâ€™aprÃ¨s-midi sâ€™est envolÃ©. Oups.</p>
<p>Ce que je dÃ©cris ici est le premier problÃ¨me auquel je me suis frottÃ© il y
a un peu plus de deux ans, alors que jâ€™achevais mon premier site responsive et
que je voulais une icÃ´ne digne de ce nom.</p>
<h3 id="le-design-vraiment"><a class="markdownIt-Anchor" href="#le-design-vraiment">#</a> Le design. Vraiment.</h3>
<p>Allez, jâ€™ai fait dans lâ€™anxiogÃ¨ne avec ces histoires de taille mais en rÃ©alitÃ©
ce problÃ¨me a Ã©tÃ© largement amoindri ces derniers mois avec lâ€™arrivÃ©e de
gÃ©nÃ©rateurs de favicon de nouvelle gÃ©nÃ©ration. Et vous en aurez pour votre
argent (dâ€™autant quâ€™ils sont gratuits) : envoyez votre image et vous vous
retrouverez avec plus dâ€™une vingtaine dâ€™images. Câ€™est beaucoup, presque trop
diront certains.</p>
<p>Mais cette solution cache un problÃ¨me presque plus grave. Si votre image
originale passera bien sur une platforme, elle risque fort de ne pas
correspondre Ã  une autre.</p>
<p>Prenons lâ€™exemple des icÃ´nes pour Android et iOS. Elles servent surtout au <em>Add
to homescreen</em>, lorsque votre visiteur vous fait lâ€™honneur dâ€™ajouter un lien
vers votre site sur lâ€™Ã©cran de son smartphone. Pas vraiment le moment de le
dÃ©cevoir. Sur Android, beaucoup dâ€™icÃ´nes ne sont pas carrÃ©es mais exploitent
la transparence, notamment les applications natives de Google.</p>
<p><img src="google_apps.png" alt=""></p>
<p>Bonne idÃ©e, donc, de suivre ce principe pour notre propre icÃ´ne. Câ€™est cette
voie quâ€™a choisie mon cerveau auxiliÃ¨re, je veux parler de StackOverflow, et sa
Touch icÃ´ne transparente.</p>
<p><img src="so_android.png" alt=""></p>
<p>Sur iOS et son univers tout de parallÃ©lÃ©pipÃ¨des aux coins arrondis, point de
transparence en revanche. Lâ€™icÃ´ne de StackOverflow se voit affublÃ©e dâ€™un fond
noir. Le rÃ©sultat nâ€™est pas si mauvais, mais Ã©tait-ce vraiment voulu ?</p>
<p><img src="so_ios.png" alt=""></p>
<p>Passer son image Ã  la moulinette pour en tirer une vingtaine dâ€™icÃ´nes est une
fausse bonne idÃ©e. Elle donne la dangereuse illusion dâ€™un travail bien fait
alors quâ€™en rÃ©alitÃ© vous nâ€™avez pas de rÃ©el moyen de savoir ce que vous venez
de faire. Sauf Ã  tester vos icÃ´nes sur diffÃ©rents appareils et navigateurs, mais
lÃ  ce sont encore quelques heures qui partent en fumÃ©e.</p>
<p>Et voilÃ  quel Ã©tait le second problÃ¨me que jâ€™ai dÃ©couvert dans ma quÃªte dâ€™une
icÃ´ne correcte. Un <code>-resize</code> dâ€™ImageMagick et un script bash un peu brutal ne
suffisent pas.</p>
<p>Cela a donnÃ© le coup dâ€™envoi Ã 
<a href="https://realfavicongenerator.net/">RealFaviconGenerator.net</a>, un gÃ©nÃ©rateur de
favicon qui devait vraiment solutionner le problÃ¨me.</p>
<p>Il nâ€™y a pas grand chose Ã  dire sur le sujet, et câ€™est le but: nâ€™oublions pas
que nous nâ€™avons que peu de temps. Rendez-vous sur <a href="http://RealFaviconGenerator.net">RealFaviconGenerator.net</a>,
postez votre image, Ã©ditez vos icÃ´nes plate-forme par plate-forme et vous voilÃ 
avec ce quâ€™il faut dâ€™images, de fichiers annexes et de code HTML pour
configurer votre favicon.</p>
<p><img src="favicon_editor.png" alt=""></p>
<p>VoilÃ , câ€™est terminÃ©.</p>
<h3 id="se-mettre-la-page"><a class="markdownIt-Anchor" href="#se-mettre-la-page">#</a> Se mettre Ã  la page</h3>
<p>Ou presque.</p>
<p>Il y a encore quelques annÃ©es, il Ã©tait normal de tÃ©lÃ©charger un framework
JavaScript Ã  la main puis de le dÃ©poser tel quel dans un projet Web.
Aujourdâ€™hui, cela est considÃ©rÃ© comme une mauvaise pratique et on prÃ©fÃ©rera
utiliser un package manager.</p>
<p>Est-il souhaitable dâ€™industrialiser le favicon de la mÃªme maniÃ¨re ? Voyons voir
ce quâ€™il sâ€™est passÃ© en un an :</p>
<ul>
<li>Lâ€™Iphone 6 est sorti, et avec lui la touch icon en 180x180 (avant câ€™Ã©tait
152x152).</li>
<li>Android Chrome a cessÃ© dâ€™utiliser lâ€™icÃ´ne en 196x196 qui Ã©tait autrefois
spÃ©cifiÃ©e. Ã€ la place, il utilise une icÃ´ne en 192x192 (et snobe la prÃ©cÃ©dente
quoi quâ€™il arrive).</li>
<li>Oubliez cette histoire dâ€™icÃ´ne en 192x192, Android Chrome utilise dÃ©sormais
un manifeste et plusieurs versions dâ€™icÃ´nes pour les diffÃ©rentes densitÃ©s
dâ€™Ã©cran.</li>
<li>Apple a sorti une nouvelle icÃ´ne au format SVG pour les â€œpinned tabsâ€ de
Safari pour Mac OS X El Capitan.</li>
</ul>
<p>Autrement dit, si vous avez crÃ©Ã© un favicon il y a un peu plus dâ€™un an, il y a
fort Ã  parier quâ€™il rende mal sur un iPad de derniÃ¨re gÃ©nÃ©ration et le rÃ©sultat
sur Android pourrait Ãªtre assez alÃ©atoire (Chrome utilisera une icÃ´ne PNG qui
nâ€™est pas pour lui ou bien une Touch icon).</p>
<p>Ã€ cet effet,
<a href="https://realfavicongenerator.net/api">RealFaviconGenerator propose une API</a>.
Tout ce quâ€™il est possible de faire via lâ€™UI peut Ãªtre reproduit via lâ€™API.
Humâ€¦ une APIâ€¦ de la doc Ã  lireâ€¦ Manifestement, ce nâ€™est pas de cette
faÃ§on quâ€™on va accÃ©lÃ©rer les choses. Mais tout nâ€™est pas perdu car le code peut
Ãªtre gÃ©nÃ©rÃ© automatiquement.</p>
<p>Actuellement, RealFaviconGenerator supporte Grunt et Gulp. Par exemple, aprÃ¨s
avoir crÃ©Ã© votre favicon, cliquez sur lâ€™onglet â€œGulpâ€. Vous avez le fragment de
Gulpfile ainsi que les instructions pour intÃ©grer votre favicon Ã  votre
processus de build, au mÃªme titre que la minification des CSS ou le processing
des Coffee scripts.</p>
<p><img src="gulp_instructions.png" alt=""></p>
<p>Les rÃ¨gles :</p>
<ul>
<li><code>generate-favicon</code> : gÃ©nÃ¨re les icÃ´nes. Elle prend quelques
secondes et câ€™est le genre de rÃ¨gle quâ€™on nâ€™exÃ©cute quâ€™une fois de temps en
temps, lorsquâ€™il y a du changement dans le paysage des favicons.</li>
<li><code>inject-favicon-markups</code> : injecte les dÃ©clarations dâ€™icÃ´nes
dans les pages HTML. Ã€ exÃ©cuter Ã  chaque modification de page, autant dire
quâ€™elle va souvent servir.</li>
<li><code>check-for-favicon-update</code> : vÃ©rifie sâ€™il y a du nouveau sur
RealFaviconGenerator. Si câ€™est le cas, elle fera Ã©chouer votre build bien
comme il faut. Un peu brutal mais Ã§a a le mÃ©rite dâ€™Ãªtre clair. Si vous
avez un systÃ¨me dâ€™intÃ©gration continue, arrangez-vous pour ajouter cette rÃ¨gle
Ã  votre radar.</li>
</ul>
<p>La favicon a toujours Ã©tÃ© un parent pauvre des projets web, Ã  juste titre.
Avec la prolifÃ©ration des plates-formes, le nÃ©gliger est de plus en plus hasardeux.
Jâ€™ai conÃ§u RealFaviconGenerator pour apporter un peu dâ€™ordre Ã  tout cela. Ce
nâ€™est pas la seule initiative. Hayden Bleasel dÃ©veloppe
<a href="https://github.com/haydenbleasel/favicons">favicons</a> qui ambitionne dâ€™Ãªtre
<a href="https://github.com/google/web-starter-kit/issues/599">intÃ©grÃ© au Web Starter Kit de Google</a>.</p>
<p>Et maintenant, câ€™est Ã  vous : que pensez-vous de la formule â€œgÃ©nÃ©ration de
Gulp/Grunt/autreâ€ ? Quelles sont les technos que vous aimeriez trouver ?</p>
]]></description><link>http://putaindecode.io/fr/articles/favicon/</link><guid isPermaLink="true">http://putaindecode.io/fr/articles/favicon/</guid><pubDate>Tue, 17 Nov 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[GÃ©rer son thÃ¨me WordPress avec Webpack]]></title><description><![CDATA[<h1 id="pourquoi-webpack-pour-g-rer-son-th-me-wordpress"><a class="markdownIt-Anchor" href="#pourquoi-webpack-pour-g-rer-son-th-me-wordpress">#</a> Pourquoi Webpack pour gÃ©rer son thÃ¨me WordPress ?</h1>
<p>La rÃ©ponse est la mÃªme quâ€™Ã  la simple question
<a href="/fr/articles/js/webpack/">â€œpourquoi Webpack ?â€</a>.
Lâ€™intÃ©rÃªt principal est dâ€™obtenir des rapports dâ€™erreurs liÃ©s Ã 
la gestion des assets (images, fonts, etc).</p>
<p>Quâ€™y a-t-il de si particulier Ã  savoir pour utiliser Webpack pour gÃ©rer un thÃ¨me
WordPressÂ ? Pas grand chose, mais voici de quoi vous faire gagner (peut-Ãªtre)
un peu de temps.</p>
<p>Il y a certainement plusieurs faÃ§ons de gÃ©rer son thÃ¨me WordPress
avec Webpack. Celle que je vous propose va se limiter Ã  des choses
simples en concentrant le code dans le rÃ©pertoire du thÃ¨me pour plus de
modularitÃ©.</p>
<p>Pour commencer, deux choses importantes Ã  savoir :</p>
<ul>
<li>Ne mettez pas de CSS dans le fameux <code>style.css</code> Ã  la racine de votre thÃ¨me,
laissez juste le cartouche en commentaire (sans lequel WordPress ne dÃ©tectera
pas votre thÃ¨meâ€¦)Â ;</li>
<li>crÃ©ez un dossier <code>src</code> dans votre thÃ¨me, oÃ¹ nous
mettrons nos â€œsourcesâ€, la partie du thÃ¨me â€œcompilÃ©â€ sera dans un dossier
<code>dist</code> et nâ€™aura donc pas besoin dâ€™Ãªtre versionnÃ©e.</li>
</ul>
<p>La seule petite chose Ã  laquelle il faut faire attention finalement, câ€™est de
bien configurer le <code>publicPath</code> de Webpack afin que les fichiers quâ€™il gÃ©nÃ¨re
soient bien dans le bon chemin, et que les ressources liÃ©es (dans les fichiers CSS
par exemple) comportent les bons chemins relatifs (Ã  la racine du site).</p>
<p>Avec lâ€™arborescence suivante, nous nâ€™aurons pas de difficultÃ© Ã  faire une
configuration portable :</p>
<pre><code>-<span class="ruby"> htdocs
</span>  -<span class="ruby"> wp-content
</span>    -<span class="ruby"> themes
</span>      -<span class="ruby"> putaindetheme
</span>        -<span class="ruby"> node_modules
</span>        -<span class="ruby"> src
</span>          -<span class="ruby"> index.js
</span>          -<span class="ruby"> index.css
</span>          -<span class="ruby"> images/*
</span>          -<span class="ruby"> fonts/*
</span>        -<span class="ruby"> style.css
</span>        -<span class="ruby"> webpack.config.babel.json
</span>        -<span class="ruby"> package.json
</span>-<span class="ruby"> package.json</span></code></pre>
<p>En plus de cela, nous pouvons ajouter une sorte de raccourci via un
<code>package.json</code> supplÃ©mentaire Ã  la racine de notre projet :</p>
<pre><code class="language-json">{
  "<span class="hljs-attribute">private</span>": <span class="hljs-value"><span class="hljs-literal">true</span></span>,
  "<span class="hljs-attribute">scripts</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">start</span>": <span class="hljs-value"><span class="hljs-string">"cd htdocs/wp-content/themes/putaindetheme &amp;&amp; npm start"</span></span>,
    "<span class="hljs-attribute">build</span>": <span class="hljs-value"><span class="hljs-string">"cd htdocs/wp-content/themes/putaindetheme &amp;&amp; npm run build"</span>
  </span>}
</span>}</code></pre>
<p>Ce petit raccourci nous Ã©vitera de devoir nous taper en CLI tout le chemin du
thÃ¨me et nous pourrions mÃªme, pourquoi pas, rajouter un
<code>&quot;prestart&quot;: &quot;open http://yourlocalhost.tld&quot;</code> afin dâ€™ouvrir automatiquement
le projet dans le navigateur lorsque nous dÃ©marrerons notre dÃ©veloppement via
<code>$ npm start</code>.</p>
<p>Voyons rapidement donc le <code>package.json</code> du thÃ¨me ainsi que la config Webpack.</p>
<p><code>package.json</code></p>
<pre><code class="language-json">{
  "<span class="hljs-attribute">private</span>": <span class="hljs-value"><span class="hljs-literal">true</span></span>,
  "<span class="hljs-attribute">scripts</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">start</span>": <span class="hljs-value"><span class="hljs-string">"webpack --config=webpack.config.babel.js --watch"</span></span>,
    "<span class="hljs-attribute">build</span>": <span class="hljs-value"><span class="hljs-string">"webpack --config=webpack.config.babel.js -p"</span>
  </span>}</span>,
  "<span class="hljs-attribute">devDependencies</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">babel</span>": <span class="hljs-value"><span class="hljs-string">"^5.8.12"</span></span>,
    "<span class="hljs-attribute">babel-core</span>": <span class="hljs-value"><span class="hljs-string">"^5.8.12"</span></span>,
    "<span class="hljs-attribute">babel-loader</span>": <span class="hljs-value"><span class="hljs-string">"^5.3.2"</span></span>,
    "<span class="hljs-attribute">css-loader</span>": <span class="hljs-value"><span class="hljs-string">"^0.15.6"</span></span>,
    "<span class="hljs-attribute">eslint</span>": <span class="hljs-value"><span class="hljs-string">"^0.24.1"</span></span>,
    "<span class="hljs-attribute">eslint-loader</span>": <span class="hljs-value"><span class="hljs-string">"^0.14.2"</span></span>,
    "<span class="hljs-attribute">extract-text-webpack-plugin</span>": <span class="hljs-value"><span class="hljs-string">"^0.8.2"</span></span>,
    "<span class="hljs-attribute">file-loader</span>": <span class="hljs-value"><span class="hljs-string">"^0.8.4"</span></span>,
    "<span class="hljs-attribute">json-loader</span>": <span class="hljs-value"><span class="hljs-string">"^0.5.2"</span></span>,
    "<span class="hljs-attribute">postcss-cssnext</span>": <span class="hljs-value"><span class="hljs-string">"^2.1.0"</span></span>,
    "<span class="hljs-attribute">postcss-import</span>": <span class="hljs-value"><span class="hljs-string">"^7.0.0"</span></span>,
    "<span class="hljs-attribute">postcss-loader</span>": <span class="hljs-value"><span class="hljs-string">"^0.6.0"</span></span>,
    "<span class="hljs-attribute">postcss-url</span>": <span class="hljs-value"><span class="hljs-string">"^5.0.2"</span></span>,
    "<span class="hljs-attribute">style-loader</span>": <span class="hljs-value"><span class="hljs-string">"^0.12.3"</span></span>,
    "<span class="hljs-attribute">webpack</span>": <span class="hljs-value"><span class="hljs-string">"^1.10.5"</span>
  </span>}</span>,
  "<span class="hljs-attribute">dependencies</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">normalize.css</span>": <span class="hljs-value"><span class="hljs-string">"^3.0.3"</span>
  </span>}
</span>}</code></pre>
<p>Quelques petites notes sur ce contenu :</p>
<ul>
<li><code>private</code> sert Ã  Ã©viter la publication de votre â€œpaquetâ€ sur npm, ainsi quâ€™Ã 
devoir remplir certains champs tels que <code>name</code> et compagnieÂ ;</li>
<li>nous mettrons dans <code>devDependencies</code> les dÃ©pendances pour le dÃ©veloppement et
dans <code>dependencies</code> les dÃ©pendances qui seront dans le build final. Ici, jâ€™ai
simplement mis <code>normalize.css</code> pour exemple, mais vous pourriez trÃ¨s bien avoir
aussi jQuery (:trollface:) ou ReactÂ ;</li>
<li>les scripts utilisent <code>webpack.config.babel.js</code> afin de pouvoir dÃ©finir la
configuration en es6/7 via <em>babel</em>.</li>
</ul>
<p>Voyons maintenant la config <code>webpack.config.babel.js</code>Â :</p>
<pre><code class="language-js"><span class="hljs-comment">// <span class="hljs-doctag">Note:</span> le code ci-dessous est mal rendu</span>
<span class="hljs-comment">// Une issue est ouverte Ã  ce propos</span>
<span class="hljs-comment">// https://github.com/isagalaev/highlight.js/issues/958</span>

<span class="hljs-keyword">import</span> <span class="hljs-string">"babel/polyfill"</span>
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">"path"</span>
<span class="hljs-keyword">import</span> ExtractTextPlugin <span class="hljs-keyword">from</span> <span class="hljs-string">"extract-text-webpack-plugin"</span>
<span class="hljs-keyword">import</span> postcssImport <span class="hljs-keyword">from</span> <span class="hljs-string">"postcss-import"</span>
<span class="hljs-keyword">import</span> postcssUrl <span class="hljs-keyword">from</span> <span class="hljs-string">"postcss-url"</span>
<span class="hljs-keyword">import</span> postcssCssnext <span class="hljs-keyword">from</span> <span class="hljs-string">"postcss-cssnext"</span>

const production = process.argv.includes(`-p`)

const theme = path.basename(__dirname)
const src = path.join(__dirname, `src`)

export default {
  entry: {
    index: [`${ src }/index.js<span class="hljs-string">`],
  },

  output: {
    path: path.join(__dirname, `</span>dist<span class="hljs-string">`),
    filename: `</span>[name].js<span class="hljs-string">`,
    publicPath: `</span>wp-content/themes/${ theme }/dist/<span class="hljs-string">`,
  },
  resolve: {
    extensions: [
      `</span><span class="hljs-string">`,
      `</span>.js<span class="hljs-string">`,
      `</span>.json<span class="hljs-string">`,
    ],
  },

  module: {
    loaders: [
      {
        test: /\.json$/,
        loader: `</span>json-loader<span class="hljs-string">`,
      },
      {
        test: /\.js$/,
        loaders: [
          `</span>babel-loader<span class="hljs-string">`,
          `</span>eslint-loader<span class="hljs-string">`,
        ],
        include: src,
      },
      {
        test: /\.css$/,
        loader: ExtractTextPlugin.extract(
          `</span>style-loader<span class="hljs-string">`,
          [
            `</span>css-loader<span class="hljs-string">`,
            `</span>postcss-loader<span class="hljs-string">`,
          ].join(`</span>!<span class="hljs-string">`)
        ),
      },
      {
        test: /\.(ico|jpe?g|png|gif)$/,
        loader: `</span>file-loader?name=[path][name].[ext]&amp;context=${ src }/<span class="hljs-string">`,
      },
    ],
  },

  plugins: [
    new ExtractTextPlugin(`</span>[name].css<span class="hljs-string">`, {disable: !production}),
  ],

  postcss: function() {
    // https://github.com/postcss/postcss-loader/issues/31
    const webpack = this

    return [
      postcssImport({
        onImport: (files) =&gt; files.forEach(webpack.addDependency),
      }),
      postcssUrl(),
      postcssCssnext({
        browsers: `</span>last <span class="hljs-number">2</span> versions<span class="hljs-string">`,
      }),
    ]
  },
}</span></code></pre>
<p><em>Bien entendu, libre Ã  vous dâ€™adapter les loaders Webpack Ã  utiliser, ainsi que
la configuration PostCSS par exemple.</em> Faites un tour sur notre article de
<a href="/fr/articles/js/webpack/premier-exemple/">premier exemple de configuration Webpack</a> afin
dâ€™y voir plus clair.</p>
<p>Il nous reste maintenant Ã  ajouter dans notre thÃ¨me WordPress les
rÃ©fÃ©rences Ã  nos points dâ€™entrÃ©es CSS et JavaScript que sont <code>index.css</code> et
<code>index.js</code>.</p>
<p>Pour faire simplement, dans votre fichier <code>functions.php</code> (oui, le fichier qui a un nom
qui nâ€™indique pas du tout ce pour quoi tout le monde se sert du fichier, câ€™est Ã 
dire la configuration du thÃ¨me au runtimeâ€¦), on va ajouter une petite constante
qui servira Ã  adapter votre thÃ¨me en fonction de lâ€™environnement :</p>
<pre><code class="language-php"><span class="hljs-comment">// ENV est Ã  dÃ©finir dans votre configuration Apache par exemple.</span>
<span class="hljs-comment">// Si vous ne voulez pas y toucher, vous pouvez plutÃ´t dÃ©finir d'une autre faÃ§on</span>
<span class="hljs-comment">// en testant le SERVER_NAME par exemple</span>
define(<span class="hljs-string">'ENV'</span>, getenv(<span class="hljs-string">'ENV'</span>));

<span class="hljs-comment">// en local, on pourrait dÃ©finir ENV Ã  "development"</span></code></pre>
<p><em>Nous pourrions dans ce fichier utiliser lâ€™API de Wordpress pour enregister nos
<code>index.css</code> et <code>index.js</code> via les mÃ©thodes <code>wp_(de)register_</code>, mais nous
resterons simples pour lâ€™exemple.</em></p>
<p>Vu quâ€™on utilise le <code>style-loader</code> de Webpack en dÃ©veloppement, on ne va ajouter
notre feuille de style quâ€™en production (dans le <code>&lt;head&gt;</code>).</p>
<pre><code class="language-php"><span class="hljs-preprocessor">&lt;?php</span> <span class="hljs-keyword">if</span> (ENV != <span class="hljs-string">"development"</span>): <span class="hljs-preprocessor">?&gt;</span>
  &lt;link rel=<span class="hljs-string">"stylesheet"</span> href=<span class="hljs-string">"&lt;?php echo get_bloginfo('template_directory') ?&gt;/dist/index.css"</span> /&gt;
<span class="hljs-preprocessor">&lt;?php</span> <span class="hljs-keyword">endif</span>; <span class="hljs-preprocessor">?&gt;</span></code></pre>
<p>Pensez aussi Ã  supprimer la rÃ©fÃ©rence Ã  <code>style.css</code> dans <code>header.php</code>.</p>
<p>Dans la mÃªme idÃ©e mais en plus simple, on va ajouter dans notre <code>footer.php</code>.</p>
<pre><code class="language-php">&lt;script src=<span class="hljs-string">"&lt;?php echo get_bloginfo('template_directory') ?&gt;/dist/index.js"</span>&gt;&lt;/script&gt;</code></pre>
<p>Rien de bien compliquÃ© finalement.</p>
<p><em>Attention si votre thÃ¨me hÃ©rite dâ€™un autre,
<code>get_bloginfo('template_directory')</code> ne pointera pas vers votre thÃ¨me mais le
thÃ¨me parent. Il vous faudra donc ajuster le code ğŸ˜‘.</em></p>
<hr>
<p>Pour le test vous pouvez mettre dans les CSS et JS :</p>
<p><code>index.css</code></p>
<pre><code class="language-css"><span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"normalize.css"</span></span>;
<span class="hljs-tag">body</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background</span>:<span class="hljs-value"> red</span></span>;
}</span></code></pre>
<p>Notez ici que par la faÃ§on dont nous avons dÃ©fini Webpack ci-dessus, vous
devriez placer et rÃ©fÃ©rencer vos assets (images &amp; co), depuis <code>src</code>. ExempleÂ :</p>
<pre><code class="language-css"><span class="hljs-tag">html</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background</span>:<span class="hljs-value"> <span class="hljs-function">url</span>(./images/background.jpg)
  <span class="hljs-comment">/* =&gt; wp-content/themes/putaindetheme/src/images/background.jpg */</span>
</span></span></span>}</code></pre>
<p>Ensuite, dans <code>index.js</code>, je vous laisse vous dÃ©brouiller :)</p>
<pre><code class="language-js"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Hey !"</span>)</code></pre>
<p>Libre Ã  vous maintenant dâ€™ajouter vos dÃ©pendances favorites et de remplir vos
<code>index.css</code> et <code>index.js</code> avec une gestion dâ€™erreurs autre que des requÃªtes HTTP
en 404Â !</p>
]]></description><link>http://putaindecode.io/fr/articles/wordpress/webpack/</link><guid isPermaLink="true">http://putaindecode.io/fr/articles/wordpress/webpack/</guid><pubDate>Tue, 20 Oct 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[CrÃ©er un site web gratuitement avec GitHub Pages]]></title><description><![CDATA[<p>Pour une fois, on ne va pas trop parler de code dans cet article, mais
simplement de comment crÃ©er en quelques minutes un site web basique et
lâ€™hÃ©berger gratuitement sur la plateforme <a href="http://github.com">github.com</a>.</p>
<p>TransfÃ©rez cet article Ã  toute personne qui souhaiterait avoir un site web mais
qui pense encore que câ€™est trop compliquÃ© :)</p>
<p>Dans un premier temps, vous devez simplement avoir quelques connaissances de
base :</p>
<ul>
<li><strong>HTML</strong> : une bonne <a href="https://developer.mozilla.org/fr/docs/Web/Guide/HTML/Introduction">introduction</a></li>
<li><strong>GitHub</strong> : crÃ©ez un compte gratuit ici : <a href="http://github.com">github.com</a></li>
</ul>
<p>Nous allons utiliser <a href="http://github.com">github.com</a> pour hÃ©berger notre
<strong>site web statique</strong> dans un <em>repository</em> (un dossier). Ce service
incontournable permet de stocker le code du site, de le
<a href="https://fr.wikipedia.org/wiki/Logiciel_de_gestion_de_versions">versionner</a>, et
de le publier gratuitement sur Internet dans des conditions optimales
(CDN, anti-DDoSâ€¦)</p>
<p><strong>Attention</strong> : tous les fichiers hÃ©bergÃ©s sur votre compte GitHub gratuit sont
publics, Ã  moins de souscrire Ã  un compte privÃ© payant, donc nâ€™y stockez rien
de sensible/secret.</p>
<h2 id="qu-est-ce-qu-un-site-web-statique"><a class="markdownIt-Anchor" href="#qu-est-ce-qu-un-site-web-statique">#</a> Quâ€™est-ce quâ€™un site web statique ?</h2>
<p>Pour la plupart des sites, les solutions de blog (CMS de type WordPress et
autres) sont largement surdimensionnÃ©es. Elles requiÃ¨rent un hÃ©bergement
particulier (PHP ou autre), des connaissances techniques pour lâ€™installation,
et surtout une maintenance Ã  moyen/long-terme Ã  cause des mises Ã  jour
de sÃ©curitÃ© surprises et autres correctifs de bugs Ã  appliquer.</p>
<p>Or, il est possible de crÃ©er des sites webs modernes et performants qui nâ€™ont
pas besoin de code cÃ´tÃ© serveur (donc pas de PHP), et peuvent donc Ãªtre hÃ©bergÃ©s
nâ€™importe oÃ¹, et Ã  moindre coÃ»t. Le code du site sera uniquement composÃ© de
HTML, CSS et JavaScript, et sâ€™exÃ©cutera directement dans le navigateur du
visiteur, ce qui prÃ©sente de nombreux avantages :</p>
<ul>
<li>simple et efficace</li>
<li>pas de maintenance</li>
<li>pas de risque de hacking</li>
<li>performances optimales</li>
<li>libertÃ© totale</li>
</ul>
<p>De plus, en 2015, nâ€™importe quel service en ligne digne de ce nom propose une
<a href="https://www.mashape.com">API</a> qui permet dâ€™intÃ©grer directement sur votre site
des fonctionnalitÃ©s tierces, sans avoir besoin de code cÃ´tÃ© serveur, donc cette
approche pure <strong>client-side</strong> nâ€™a <strong>pas de limites</strong>.</p>
<p>Dans ce premier article nous allons voir comment crÃ©er un site web basique Ã 
base de HTML/CSS, mais nous verrons par la suite comment utiliser un
<a href="http://staticgen.com">gÃ©nÃ©rateur de site web statique</a> pour crÃ©er des sites
webs plus avancÃ©s.</p>
<h2 id="cr-er-le-repository-github"><a class="markdownIt-Anchor" href="#cr-er-le-repository-github">#</a> CrÃ©er le repository GitHub</h2>
<p>CrÃ©ez votre compte GitHub, puis un nouveau <em>repository</em> pour votre site web :
<a href="https://github.com/new">https://github.com/new</a> (exemple : supersite)</p>
<p>Le repository sera crÃ©Ã© Ã  cette adresse :
<a href="https://github.com/USERNAME/supersite">https://github.com/USERNAME/supersite</a></p>
<h2 id="cr-er-un-site-web-avec-github-page-generator"><a class="markdownIt-Anchor" href="#cr-er-un-site-web-avec-github-page-generator">#</a> CrÃ©er un site web avec <em>GitHub page generator</em></h2>
<p>GrÃ¢ce aux templates par dÃ©faut, crÃ©ez votre site <em>single-page</em> en 3 clics.</p>
<p>Allez sur la page du projet :  <a href="https://github.com/USERNAME/supersite">https://github.com/USERNAME/supersite</a></p>
<ul>
<li>Puis <strong>Repository settings</strong> (icÃ´ne en bas Ã  droite)</li>
<li><strong>Automatic page generator</strong> puis <strong>Launch</strong></li>
<li>Ã‰ditez le texte du site</li>
<li>SÃ©lectionnez votre template prÃ©fÃ©rÃ© puis <strong>Publish Page</strong></li>
</ul>
<p>Attendez quelques secondes et allez sur : <a href="http://USERNAME.github.io/supersite">http://USERNAME.github.io/supersite</a> pour dÃ©couvrir le rÃ©sultat final.</p>
<p><strong>âœ”</strong> Site web en ligne et dispo pour le monde entier :)</p>
<h2 id="modifier-le-site-en-ligne"><a class="markdownIt-Anchor" href="#modifier-le-site-en-ligne">#</a> Modifier le site en ligne</h2>
<p>Allez sur la page du projet, <a href="https://github.com/USERNAME/supersite">https://github.com/USERNAME/supersite</a>.</p>
<p>Câ€™est ici que lâ€™on retrouve tout le code et les fichiers du site.</p>
<p>Cliquez sur le fichier Ã  modifier, typiquement <code>index.html</code> qui est la page
dâ€™accueil, cliquez sur lâ€™icÃ´ne â€œcrayonâ€ en haut Ã  droite pour Ã©diter le fichier
et appliquez vos changements.</p>
<p>Une fois les changements effectuÃ©s, complÃ©tez le formulaire â€œCommit changesâ€
en-dessous, avec un titre explicite permettant dâ€™identifier votre modification.</p>
<p>Exemple : â€œAjout des infos de contactâ€.</p>
<p>Cliquez sur <strong>Commit changes</strong>, attendez quelques secondes et allez sur
<a href="http://USERNAME.github.io/supersite">http://USERNAME.github.io/supersite</a>
pour admirer les changements.</p>
<p><strong>âœ”</strong> Site web mis Ã  jour :)</p>
<h2 id="diter-le-site-sur-son-ordinateur"><a class="markdownIt-Anchor" href="#diter-le-site-sur-son-ordinateur">#</a> Ã‰diter le site sur son ordinateur</h2>
<p>Pour pouvoir Ã©diter plus facilement le site, ajouter/modifier des fichiersâ€¦
vous pouvez le rÃ©cupÃ©rer sur votre machine, et vous pourrez alors utiliser
votre <a href="http://atom.io">Ã©diteur de texte prÃ©fÃ©rÃ©</a> pour le modifier.</p>
<p>Installez et configurez lâ€™application GitHub : <a href="http://mac.github.com">mac.github.com</a>
ou <a href="http://windows.github.com">windows.github.com</a></p>
<ul>
<li><strong>Clone</strong> : va rapatrier les fichiers de votre site sur votre ordinateur</li>
<li><strong>Ã‰ditez</strong> les fichiers directement</li>
<li><strong>Testez</strong> si le site fonctionne comme prÃ©vu</li>
<li>Puis choisissez <strong>Commit</strong> pour enregistrer vos modifications</li>
<li>Et enfin <strong>Sync</strong> pour renvoyer vos fichiers sur GitHub et mettre Ã  jour
le site pour le reste du monde.</li>
</ul>
<p><strong>âœ”</strong> Site web mis Ã  jour :)</p>
<h2 id="tester-le-site-sur-votre-machine"><a class="markdownIt-Anchor" href="#tester-le-site-sur-votre-machine">#</a> Tester le site sur votre machine</h2>
<p>Vous pouvez ouvrir le fichier <code>index.html</code> dans un navigateur pour voir le
rÃ©sultat.</p>
<p><strong>Note :</strong> Si vous avez ajoutÃ© Google Maps ou une API JavaScript, vous devrez
lancer un serveur web pour pouvoir voir le rÃ©sultat. Par exemple, lancez
<code>python -m SimpleHTTPServer</code> dans votre terminal depuis le dossier du site
(oÃ¹ se trouve <code>index.html</code>) puis ouvrez <a href="http://127.0.0.1:8000">http://127.0.0.1:8000</a> dans votre navigateur.
(Ceci est dÃ» Ã  une <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Same_origin_policy_for_JavaScript">restriction de sÃ©curitÃ©</a>)</p>
<h2 id="installer-un-superbe-template"><a class="markdownIt-Anchor" href="#installer-un-superbe-template">#</a> Installer un superbe template</h2>
<p>Si vous voulez des templates diffÃ©rents de ceux proposÃ©s par GitHub,
vous devez simplement remplacer les fichiers prÃ©sents dans le dossier
du projet.</p>
<p>Choisissez par exemple un des templates gratuits de haute qualitÃ©
disponibles sur <a href="http://html5up.net">html5up.net</a> ou sur
<a href="http://pixelarity.com">pixelarity.com</a> (payant).</p>
<p>TÃ©lÃ©chargez les sources et placez les fichiers dans votre projet.</p>
<p>Ã‰ditez les fichiers, testez, puis commit &amp; sync, et voilÃ  :)</p>
<h2 id="et-apr-s"><a class="markdownIt-Anchor" href="#et-apr-s">#</a> Et aprÃ¨s ?</h2>
<ul>
<li>Apprenez la syntaxe Markdown : <a href="https://en.support.wordpress.com/markdown-quick-reference/">rÃ©ference</a></li>
<li>Apprenez Git : <a href="https://try.github.io">try.github.io</a></li>
<li>Apprenez JavaScript : <a href="http://jsbooks.revolunet.com">jsbooks.revolunet.com</a>
et <a href="https://ericelliottjs.com/product/programming-javascript-applications-paper-ebook-bundle/">le livre dâ€™Eric Elliott</a></li>
<li>Lisez tous les articles de <a href="/">Putain de code !</a></li>
</ul>
<hr>
<h2 id="faq"><a class="markdownIt-Anchor" href="#faq">#</a> FAQ</h2>
<h3 id="comment-installer-un-nom-de-domaine"><a class="markdownIt-Anchor" href="#comment-installer-un-nom-de-domaine">#</a> Comment installer un nom de domaine ?</h3>
<ul>
<li>Achetez un nom de domaine sur <a href="http://gandi.net">gandi.net</a> ou
un autre fournisseur sÃ©rieux (surtout pas chez pas 1&amp;1, lws ou
autre discounter douteux)</li>
<li>Ã‰ditez la â€œZone DNSâ€ du domaine et suivez les
<a href="https://help.github.com/articles/tips-for-configuring-a-cname-record-with-your-dns-provider/">instructions GitHub pour DNS</a></li>
<li>ajoutez un fichier <code>CNAME</code> dans votre projet, contenant la ligne
<code>www.myproject.com</code>.</li>
</ul>
<p>Les changements DNS peuvent mettre jusquâ€™Ã  24h pour se propager
donc essayez <a href="http://www.myproject.com">www.myproject.com</a> un peu plus tard.</p>
<p>Ces pages dâ€™aide sur GitHub pourront vous Ãªtre utiles : <a href="https://help.github.com/articles/setting-up-a-custom-domain-with-github-pages/">Custom domain</a>, <a href="https://help.github.com/articles/tips-for-configuring-a-cname-record-with-your-dns-provider/">DNS setup</a>.</p>
<h3 id="comment-ajouter-une-page"><a class="markdownIt-Anchor" href="#comment-ajouter-une-page">#</a> Comment ajouter une page ?</h3>
<p>Pour crÃ©er simplement des pages supplÃ©mentaires, ajoutez un
nouveau fichier HTML, par exemple <code>produits.html</code>, dans le projet et
faites un lien vers cette page depuis lâ€™index, par exemple
<code>&lt;a href=&quot;produits.html&quot;&gt;Consulter les produits&lt;/a&gt;</code>.</p>
<h3 id="comment-analyser-le-trafic-de-mon-site"><a class="markdownIt-Anchor" href="#comment-analyser-le-trafic-de-mon-site">#</a> Comment analyser le trafic de mon site ?</h3>
<p>Si vous voulez tracker vos visiteurs, savoir dâ€™oÃ¹ ils viennent, ce quâ€™ils
font et oÃ¹ ils vont, crÃ©ez un compte sur
<a href="http://www.google.com/analytics">Google Analytics</a> et ajoutez le code de
tracking sur vos pages HTML.</p>
<h3 id="comment-ajouter-une-carte"><a class="markdownIt-Anchor" href="#comment-ajouter-une-carte">#</a> Comment ajouter une carte ?</h3>
<p>Suivez les <a href="http://leafletjs.com/examples/quick-start.html">instructions Leaflet</a>, la cartographie open-source et gratuite qui bÃ©nÃ©ficie dâ€™une communautÃ© active.</p>
<p>Si vous avez juste besoin dâ€™une carte sous forme dâ€™image fixe, gÃ©nÃ©rez le code HTML ici :
<a href="http://staticmapmaker.com">staticmapmaker.com</a> et copiez le code dans votre page.</p>
<h3 id="comment-ajouter-un-syst-me-de-commentaires"><a class="markdownIt-Anchor" href="#comment-ajouter-un-syst-me-de-commentaires">#</a> Comment ajouter un systÃ¨me de commentaires ?</h3>
<p>CrÃ©ez un compte sur <a href="http://disqus.com">disqus.com</a> et ajoutez le code JavaScript sur
votre page.</p>
<h3 id="comment-ajouter-un-formulaire-de-contact"><a class="markdownIt-Anchor" href="#comment-ajouter-un-formulaire-de-contact">#</a> Comment ajouter un formulaire de contact ?</h3>
<p>CrÃ©ez un compte sur <a href="http://typeform.com">typeform.com</a>, crÃ©ez votre formulaire et
ajoutez le code JavaScript â€œembedâ€ sur votre page.</p>
<p>Vous pouvez aussi crÃ©er un compte sur <a href="http://mailchimp.com">mailchimp.com</a>, crÃ©er un
formulaire et lâ€™ajouter sur votre page grÃ¢ce au code â€œembedâ€.</p>
<h3 id="comment-recevoir-des-paiements"><a class="markdownIt-Anchor" href="#comment-recevoir-des-paiements">#</a> Comment recevoir des paiements ?</h3>
<p>CrÃ©ez un compte sur <a href="http://stripe.com">stripe.com</a> et ajoutez le code JavaScript sur
votre page.</p>
<h3 id="qu-est-ce-que-gh-pages"><a class="markdownIt-Anchor" href="#qu-est-ce-que-gh-pages">#</a> Quâ€™est-ce que gh-pages ?</h3>
<p><code>gh-pages</code> est une branche spÃ©ciale de votre code sur GitHub (une version du
code) qui publie et hÃ©berge <em>automagiquement</em> votre site.</p>
<h3 id="comment-tre-pr-sent-sur-google"><a class="markdownIt-Anchor" href="#comment-tre-pr-sent-sur-google">#</a> Comment Ãªtre prÃªsent sur Google ?</h3>
<p>CrÃ©ez du contenu de <strong>qualitÃ©</strong>, ciblÃ©, <strong>unique</strong> sur Internet et <strong>utile</strong> Ã 
vos visiteurs. CrÃ©ez du lien avec des sites et communautÃ©s sur le mÃªme thÃ¨me.</p>
<p>Naturellement, dâ€™autres sites parleront alors du vÃ´tre, vous enverront des
visiteurs et vous feront monter progressivement dans les rÃ©sultats au fil des mois.</p>
<hr>
<p>VoilÃ  pour ce premier pas vers le dÃ©veloppement web !</p>
<p>Les commentaires ci-dessous sont lÃ  pour recevoir vos remarques et questions :)</p>
]]></description><link>http://putaindecode.io/fr/articles/github/pages/site-web-gratuit/</link><guid isPermaLink="true">http://putaindecode.io/fr/articles/github/pages/site-web-gratuit/</guid><pubDate>Fri, 31 Jul 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[Premier exemple d'utilisation de Webpack]]></title><description><![CDATA[<p>Si vous Ãªtes intÃ©ressÃ© par
<a href="/fr/articles/js/webpack/">les problÃ©matiques que peut rÃ©soudre Webpack</a>,
vous serez sÃ»rement intÃ©ressÃ© par cette petite configuration dÃ©taillÃ©e, qui vous
permettra de faire vos premiers pas avec cet outil.</p>
<p>Nous allons mettre en place une configuration assez basique qui
va permettre :</p>
<ul>
<li>dâ€™avoir une partie JavaScript pour votre application/site web,</li>
<li>de consommer vos CSS en tant que modules,</li>
<li>de consommer les assets de vos CSS en tant que module (images, fontsâ€¦),</li>
<li>dâ€™avoir un fichier JS, un fichier CSS et vos assets Ã  cÃ´tÃ©.</li>
</ul>
<p><em>Note: si vous Ãªtes sur une application JavaScript, vous ne serez pas obligÃ©
dâ€™utiliser la partie pour lâ€™extraction de la CSS en fichier.
En effet, Webpack consomme tout ce qui est possible en JavaScript.
Les styles peuvent Ãªtre introduit via des balises <code>&lt;styles&gt;</code> dynamiquement
(via le <code>style-loader</code>).
Lâ€™extraction prend du sens si vous avez un rendu serveur et que vous souhaitez
avoir des styles au plus tÃ´t, via une CSS dediÃ©e.</em></p>
<p>La configuration de Webpack se fait via un fichier JavaScript.
Par dÃ©faut, il doit Ãªtre nommÃ© <code>webpack.config.js</code>.
Ne tournons pas autour du pot et voyons un fichier de configuration
correspondant Ã  ce que nous venons de dÃ©crire.</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>)
<span class="hljs-keyword">var</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">"webpack"</span>)
<span class="hljs-keyword">var</span> ExtractTextPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">"extract-text-webpack-plugin"</span>)

<span class="hljs-comment">// on peut passer Ã  notre commande de build l'option --production</span>
<span class="hljs-comment">// on rÃ©cupÃ¨re sa valeur ici en tant que boolÃ©en</span>
<span class="hljs-keyword">var</span> production = process.argv.indexOf(<span class="hljs-string">"--production"</span>) &gt; -<span class="hljs-number">1</span>

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-comment">// nos points d'entrÃ©e, par clÃ©</span>
  <span class="hljs-comment">// (on peut en dÃ©finir plusieurs)</span>
  entry: {
    index: [
      <span class="hljs-string">"./src/index.js"</span>,
    ],
  },

  <span class="hljs-comment">// description de nos sorties</span>
  output: {
    <span class="hljs-comment">// ./dist</span>
    path: path.join(__dirname, <span class="hljs-string">"dist"</span>),
    <span class="hljs-comment">// nous aurons (vu notre point d'entrÃ©e)</span>
    <span class="hljs-comment">// - dist/index.js</span>
    filename: <span class="hljs-string">"[name].js"</span>,
    <span class="hljs-comment">// notre base url</span>
    publicPath: <span class="hljs-string">"/"</span>,
  },

  resolve: {
    <span class="hljs-comment">// ici, on peut ajouter nos extensions Ã  rÃ©soudre lors d'un require()</span>
    <span class="hljs-comment">// on va rester simple en n'autorisant rien, ou .js(on) (comme en nodejs et</span>
    <span class="hljs-comment">// browserify)</span>
    extensions: [
      <span class="hljs-string">""</span>,
      <span class="hljs-string">".js"</span>,
      <span class="hljs-string">".json"</span>,
    ],
  },

  <span class="hljs-built_in">module</span>: {
    <span class="hljs-comment">// liste de nos loaders</span>
    <span class="hljs-comment">// ! \\ Ã  noter que les loaders sont exÃ©cutÃ©s en ordre inverse</span>
    <span class="hljs-comment">// les premiers en dernier, en utilisant la sortie du suivant</span>
    loaders: [
      {
        <span class="hljs-comment">// pour tous les fichiers qui finissent par .js</span>
        test: <span class="hljs-regexp">/\.js$/</span>,
        <span class="hljs-comment">// ... en prenant bien soin d'exclure les node_modules</span>
        exclude: <span class="hljs-regexp">/node_modules/</span>,

        <span class="hljs-comment">// on ajoute les loaders babel et eslint</span>
        <span class="hljs-comment">// Ã  vous de voir ce que vous aurez besoin</span>
        <span class="hljs-comment">// ("rien" est une option tout Ã  fait valable si vous codez en ES5</span>
        <span class="hljs-comment">// sans linter)</span>
        loaders: [
          <span class="hljs-string">"babel"</span>,
          <span class="hljs-string">"eslint"</span>,
        ],

        <span class="hljs-comment">// Ã  noter que l'on peut dÃ©finir les loaders de cette faÃ§on</span>
        <span class="hljs-comment">// loader: "babel!eslint",</span>

        <span class="hljs-comment">// Ã  noter aussi, Webpack va tenter de loader des modules ayant dans</span>
        <span class="hljs-comment">// leur nom "-loader". Si ce n'Ã©tait pas le cas, ou que votre loader</span>
        <span class="hljs-comment">// ne comporte pas -loader, vous pouvez spÃ©cifier le nom entier :</span>
        <span class="hljs-comment">// loader: "babel-loader!eslint-loader",</span>
      },
      <span class="hljs-comment">// Ã  l'inverse de node et browserify, Webpack ne gÃ¨re pas les json</span>
      <span class="hljs-comment">// nativement, il faut donc un loader pour que cela soit transparent</span>
      {
        test: <span class="hljs-regexp">/\.json$/</span>,
        loaders: [
          <span class="hljs-string">"json"</span>,
        ],
      },
      {
        <span class="hljs-comment">// pour nos CSS, on va utiliser un plugin un peu particulier</span>
        <span class="hljs-comment">// qui va nous permettre de require() nos CSS comme un module</span>
        <span class="hljs-comment">// mais qui va tout de mÃªme permettre de sortir tout cela dans un seul</span>
        <span class="hljs-comment">// fichier .css pour la production</span>
        <span class="hljs-comment">// (selon un paramÃ¨tre qu'on dÃ©finira ci-dessous)</span>
        test: <span class="hljs-regexp">/\.css$/</span>,
        <span class="hljs-comment">// cette mÃ©thode possÃ¨de 2 paramÃ¨tres :</span>
        <span class="hljs-comment">// + loaders Ã  utiliser si ce module est dÃ©sactivÃ©</span>
        <span class="hljs-comment">// + loaders Ã  utiliser dans tous les cas en amont</span>
        loader: ExtractTextPlugin.extract(
          <span class="hljs-comment">// si on extract pas, on utilisera le loader suivant</span>
          <span class="hljs-comment">// (ce module chargera les styles dans des tags &lt;style&gt;, suffisant</span>
          <span class="hljs-comment">// en mode dÃ©v)</span>
          <span class="hljs-comment">// en production vous devrez vous charger d'utiliser un</span>
          <span class="hljs-comment">// &lt;link rel="stylesheet" ...</span>
          <span class="hljs-string">"style"</span>,
          <span class="hljs-comment">// dans tous les cas, on utilisera cssnext ainsi que le loader CSS</span>
          <span class="hljs-comment">// de base (celui-ci permet de gÃ©rer les ressources dans le CSS</span>
          <span class="hljs-comment">// en temps que modules: images, font etc)</span>
          <span class="hljs-string">"css!cssnext"</span>
        ),
        <span class="hljs-comment">// Si vous n'avez pas besoin d'avoir une CSS Ã  part, vous pouvez</span>
        <span class="hljs-comment">// simplement supprimer la partie "loader" ci-dessus et utiliser plutÃ´t</span>
        <span class="hljs-comment">// loaders: [</span>
        <span class="hljs-comment">//  "style",</span>
        <span class="hljs-comment">//  "css",</span>
        <span class="hljs-comment">//  "cssnext",</span>
        <span class="hljs-comment">// ],</span>
        <span class="hljs-comment">// Ã€ noter que dans ce cas, il vous faudra supprimer le plugin</span>
        <span class="hljs-comment">// ExtractTextPlugin dans la liste plus bas</span>
      },
      <span class="hljs-comment">// pour la suite, on va rester simple :</span>
      <span class="hljs-comment">// un require() en utilisant le file-loader retournera une string avec</span>
      <span class="hljs-comment">// le nom du fichier et (le plus important) copiera le fichier suivant</span>
      <span class="hljs-comment">// le paramÃ¨tre "name" dans l'output.path que nous avons dÃ©fini tout</span>
      <span class="hljs-comment">// au dÃ©but de notre configuration.</span>
      <span class="hljs-comment">// Notez qu'il dÃ©gagera la partie context du nom lors du retour en string</span>
      <span class="hljs-comment">// et la remplacera par le l'output.path dÃ©fini pour la copie.</span>
      {
        <span class="hljs-comment">// on chargera tous les formats d'images qui nous intÃ©ressent en tant</span>
        <span class="hljs-comment">// que fichiers.</span>
        test: <span class="hljs-regexp">/\.(ico|jpe?g|png|gif)$/</span>,
        loaders: [
          <span class="hljs-string">"file?name=[path][name].[ext]&amp;context=./src"</span>,
          <span class="hljs-comment">// Vous remarquerez ici la mÃ©thode utilisÃ©e pour dÃ©finir</span>
          <span class="hljs-comment">// des options pour les loaders. Il en existe d'autres avec les</span>
          <span class="hljs-comment">// versions les plus rÃ©centes en utilisant la clÃ© "query"</span>
        ],
      },
      {
        <span class="hljs-comment">// idem pour les fonts</span>
        test: <span class="hljs-regexp">/\.(woff|ttf|otf|eot\?#.+|svg#.+)$/</span>,
        loaders: [
          <span class="hljs-string">"file?name=[path][name].[ext]&amp;context=./src"</span>,
        ],
      },
      {
        <span class="hljs-comment">// ici on se permet de loader des fichiers html et txt tels quels</span>
        test: <span class="hljs-regexp">/\.(html|txt)$/</span>,
        loaders: [
          <span class="hljs-string">"file?name=[path][name].[ext]&amp;context=./src"</span>,
        ],
      },
    ],
  },

  <span class="hljs-comment">// en plus des loaders, qui premettent eux de modifier et/ou d'exploiter le</span>
  <span class="hljs-comment">// contenu des modules, nous avons des plugins, plus globaux au processus</span>
  plugins: (
    [
      <span class="hljs-comment">// une partie importante dans notre cas : on active l'extraction CSS (en</span>
      <span class="hljs-comment">// production seulement)</span>
      <span class="hljs-keyword">new</span> ExtractTextPlugin(<span class="hljs-string">"[name].css"</span>, {disable: !production}),

      <span class="hljs-comment">// ce plugin permet de transformer les clÃ©s passÃ©s en dur dans les</span>
      <span class="hljs-comment">// modules ainsi vous pourrez faire dans votre code js</span>
      <span class="hljs-comment">// if (__PROD__) { ... }</span>
      <span class="hljs-keyword">new</span> webpack.DefinePlugin({
        __PROD__: production
      }),
    ]
    <span class="hljs-comment">// en production, on peut rajouter des plugins pour optimiser</span>
    .concat(
      production
      ? [
        <span class="hljs-comment">// ici on rajoute uglify.js pour compresser nos sorties</span>
        <span class="hljs-comment">// (vous remarquerez que certain plugins sont directement livrÃ©s dans</span>
        <span class="hljs-comment">// le package webpack).</span>
        <span class="hljs-keyword">new</span> webpack.optimize.UglifyJsPlugin({
          compress: {
            warnings: <span class="hljs-literal">false</span>,
          },
        }),
      ]
      : []
    )
  ),

  <span class="hljs-comment">// certains modules permettent de dÃ©finir des options en dehors de la</span>
  <span class="hljs-comment">// dÃ©finition des loaders</span>
  cssnext: {
    sourcemap: !production,
    compress: production,
  },
}</code></pre>
<p><em>Ce fichier est Ã  peu prÃ¨s ce que nous utilisons pour notre site Ã  lâ€™heure oÃ¹
est Ã©crit cet article.</em></p>
<p>Une fois Webpack mis en place, vous aurez bien moins lâ€™impression de bricoler
surtout quand il sâ€™agit de consommer des assets de modules tiers (par exemple
Font Awesome).</p>
<p>Sachez que vous pouvez trÃ¨s facilement Ã©crire vos propres loaders pour wrapper
lâ€™utilisation dâ€™un outil qui nâ€™aurait pas encore de loader.
<a href="https://github.com/cssnext/cssnext-loader/blob/master/index.js">Exemple du loader cssnext</a>.</p>
<h2 id="utilisation"><a class="markdownIt-Anchor" href="#utilisation">#</a> Utilisation</h2>
<p>Il y a plusieurs faÃ§on dâ€™utiliser maintenant notre configuration, la plus simple
Ã©tant surement via CLI :</p>
<pre><code class="language-console"><span class="hljs-variable">$ </span>npm install webpack
<span class="hljs-variable">$ </span>webpack</code></pre>
<p>Cela devrait suffire Ã  sâ€™occuper de notre configuration. Cette commande comporte
bien entendu tout un tas dâ€™options qui correspondent souvent Ã  ce que nous
avons dÃ©fini juste avant.
Cela Ã©tant dit, il parait plus maintenable de gÃ©rer une fichier plutÃ´t quâ€™une
ligne de commande de 3 km.</p>
<p>Vous devriez avoir ainsi tout le rÃ©sultat dans <code>dist/</code>.</p>
<p><em>Note: Si vous rencontrez des erreurs du type
<code>Error: Cannot resolve module 'file'</code>, câ€™est tout simplement que vous nâ€™avez pas
installÃ© les loaders nÃ©cessaire. En lâ€™occurence il faudrait installer le
<code>file-loader</code>.</em></p>
<p>Pour avoir tous les loaders nÃ©cessaires comme dans lâ€™exemple ci-dessus:</p>
<pre><code class="language-console">$ npm <span class="hljs-tag">i</span> -D babel-loader eslint-loader babel-eslint
$ npm <span class="hljs-tag">i</span> -D json-loader
$ npm <span class="hljs-tag">i</span> -D style-loader css-loader cssnext-loader
$ npm <span class="hljs-tag">i</span> -D file-loader</code></pre>
<p><em>Note Ã  propos de babel et eslint: pour le moment, il vous faudra spÃ©cifier dans
votre configuration eslint: <code>parser: babel-eslint</code>.</em></p>
<p>Il y a tout un tas de faÃ§on dâ€™utiliser Webpack via une tripotÃ©e de plugins
(Gulp, Grunt, etc.) mais nous allons voir justement ici comment ne pas avoir
recours Ã  ces solutions, ce qui nous permettra ainsi de sâ€™allÃ©ger.</p>
<h3 id="utilisation-en-d-veloppment"><a class="markdownIt-Anchor" href="#utilisation-en-d-veloppment">#</a> Utilisation en dÃ©veloppment</h3>
<p>Webpack CLI possÃ¨de une option <code>--watch</code> qui va surveiller les sources et mettre
Ã  jour tout le nÃ©cessaire Ã  la moindre modification.
Ã€ la diffÃ©rence de browserify, cette fonctionnalitÃ© est dans le core et trÃ¨s
bien intÃ©grÃ©.
De plus, le cache de Webpack est plutÃ´t bien foutu. La premiÃ¨re compilation peut
paraÃ®tre un peu lente, mais la suite est vraiment au top.</p>
<pre><code class="language-console">$ webpack <span class="hljs-comment">--watch -d</span></code></pre>
<p>Lâ€™option <code>-d</code> permet dâ€™activer les source maps.</p>
<p>Ã€ cÃ´tÃ© de ces options, Webpack va plus loin.</p>
<p>En dÃ©veloppement, nous avons besoin de servir toutes les ressources que notre
processus va gÃ©rer.
PlutÃ´t que dâ€™utiliser le systÃ¨me de fichier classique, abusÃ© par Grunt et tout
de mÃªme utilisÃ© par Gulp &amp; co, Webpack fournit un <code>webpack-dev-server</code>.</p>
<p>Ce petit serveur local permettra de servir tout ce dont nous avons besoin
(nos JS, CSS, images, etc.) sans avoir recours au systÃ¨me de fichiers.</p>
<p>Comme pour la commande <code>webpack</code>, le serveur de dÃ©veloppement propose aussi
une CLI basÃ©e sur lâ€™option <code>--watch</code> mais sans lâ€™inconvÃ©nient de lâ€™Ã©criture sur
disque :</p>
<pre><code class="language-console">$ webpack-dev-server <span class="hljs-comment">--content-base dist/</span></code></pre>
<p><em>Source: <a href="http://webpack.github.io/docs/webpack-dev-server.html">http://webpack.github.io/docs/webpack-dev-server.html</a></em></p>
<p>Une fois que votre serveur est dÃ©marrÃ©, pourrez tester que votre point dâ€™entrÃ©e
marche avec <code>http://localhost:8080/index.js</code>.</p>
<p>Il existe bien entendu une API, que nous utilisons Ã  lâ€™heure actuelle sur notre
site, afin dâ€™ajuster notre configuration Webpack en dÃ©veloppement, pour
dâ€™ajouter des fonctionnalitÃ©s comme le â€œhot loadingâ€.</p>
<p>Vous avez Ã  votre disposition
<a href="https://github.com/putaindecode/putaindecode.io/blob/2c1a8f23ec05768960617625f592ea30ed6e2062/scripts/webpack-dev-server.js">notre script dev-server</a>
(Ã©crit en ES6/7), ainsi que son utilisation
<a href="https://github.com/putaindecode/putaindecode.io/blob/2c1a8f23ec05768960617625f592ea30ed6e2062/scripts/build.js#L154-L159">dans notre build</a>.</p>
<p><em>Note : pour avoir une Ã©ventuelle version plus Ã  jour, regardez lâ€™historique de
ces fichiers au cas oÃ¹ nous ayons poussÃ© des ajustements (ou remplacer le hash
par â€œmasterâ€ dans lâ€™url et priez).</em></p>
<h4 id="hot-re-loading"><a class="markdownIt-Anchor" href="#hot-re-loading">#</a> Hot (re)loading</h4>
<p>Ce serveur possÃ¨de bien entendu des fonctionnalitÃ©s similaires au classique
â€œlivereloadâ€, appelÃ© <em>hot mode</em> (ou hot loading).</p>
<p>Tout comme pour le livereload, il faut intÃ©grer dans sa page un script
particulier. Il y a plusieurs faÃ§ons de faire :</p>
<ul>
<li>intÃ©grer <code>http://localhost:8080/webpack-dev-server.js</code> via un tag script</li>
<li>ajouter <code>webpack/hot/dev-server</code> dans les tableaux des points dâ€™entrÃ©es</li>
</ul>
<p><em>Source: <a href="http://webpack.github.io/docs/webpack-dev-server.html#hot-mode">http://webpack.github.io/docs/webpack-dev-server.html#hot-mode</a></em></p>
<p>Notre script dev-server rÃ©fÃ©rencÃ© juste avant sâ€™occupe dâ€™ajouter la ressource
automatiquement en mode dev.</p>
<p>Ã€ la diffÃ©rence dâ€™un simple livereload, ce hot loading permet des choses quâ€™on
aurait jusquâ€™alors pas vraiment imaginÃ©es, comme du hot reload de JavaScript de
composant React (sans rafraichissment complet de page, donc sans perte dâ€™Ã©tat).</p>
<p><strong>Vous Ãªtes invitÃ© Ã  regarder la vidÃ©o que vous trouverez sur la page du
<a href="https://github.com/gaearon/react-hot-loader">react-hot-loader</a>.</strong></p>
<p>Nous nâ€™irons pas plus loin sur ce hot mode, car il nÃ©cessiterait un articlÃ© dÃ©diÃ©
(non pas que ce soit compliquÃ© mais plus parce que câ€™est un sujet Ã  part).</p>
<h3 id="utilisation-en-production"><a class="markdownIt-Anchor" href="#utilisation-en-production">#</a> Utilisation en production</h3>
<pre><code class="language-console">$ webpack <span class="hljs-comment">--production</span></code></pre>
<p>Notre configuration dÃ©tecte lâ€™option <code>--production</code> et ajuste dÃ©jÃ  en
consÃ©quence.
Il faut Ã©ventuellement utiliser la variable prÃ©vue pour ajuster vos loaders sâ€™il
propose des options dâ€™optimisation.</p>
<p>Maintenant, il nâ€™y aura plus quâ€™Ã  voir tout le rÃ©sultat dans <code>dist/</code>.</p>
<hr>
<p>Nous avons vu ici un exemple assez simple qui peut Ãªtre utilisÃ© pour un site web
ou une appplication simple.</p>
<p>Une question se pose alors :</p>
<blockquote>
<p>Ã€ la vue de ce que peut gÃ©rer Webpack et ses loaders, est-il pertinent de
continuer Ã  utiliser des task runners pour nos assets et compagnie ?</p>
</blockquote>
<p><strong>La rÃ©ponse est non.</strong> ğŸ˜±</p>
<p>Vous verrez assez rapidement que vous devriez pourvoir tout jeter Ã  la poubelle.
Sans trop de regrets, puisque Webpack va vous permettre de consommer tout ce que
nous avions lâ€™habitude de bricoler / copier / ajusterâ€¦</p>
<p>Nous lâ€™avons fait pour notre site, pourquoi pas vous ?</p>
<p>Et notre interface nâ€™as pas changÃ© dâ€™un poil puisque nous utilisons toujours les
mÃªmes commandes via les
<a href="https://docs.npmjs.com/misc/scripts">npm scripts</a>:</p>
<ul>
<li><code>npm start</code> pour dÃ©v</li>
<li><code>npm run build --production</code> avant de dÃ©ployer en production.</li>
</ul>
<p>Il existe encore beaucoup de leviers Ã  toucher dans le cas
dâ€™applications full JavaScript afin dâ€™amÃ©liorer bien des points.</p>
<p>Vous trouverez facilement tout un tas de
<a href="https://duckduckgo.com/?q=webpack+boilerplate">boilerplates Webpack</a>
avec des amÃ©liorations diverses et variÃ©es selon vos besoins.</p>
<p>Soyez curieux !</p>
]]></description><link>http://putaindecode.io/fr/articles/js/webpack/premier-exemple/</link><guid isPermaLink="true">http://putaindecode.io/fr/articles/js/webpack/premier-exemple/</guid><pubDate>Tue, 21 Jul 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[Webpack]]></title><description><![CDATA[<h1 id="pourquoi-webpack"><a class="markdownIt-Anchor" href="#pourquoi-webpack">#</a> Pourquoi Webpack ?</h1>
<p>Webpack a pour objectif de vous faciliter la vie, notamment en vous aidant Ã 
organiser <a href="/fr/articles/frontend/2015-etat-lieux-javascript-modulaire/">votre application JS en modules</a>.
Le projet est dÃ©jÃ  trÃ¨s populaire, particuliÃ¨rement dans la communautÃ© React, ce qui
parait logique vu quâ€™il sâ€™agit de dÃ©velopper des composants.</p>
<p>Webpack apporte Ã  ce niveau des fonctionnalitÃ©s intÃ©ressantes :</p>
<ul>
<li>disposer de toutes les ressources statiques (CSS, images, fontes) en tant que
module,</li>
<li>intÃ©grer et consommer des bibliothÃ¨ques tierces trÃ¨s simplement en tant
que module,</li>
<li>sÃ©parer votre <code>build</code> en plusieurs morceaux, chargÃ©s Ã  la demande,</li>
<li>garder un chargement initial trÃ¨s rapide si besoin,</li>
<li>personnaliser la plupart des Ã©tapes du processus,</li>
<li>adaptÃ© pour les gros projets.</li>
</ul>
<p>Avant Webpack, nous avions beau avoir des super task-runners comme
<a href="/fr/articles/js/grunt/">Grunt</a>
ou
<a href="/fr/articles/js/gulp/">Gulp</a>,
il faut avouer quâ€™on bricolait quand mÃªme pas mal.</p>
<p>Et vous avez sÃ»rement mieux Ã  faire que de devoir modifier des configurations ou
des dÃ©finitions de tÃ¢ches pour ajuster les copies dâ€™images ou de fontes, ou
encore ajuster des URL gÃ©nÃ©rÃ©es.
Il y avait avec ces solutions une grande partie de rafistolage, oÃ¹ lâ€™on se
devait de faire trÃ¨s attention Ã  la moindre rÃ©organisation de code, sous peine
de casser une partie du rendu.</p>
<p>Prenons par exemple une image de fond dÃ©clarÃ©e en CSS via un
<code>background: url(...)</code>.
Qui vous prÃ©viendra lorsque celle-ci aura Ã©tÃ© supprimÃ©e ou dÃ©placÃ©e,
et que la rÃ©fÃ©rence nâ€™est donc plus bonne ?
Peut-Ãªtre vos logs de serveur web ? En recherchant les erreurs HTTP 404â€¦</p>
<p>Vous avez la responsabilitÃ© de gÃ©rer vos tÃ¢ches et leurs rÃ©sultats tout en vous
assurant du bon fonctionnement car vous Ãªtes la glu entre tous ces morceaux.</p>
<h1 id="qu-est-ce-que-webpack"><a class="markdownIt-Anchor" href="#qu-est-ce-que-webpack">#</a> Quâ€™est-ce que Webpack ?</h1>
<p>Pas besoin de sâ€™appeler Einstein pour comprendre les intentions de Webpack en
interprÃ©tant le nom : web + pack. Faire un pack prÃªt pour le web.</p>
<p>Nativement, Webpack sâ€™occupe uniquement de ressources JavaScript.
Webpack propose un systÃ¨me de <em>loader</em> qui permet de transformer tout et
nâ€™importe quoi en JavaScript (mais pas que).
Ainsi, tout est consommable en tant que module.</p>
<p>Webpack prend Ã  charge la fonction <code>require()</code> (connue et utilisÃ©e dans node.js et
browserify) et permet de dÃ©finir des nouveaux comportements.</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> myModule = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./my-module.js"</span>)
<span class="hljs-comment">// "classique" pour ceux qui utilisent node.js/browserify</span>

<span class="hljs-comment">// nouveautÃ© avec Webpack</span>
<span class="hljs-keyword">var</span> myStyles = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./my-module.css"</span>)
<span class="hljs-comment">// si vous utilisez le css-loader par exemple, toutes les directives url()</span>
<span class="hljs-comment">// se comporteront comme des require(), ainsi, vous pourrez appliquer</span>
<span class="hljs-comment">// des loaders sur tous vos assets et vous aurez des erreurs Ã  la compilation</span>
<span class="hljs-comment">// si une ressource est manquante.</span>

<span class="hljs-comment">// vous pourrez aussi consommer des SVG en tant que chaÃ®nes (eg: raw-loader)</span>
<span class="hljs-keyword">var</span> mySVG = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./my-module.svg"</span>)

<span class="hljs-comment">// ou inclure des fichiers dans votre build (via file-loader)</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">"index.html"</span>)</code></pre>
<p>Câ€™est cette partie qui est aujourdâ€™hui la plus intÃ©ressante et la plus flexible.</p>
<figure>
  <img src="index.jpg" alt="" />
  <figcaption>
    Webpack transforme une multitude de fichiers en lots par responsabilitÃ©
  </figcaption>
</figure>
<p>Webpack va donc pouvoir sâ€™occuper aussi bien de vos modules JavaScript
(CommonJS, AMD, UMDâ€¦),
mais aussi de <a href="https://github.com/css-modules/css-modules">vos modules CSS</a>,
de vos fichiers SVG, gif, png, etc. ainsi que potentiellement nâ€™importe quel
type de fichier pour peu que vous preniez le temps dâ€™Ã©crire un <em>loader</em>
(rassurez-vous, il existe dÃ©jÃ  un loader pour tous les fichiers que vous
manipulez couramment).</p>
<p>En plus de cela, il a Ã©tÃ© pensÃ© afin de permettre la sÃ©paration de votre pack
(votre gros fichier JavaScript compilÃ©) en plusieurs morceaux, selon vos
besoins : vous pourrez ainsi ajuster la balance entre performance et lazy
loading.</p>
<p>Avec les solutions existantes, il est actuellement trÃ¨s difficile dâ€™arriver
facilement Ã  ce que propose Webpack, pour ne pas dire impossible.</p>
<p>Il est possible dâ€™avoir lâ€™Ã©quivalent avec
<a href="/fr/articles/js/browserify/">browserify</a> comme lâ€™a indiquÃ© son auteur
dans un article
<a href="https://gist.github.com/substack/68f8d502be42d5cd4942">browserify for Webpack users</a>
(qui est une rÃ©ponse Ã  la ressource
<a href="https://github.com/webpack/docs/wiki/webpack-for-browserify-users">Webpack for browserify users</a>
).</p>
<p>Il est clair que cela nâ€™est pas aussi simple quâ€™avec Webpack qui est beaucoup
plus flexible de par sa conception et ses objectifs initiaux.</p>
<p>Par exemple, browserify pourra appliquer dâ€™Ã©ventuelles transformations
uniquement au code local et donc pas dans <code>node_modules/*</code>.
Cela peut Ãªtre problÃ©matique et nous conduit forcÃ©ment Ã  finir par du
bricolage si on veut consommer des assets de modules de maniÃ¨re transparente.</p>
<p>Ne parlons pas du
<a href="http://webpack.github.io/docs/hot-module-replacement-with-webpack.html">hot loading</a>
(remplacement de code Ã  la volÃ©e)
qui nâ€™est pas du tout facile Ã  mettre en place (pour le moment) avec
autre chose que Webpack.</p>
<h1 id="comment-int-grer-webpack-dans-votre-workflow"><a class="markdownIt-Anchor" href="#comment-int-grer-webpack-dans-votre-workflow">#</a> Comment intÃ©grer Webpack dans votre workflow ?</h1>
<p>Dans un premier temps vous pourrez facilement intÃ©grer Webpack en remplacement de
<a href="/fr/articles/js/browserify/">browserify</a> ou dâ€™une Ã©ventuelle
concatÃ©nation via des plugins Gulp, Grunt, etc.</p>
<p>Dans un second temps, vous pourrez trÃ¨s certainement remplacer une partie de vos
autres tÃ¢ches pour ajuster/copier/dÃ©placer vos assets (CSS, imagesâ€¦) et
ainsi rÃ©duire le code dÃ©diÃ© Ã  votre workflow. Il se pourrait alors que votre
utilisation dâ€™un task-runner soit maintenant si rÃ©duite que vous pourriez vous
en passez en utilisant simplement
<a href="http://blog.keithcirkel.co.uk/how-to-use-npm-as-a-build-tool/">des scripts npm</a>.</p>
<p>Si jamais vous Ãªtes limitÃ©, <a href="/fr/articles/npm/utilitaire-cli/">vous pourrez bien entendu crÃ©er votre propre
commande</a>, qui sera rÃ©utilisable dans
nâ€™importe quel contexte.</p>
<h1 id="webpack-en-pratique"><a class="markdownIt-Anchor" href="#webpack-en-pratique">#</a> Webpack en pratique</h1>
<p>Quelques ressources pour vous y mettre :</p>
<ul>
<li>Un premier <a href="/fr/articles/js/webpack/premier-exemple">exemple dÃ©taillÃ© de configuration et dâ€™utilisation</a>
basÃ© sur notre retour dâ€™expÃ©rience.</li>
</ul>
<p>En anglais :</p>
<ul>
<li><a href="http://webpack.github.io/docs/tutorials/getting-started/">Tutoriel officiel</a></li>
<li><a href="http://okonet.ru/viennajs-webpack-introduction/">Slides dâ€™introduction</a></li>
<li><a href="https://github.com/petehunt/webpack-howto">â€œHow toâ€ webpack</a></li>
</ul>
<p><a href="http://webpack.github.io/docs">Webpack possÃ¨de une documentation</a>
assez fournie, mais pas vraiment facile Ã  aborder lorsquâ€™on dÃ©couvre le projet.
Aussi, nâ€™hÃ©sitez pas Ã  nous poser vos questions en commentaires.</p>
]]></description><link>http://putaindecode.io/fr/articles/js/webpack/</link><guid isPermaLink="true">http://putaindecode.io/fr/articles/js/webpack/</guid><pubDate>Mon, 20 Jul 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[Les Dockerfiles]]></title><description><![CDATA[<p>Dans <a href="/fr/articles/docker/">lâ€™article prÃ©cÃ©dent</a>, je vous ai
prÃ©sentÃ© le fonctionnement de base de Docker. Mais cela vous limitait Ã 
lâ€™usage des images que vous pouviez trouver sur le <a href="https://registry.hub.docker.com/">Docker
Hub</a>. Afin de vraiment pouvoir utiliser
Docker au maximum, il serait apprÃ©ciable de pouvoir crÃ©er des images adaptÃ©es Ã 
nos projets et câ€™est lÃ  lâ€™utilitÃ© des Dockerfiles.</p>
<h1 id="les-dockerfiles"><a class="markdownIt-Anchor" href="#les-dockerfiles">#</a> Les Dockerfiles</h1>
<p>Les Dockerfiles sont des fichiers qui permettent de construire une image Docker
adaptÃ©e Ã  nos besoins, Ã©tape par Ã©tape. Rentrons dans le vif du sujet en crÃ©ant
une image permettant de lancer un projet JavaScript.</p>
<p>Pour commencer, crÃ©ez un nouveau fichier <code>Dockerfile</code> Ã  la racine de votre
projet.</p>
<p>La premiÃ¨re chose Ã  faire dans un Dockerfile est de dÃ©finir de quelle image
vous hÃ©ritez. Pour cet exemple, je vous propose dâ€™utiliser une image de Debian
comme base (ce qui est une bonne pratique, car cette image
est plutÃ´t lÃ©gÃ¨re en comparaison avec celle dâ€™Ubuntu par exemple).</p>
<pre><code><span class="hljs-tag">FROM</span> <span class="hljs-tag">debian</span><span class="hljs-pseudo">:jessie</span></code></pre>
<p><code>FROM</code> permet de dÃ©finir notre image de base, vous pouvez lâ€™utiliser uniquement
une fois dans un Dockerfile.</p>
<p>Comme nous voulons crÃ©er une image pour une application JavaScript full-stack,
nous devons commencer par installer Node.js. Pour ce faire, on va tÃ©lÃ©charger
lâ€™archive Node.js directement depuis le site officiel Ã  lâ€™aide de curl que nous
allons aussi devoir installer.</p>
<pre><code><span class="hljs-constant">RUN</span> apt-get update \
&amp;&amp; apt-get install -y curl \
&amp;&amp; rm -rf /var/<span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">apt</span>/<span class="hljs-title">lists</span>/*</span>

<span class="hljs-constant">RUN</span> curl -<span class="hljs-constant">LO</span> <span class="hljs-string">"https://nodejs.org/dist/v0.12.5/node-v0.12.5-linux-x64.tar.gz"</span> \
&amp;&amp; tar -xzf node-v0.<span class="hljs-number">12.5</span>-linux-x64.tar.gz -<span class="hljs-constant">C</span> /usr/local --strip-components=<span class="hljs-number">1</span> \
&amp;&amp; rm node-v0.<span class="hljs-number">12.5</span>-linux-x64.tar.gz</code></pre>
<p><code>RUN</code> permet dâ€™exÃ©cuter une commande Ã  lâ€™intÃ©rieur de votre image comme si vous
Ã©tiez devant un shell unix.</p>
<p>La premiÃ¨re commande nous permet dâ€™installer curl et de nettoyer ensuite le
gestionnaire de paquets afin que notre image soit un peu plus lÃ©gÃ¨re.</p>
<p>Avec la deuxiÃ¨me commande, nous tÃ©lÃ©chargeons le binaire de Node.js que nous
installons ensuite Ã  Ã§a place, et on nâ€™oublie pas de supprimer lâ€™archive
ensuite.</p>
<p>Vous pouvez vous demander pourquoi jâ€™exÃ©cute plusieurs commandes sur une mÃªme
instruction <code>RUN</code> ? Eh bien, cela permet simplement de limiter le nombre
dâ€™instructions dans votre Dockerfile ce qui rendra votre image finale plus
lÃ©gÃ¨re.</p>
<p>Maintenant, nous allons ajouter les sources de notre projet dans lâ€™image et
tÃ©lÃ©charger nos dÃ©pendances.</p>
<pre><code><span class="hljs-built_in">ADD</span> <span class="bash">package.json /app/
</span>
<span class="hljs-built_in">WORKDIR</span> <span class="bash">/app
</span>
<span class="hljs-built_in">RUN</span> <span class="bash">npm install
</span>
<span class="hljs-built_in">ADD</span> <span class="bash">. /app/</span></code></pre>
<p><code>ADD</code> permet dâ€™ajouter des fichiers locaux ou distants Ã  lâ€™intÃ©rieur de votre
image, il est le plus souvent utilisÃ© pour importer les sources de votre projet
ou des fichiers de configuration.</p>
<p><code>WORKDIR</code> permet de changer le rÃ©pertoire courant de votre image, toutes les
commandes qui suivront seront exÃ©cutÃ©es Ã  partir de ce rÃ©pertoire.</p>
<p>Avec la derniÃ¨re instruction, nous ajoutons les sources de notre projet Ã 
lâ€™intÃ©rieur de lâ€™image, mais vous allez vous demander pourquoi nous ne lâ€™avons
pas fait en mÃªme temps que lâ€™ajout des fichiers de dÃ©pendances. Eh bien, cela
nous permet dâ€™Ã©conomiser beaucoup de temps !</p>
<p>Quand Docker crÃ©e une nouvelle image Ã  partir dâ€™un Dockerfile, il exÃ©cute chaque
instruction dans un conteneur, et le rÃ©sultat de cette instruction est
sauvegardÃ© sous forme de couche. Au final, une image est un assemblage de
plusieurs couches (une par instruction). Et donc, quand vous reconstruisez une
image pour la seconde fois, les instructions qui nâ€™impliquent pas de changements
ne sont pas rÃ©exÃ©cutÃ©es, car la couche est rÃ©cupÃ©rÃ©e depuis lâ€™image prÃ©cÃ©dente. Par
contre, si lâ€™instruction implique un changement quelconque, elle est rÃ©exÃ©cutÃ©e
ainsi que toutes les instructions suivantes.</p>
<p>Dans notre cas, les sources auront tendance Ã  beaucoup changer, et donc ne pas
retÃ©lÃ©charger les dÃ©pendances Ã  chaque changement dans le code est un rÃ©el gain
de temps !</p>
<p>Maintenant, nous allons indiquer quel port et dossier nous souhaitons partager
avec lâ€™extÃ©rieur du conteneur.</p>
<pre><code><span class="hljs-built_in">EXPOSE</span> <span class="hljs-number">3000</span>

<span class="hljs-built_in">VOLUME</span> <span class="bash">/app/<span class="hljs-built_in">log</span></span></code></pre>
<p><code>EXPOSE</code> et <code>VOLUME</code> permettent respectivement dâ€™indiquer quel port et quel
dossier nous souhaitons partager.</p>
<p>Et pour finir, nous pouvons indiquer quelle instruction doit sâ€™exÃ©cuter au
lancement de votre conteneur grÃ¢ce Ã  lâ€™instruction <code>CMD</code>.</p>
<pre><code>CMD <span class="hljs-keyword">node</span><span class="hljs-identifier"> </span><span class="hljs-title">server</span>.js</code></pre>
<p>Voici un rÃ©sumÃ© de notre Dockerfile :</p>
<pre><code><span class="hljs-comment"># Image de base</span>
<span class="hljs-built_in">FROM</span> debian:jessie

<span class="hljs-comment"># Installation de curl avec apt-get</span>
<span class="hljs-built_in">RUN</span> <span class="bash">apt-get update \
&amp;&amp; apt-get install -y curl \
&amp;&amp; rm -rf /var/lib/apt/lists/*
</span>
<span class="hljs-comment"># Installation de Node.js Ã  partir du site officiel</span>
<span class="hljs-built_in">RUN</span> <span class="bash">curl -LO <span class="hljs-string">"https://nodejs.org/dist/v0.12.5/node-v0.12.5-linux-x64.tar.gz"</span> \
&amp;&amp; tar -xzf node-v0.<span class="hljs-number">12.5</span>-linux-x64.tar.gz -C /usr/<span class="hljs-built_in">local</span> --strip-components=<span class="hljs-number">1</span> \
&amp;&amp; rm node-v0.<span class="hljs-number">12.5</span>-linux-x64.tar.gz
</span>
<span class="hljs-comment"># Ajout du fichier de dÃ©pendances package.json</span>
<span class="hljs-built_in">ADD</span> <span class="bash">package.json /app/
</span>
<span class="hljs-comment"># Changement du repertoire courant</span>
<span class="hljs-built_in">WORKDIR</span> <span class="bash">/app
</span>
<span class="hljs-comment"># Installation des dÃ©pendances</span>
<span class="hljs-built_in">RUN</span> <span class="bash">npm install
</span>
<span class="hljs-comment"># Ajout des sources</span>
<span class="hljs-built_in">ADD</span> <span class="bash">. /app/
</span>
<span class="hljs-comment"># On expose le port 3000</span>
<span class="hljs-built_in">EXPOSE</span> <span class="hljs-number">3000</span>

<span class="hljs-comment"># On partage un dossier de log</span>
<span class="hljs-built_in">VOLUME</span> <span class="bash">/app/<span class="hljs-built_in">log</span>
</span>
<span class="hljs-comment"># On lance le serveur quand on dÃ©marre le conteneur</span>
<span class="hljs-built_in">CMD</span> <span class="bash">node server.js</span></code></pre>
<p>Avant de transformer ce Dockerfile en une image, vous devez crÃ©er un fichier de
plus, le <code>.dockerignore</code>, ce fichier permet comme un <code>.gitignore</code> de ne pas
inclure certain fichiers dans votre image Docker, et câ€™est trÃ¨s important afin
dâ€™Ã©viter dâ€™inclure les dÃ©pendances de votre projet dans votre image
(<code>node_modules</code> dans notre cas) qui sont propres Ã  votre
systÃ¨me, mais pas au systÃ¨me du conteneur. Voici Ã  quoi votre <code>.dockerignore</code>
doit ressembler :</p>
<pre><code><span class="hljs-tag">node_modules</span>
<span class="hljs-class">.git</span></code></pre>
<p>Pour transformer ce Dockerfile en une image Docker, vous devez utiliser cette
commande :</p>
<pre><code class="language-console">$ docker build -t fullstack-js .
Sending build context to Docker daemon 4.381 MB
Sending build context to Docker daemon
Step 0 : FROM debian:jessie
 -<span class="ruby">--&gt; bf84c1d84a8f
</span>Step 1 : RUN apt-get update &amp;&amp; apt-get install -y curl &amp;&amp; rm -rf /var/lib/apt/lists/*
 -<span class="ruby">--&gt; <span class="hljs-constant">Running</span> <span class="hljs-keyword">in</span> <span class="hljs-number">93258459</span>a279
</span>...
 -<span class="ruby">--&gt; <span class="hljs-number">4</span>fffcf3749a2
</span>Removing intermediate container 93258459a279
Step 2 : RUN curl -LO "https://nodejs.org/dist/v0.12.5/node-v0.12.5-linux-x64.tar.gz" &amp;&amp; tar -xzf node-v0.12.5-linux-x64.tar.gz -C /usr/local --strip-components=1 &amp;&amp; rm node-v0.12.5-linux-x64.tar.gz
 -<span class="ruby">--&gt; <span class="hljs-constant">Running</span> <span class="hljs-keyword">in</span> a3a17d584bae
</span>...
 -<span class="ruby">--&gt; <span class="hljs-number">4</span>eaa62ace8de
</span>Removing intermediate container a3a17d584bae
Step 3 : ADD *.json /app/
 -<span class="ruby">--&gt; <span class="hljs-number">1</span>e8ffd7e10a8
</span>Removing intermediate container 5db20e8b8ed2
Step 4 : WORKDIR /app
 -<span class="ruby">--&gt; <span class="hljs-constant">Running</span> <span class="hljs-keyword">in</span> <span class="hljs-number">7</span>b84b06642b1
</span> -<span class="ruby">--&gt; <span class="hljs-number">9</span>c0e2287c34d
</span>Removing intermediate container 7b84b06642b1
Step 5 : RUN npm install
 -<span class="ruby">--&gt; <span class="hljs-constant">Running</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0523</span>df6e9aac
</span>...
 -<span class="ruby">--&gt; <span class="hljs-number">6</span>d7327ebee3<span class="hljs-number">0</span>
</span>Removing intermediate container 0523df6e9aac
Step 6 : ADD . /app
 -<span class="ruby">--&gt; <span class="hljs-number">13</span>bdbe70c6fa
</span>Removing intermediate container 3c83d82c1d53
Step 7 : EXPOSE 3000
 -<span class="ruby">--&gt; <span class="hljs-constant">Running</span> <span class="hljs-keyword">in</span> <span class="hljs-number">51</span>e252173b12
</span> -<span class="ruby">--&gt; <span class="hljs-number">6</span>c62eb1197e2
</span>Removing intermediate container 51e252173b12
Step 8 : VOLUME /app/log
 -<span class="ruby">--&gt; <span class="hljs-constant">Running</span> <span class="hljs-keyword">in</span> <span class="hljs-number">4</span>af0bb73307b
</span> -<span class="ruby">--&gt; <span class="hljs-number">15</span>b6190de473
</span>Removing intermediate container 4af0bb73307b
Step 9 : CMD node server.js
 -<span class="ruby">--&gt; <span class="hljs-constant">Running</span> <span class="hljs-keyword">in</span> <span class="hljs-number">9522</span>c6b9bf95
</span> -<span class="ruby">--&gt; aaf20fb25dac
</span>Removing intermediate container 9522c6b9bf95
Successfully built aaf20fb25dac</code></pre>
<p>Lâ€™option <code>-t</code> permet de nommer votre image docker, ce qui vous servira lorsque
vous voudrez lancer votre conteneur. Et le <code>.</code> est le repertoire oÃ¹ se trouve
le Dockerfile, dans notre cas le dossier courant.</p>
<p>Maintenant, vous pouvez lancer votre conteneur de cette maniÃ¨re :</p>
<pre><code class="language-console">$ docker <span class="hljs-keyword">run</span> -<span class="hljs-keyword">d</span> -p 3000:3000 -v $(<span class="hljs-keyword">pwd</span>)/<span class="hljs-keyword">log</span>:/<span class="hljs-keyword">app</span>/<span class="hljs-keyword">log</span> fullstack-js</code></pre>
<p>Cette commande permet de lancer notre image en partageant le port et un dossier
avec votre ordinateur, si vous voulez plus de dÃ©tails sur le fonctionnement du
client Docker, je vous invite Ã  lire mon <a href="/fr/articles/docker/">article
prÃ©cÃ©dent</a>.</p>
<hr>
<p>Dans cet article, vous avez pu voir comment crÃ©er votre propre Dockerfile,
maintenant vous pouvez crÃ©er des images Docker parfaitement adaptÃ©es Ã  votre
projet, et mÃªme plus. En cherchant sur Internet, vous pourrez trouver des images
Docker pour tout et nâ€™importe quoi, comme des images pour lancer Chrome dans un
conteneur par exemple. Pour en savoir plus, je vous redirige vers le
blog de <a href="https://blog.jessfraz.com/post/docker-containers-on-the-desktop/">Jessie
Frazelle</a>.</p>
<p>Dans le prochain article, je vous parlerai de docker-compose, un outil qui
permet de lancer des applications multi-conteneurs facilement.</p>
]]></description><link>http://putaindecode.io/fr/articles/docker/dockerfile/</link><guid isPermaLink="true">http://putaindecode.io/fr/articles/docker/dockerfile/</guid><pubDate>Thu, 02 Jul 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[SemVer, c'est quoi ?]]></title><description><![CDATA[<p><em>Ce post a Ã©tÃ© largement inspirÃ© de la mauvaise expÃ©rience que jâ€™ai pu avoir
avec lâ€™Ã©volution de <a href="http://backbonejs.org/">Backbone.js</a> qui, ne respectant pas SemVer, mâ€™a posÃ© des
problÃ¨mes lors de mise Ã  jour de versions. Les node_modules (dÃ©pendances de
dÃ©pendances) sont aussi en question.</em></p>
<p>Depuis quelques temps, vous devez entendre le terme <strong>SemVer</strong> par-ci par-lÃ 
mais peut-Ãªtre que vous ne savez pas ce que câ€™est ou que vous ne savez pas
comment lâ€™appliquer. Et je vous comprends, jâ€™ai mis un peu de temps Ã  maitriser
le sujet.</p>
<p>Pour faire simple, <strong>SemVer</strong> (voulant dire <em>Semantic Versioning</em>) est une
gestion sÃ©mantique des versions. En dâ€™autres termes, une faÃ§on de numÃ©roter les
versions de maniÃ¨re logique, cohÃ©rente, parlante, ayant du sens. Ce nâ€™est
cependant pas forcÃ©ment une norme, vous nâ€™Ãªtes pas obligÃ©(e) de la respecter
mais ce serait vraiment, vraiment dommage car il tend justement Ã  lâ€™Ãªtre.</p>
<p>Mais tout dâ€™abord, posons les bases, quâ€™est-ce quâ€™une version ?</p>
<p>Une version sâ€™applique Ã  un produit, une application, une bibliothÃ¨que, un OS,
tout ce qui a une progression en informatique. Cela permet de dÃ©finir
lâ€™avancement du produit. La majoritÃ© du temps (sauf pour quelques hÃ©rÃ©tiques),
cela sâ€™Ã©crit de cette faÃ§on : <code>X.Y.Z</code> oÃ¹ <code>X</code>, <code>Y</code> et <code>Z</code> sont des entiers (pas
forcÃ©ment des chiffres dâ€™ailleurs, cela peut Ãªtre supÃ©rieur Ã  9) soit <code>1.0.10</code>
par exemple. Il est possible que vous voyiez cette forme <code>vX.Y.Z</code> comme <code>v1.0.10</code>
mais en toute franchise, je ne lâ€™apprÃ©cie pas. Jâ€™aime que mon tag Ã©quivaille Ã 
ma version en elle-mÃªme. Purement personnel.</p>
<p>Maintenant que nous savons ce quâ€™est une version, voyons voir ce quâ€™est
rÃ©ellement <strong>SemVer</strong>.</p>
<p><strong>SemVer</strong> est un moyen cohÃ©rent, pertinent de nommer ses versions afin de
savoir rapidement quelles modifications ont Ã©tÃ© apportÃ©es Ã  votre projet.</p>
<p>Voyons voir ce que dit la documentation officielle de
<a href="http://semver.org/lang/fr/">SemVer</a></p>
<blockquote>
<p>Ã‰tant donnÃ© un numÃ©ro de version MAJEUR.MINEUR.CORRECTIF, il faut incrÃ©menterÂ :</p>
</blockquote>
<blockquote>
<p>le numÃ©ro de version MAJEUR quand il y a des changements
rÃ©tro-incompatibles,<br>
le numÃ©ro de version MINEUR quand il y a des changements rÃ©tro-compatibles,<br>
le numÃ©ro de version de CORRECTIF quand il y a des corrections dâ€™anomalies
rÃ©tro-compatibles</p>
</blockquote>
<blockquote>
<p>Des libellÃ©s supplÃ©mentaires peuvent Ãªtre ajoutÃ©s pour les versions de
prÃ©-livraison et pour des mÃ©ta-donnÃ©es de construction sous forme dâ€™extension du
format MAJEURE.MINEURE.CORRECTIF.</p>
</blockquote>
<p>On comprend effectivement lâ€™idÃ©e de <strong>SemVer</strong> (et la suite du site explique
comment lâ€™appliquer) mais je trouve que lâ€™on peut mieux expliquer.</p>
<p>Pour comprendre <strong>SemVer</strong>, il faut se mettre dans la peau de lâ€™utilisateur qui
va se servir de votre production.</p>
<p>En effet, <strong>SemVer</strong> est un contrat que vous signez avec vos utilisateurs, une
forme de respect qui leur permet dâ€™adapter leur code ou non en fonction des
versions que vous proposez.</p>
<p>Si je devais dÃ©finir Ã  quelquâ€™un ce quâ€™est <strong>SemVer</strong>, je lui dirais ceci :</p>
<blockquote>
<p>SemVer sâ€™Ã©crit de cette faÃ§on : <code>X.Y.Z</code> oÃ¹ <code>X</code> est â€œmajeurâ€, <code>Y</code> est â€œmineurâ€,
<code>Z</code> est â€œpatchâ€.</p>
</blockquote>
<blockquote>
<p>Quâ€™est-ce que cela veut dire. Cela veut dire que si vous avez corrigÃ© un bug
dans votre lib et que cela nâ€™affecte en rien le code Ã©crit par votre
utilisateur, alors incrÃ©mentez <code>Z</code> (+0.0.1).</p>
</blockquote>
<blockquote>
<p>Si vous avez fait des ajouts dans votre app qui peuvent Ãªtre intÃ©ressants pour
lâ€™utilisateur et mÃ©rite une certaine attention afin dâ€™amÃ©liorer le code qui
utilise votre lib, alors incrÃ©mentez <code>Y</code> (+0.1.0).</p>
</blockquote>
<blockquote>
<p>Si en revanche, vous avez cassÃ© ne serait-ce quâ€™une partie de lâ€™API (â€œbreaking
changesâ€), que vous avez <em>juste</em> changÃ© des noms de mÃ©thodes / fonctions dÃ©jÃ 
existantes (et donc sÃ»rement utilisÃ©es par quelquâ€™un dâ€™autre), que finalement
cela nÃ©cessite <strong>forcÃ©ment</strong> une modification de la part de lâ€™utilisateur sous
peine que sa propre app ne fonctionne plus, alors incrÃ©mentez <code>X</code> (+1.0.0).</p>
</blockquote>
<p>Câ€™est vraiment une question de respect envers qui vous proposez votre lib. Par
<strong>SemVer</strong>, je vous informe des potentielles modifications ou lectures de
documentation que vous devez faire. Il ne faut vraiment pas voir Ã§a comme une
Ã©volution de votre propre code.</p>
<p>Par exemple, vous avez refactorisÃ© tout votre code mais lâ€™API nâ€™a pas changÃ©.
Alors <code>Z</code> suffit. Et si vous avez ajoutez des mÃ©thodes, câ€™est plutÃ´t <code>Y</code>.
Pourtant il y a eu une quantitÃ© phÃ©nomÃ©nale de code modifiÃ©. Des lignes et des
lignes. Est-ce pour autant que vous devez incrÃ©mentez <code>X</code> ? Non. Surtout lorsque
les tests automatisÃ©s nâ€™ont pas Ã©tÃ© modifiÃ©s et passent toujours.</p>
<p>En revanche, vous ne faites quâ€™une petite modification de nom de mÃ©thode qui ne
vous semble pas appropriÃ©e, Ã§a ne vous prend quâ€™une ligne de modification, vous
pourriez croire que câ€™est uniquement <code>Z</code> Ã  changer ? Non plus. LÃ , vous modifiez
le contrat que lâ€™utilisateur a acquiescÃ© en utilisant votre lib ; vous avez
alors la responsabilitÃ© de lui indiquer que son code doit absolument changer
sinon celui-ci ne marchera plus correctement.</p>
<p>En bref, ne voyez pas lâ€™Ã©volution de votre projet avec <strong>SemVer</strong> mais le
contrat que vous signez implicitement avec vos utilisateurs.</p>
<p>Oh et oui, surtout, surtout, ce nâ€™est pas parce que vous Ãªtes arrivÃ©(e) Ã  <code>9</code>
dans <code>Y</code> ou <code>Z</code> que le nombre le prÃ©cÃ©dant doit augmenter. Par exemple <em>mineur</em>
sur <code>1.9.0</code> ? Alors <code>1.10.0</code> et non <code>2.0.0</code>.</p>
<p>Jâ€™espÃ¨re quâ€™avec ceci, vous vous sentirez plus Ã  lâ€™aise.</p>
<h2 id="tips-npm"><a class="markdownIt-Anchor" href="#tips-npm">#</a> Tips npm</h2>
<p>Avec npm, il est possible de mettre Ã  jour rapidement son <code>package.json</code> et tag
git en utilisant la commande <code>$ npm version</code>. Comme ceci :</p>
<pre><code class="language-console">$ npm version (major|<span class="hljs-string">minor</span>|<span class="hljs-string">patch)</span></code></pre>
<p>Cela vous incrÃ©mentera le <code>package.json</code>  et vous fera un beau commit + tag dans
git tel que :</p>
<pre><code class="language-console">* b474d9c (HEAD -&gt; master, tag: <span class="hljs-number">1.5</span><span class="hljs-number">.3</span>, origin/master) <span class="hljs-number">1.5</span><span class="hljs-number">.3</span>`.</code></pre>
<p>Et pour Ã©viter dâ€™avoir le â€œvâ€ dans les tags git qui est par dÃ©faut dans npm,
faites :</p>
<pre><code class="language-console">$ npm config <span class="hljs-keyword">set</span> <span class="hljs-keyword">tag</span>-<span class="hljs-keyword">version</span>-prefix <span class="hljs-string">""</span></code></pre>
<h2 id="changelog"><a class="markdownIt-Anchor" href="#changelog">#</a> Changelog</h2>
<p><strong>SemVer</strong> va de pair avec les <a href="http://keepachangelog.com/">changelog</a>. Mettre Ã 
jour le changelog vous permet dâ€™indiquer trÃ¨s rapidement ce qui a Ã©tÃ© modifiÃ©
sans que lâ€™utilisateur ait forcÃ©ment Ã  regarder votre code. Il est surtout trÃ¨s
important lors dâ€™ajouts de fonctionnalitÃ©s ou de modifications (majeures et
mineures) afin de voir directement les mÃ©thodes / fonctions affectÃ©es mais aussi
dans le cas dâ€™un patch de voir le gain obtenu de cette nouvelle mise Ã  jour. Ã€
ajouter directement dans le <code>README.md</code> Ã  la fin ou carrÃ©ment dans un fichier ou
des fichiers dÃ©diÃ©s Ã  Ã§a.
Voici un <a href="https://github.com/cssnext/cssnext/blob/master/CHANGELOG.md">exemple</a>.</p>
<hr>
<p>Stay safe, use <strong>SemVer</strong>.</p>
<p>Ressources :</p>
<ul>
<li><a href="http://semver.org/">site officiel</a></li>
<li><a href="http://semver-ftw.org/">semver-ftw</a></li>
</ul>
]]></description><link>http://putaindecode.io/fr/articles/semver/</link><guid isPermaLink="true">http://putaindecode.io/fr/articles/semver/</guid><pubDate>Tue, 16 Jun 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[Introduction Ã  Docker]]></title><description><![CDATA[<p>Avant de vous parler de Docker je vais vous raconter une histoire que tout
dÃ©veloppeur a vÃ©cu au moins une fois.</p>
<p>Il Ã©tait une fois un jeune dÃ©veloppeur qui codait tranquillement sur son
ordinateur. Il Ã©tait pressÃ© car comme tout Ã©tudiant qui se
respecte il devait prÃ©senter son travail le lendemain matin. AprÃ¨s des heures de
travail, lâ€™application Ã©tait lÃ , et elle fonctionnait Ã  merveille ! Le
lendemain, notre codeur arriva tout fier pour sa prÃ©sentation, avec son projet
sur une clÃ© usb. Il le transfÃ¨re sur lâ€™ordinateur de son pote et lÃ , Ã§a
ne fonctionne pas !</p>
<h2 id="quel-est-le-probl-me"><a class="markdownIt-Anchor" href="#quel-est-le-probl-me">#</a> Quel est le problÃ¨me ?</h2>
<p>Lâ€™application de notre jeune dÃ©veloppeur ne fonctionne pas sur lâ€™ordinateur de son ami Ã  cause dâ€™un problÃ¨me dâ€™environnement. Entre deux systÃ¨mes, il
peut y avoir des diffÃ©rences de version sur les dÃ©pendances ou encore des
bibliothÃ¨ques manquantes.</p>
<p>Ici, notre problÃ¨me se limite Ã  2 systÃ¨mes, mais imaginez une Ã©quipe de 10
personnes avec des ordinateurs sous OS X, Linux ou mÃªme Windows, un serveur de
test sous Ubuntu 12.04, et un serveur de production sous CentOS 7.
Sâ€™assurer que leur application fonctionne bien sur tous ces environnements peut
sâ€™avÃ©rer Ãªtre un vrai cauchemar !</p>
<p>Mais il existe des solutions et parmi lâ€™une dâ€™entre elles nous avonsâ€¦</p>
<h2 id="docker"><a class="markdownIt-Anchor" href="#docker">#</a> Docker</h2>
<h3 id="c-est-quoi-docker"><a class="markdownIt-Anchor" href="#c-est-quoi-docker">#</a> Câ€™est quoi Docker ?</h3>
<p>Docker est une plateforme qui va vous permettre dâ€™exÃ©cuter votre code Ã 
lâ€™intÃ©rieur dâ€™un conteneur indÃ©pendamment de la machine sur laquelle vous Ãªtes !
Un conteneur ressemble Ã  une machine virtuelle sauf quâ€™il nâ€™embarque pas tout un
systÃ¨me dâ€™exploitation avec lui ce qui lui permet de sâ€™exÃ©cuter en quelque
secondes et dâ€™Ãªtre beaucoup plus lÃ©ger.</p>
<p>Docker peut donc rÃ©soudre notre problÃ¨me dâ€™environnement, car quelle que soit la
machine que nous utiliserons, le code sâ€™exÃ©cutera de la mÃªme maniÃ¨re.</p>
<p>La plateforme Docker est composÃ©e de deux Ã©lÃ©ments :</p>
<ul>
<li>Le dÃ©mon Docker qui sâ€™exÃ©cute en arriÃ¨re-plan et qui sâ€™occupe de gÃ©rer vos
conteneurs</li>
<li>Le client Docker qui vous permet dâ€™interagir avec le dÃ©mon par lâ€™intermÃ©diaire
dâ€™un outil en ligne de commande</li>
</ul>
<p>Si vous voulez plus dâ€™informations sur le fonctionnement interne de Docker je
vous redirige vers lâ€™article du site officiel : <a href="https://docs.docker.com/introduction/understanding-docker">Understanding
Docker</a></p>
<h3 id="comment-l-installer"><a class="markdownIt-Anchor" href="#comment-l-installer">#</a> Comment lâ€™installer ?</h3>
<p>Le client Docker fonctionne sur tous les systÃ¨mes dâ€™exploitation. En revanche,
le dÃ©mon Docker utilise des fonctionnalitÃ©s du noyau Linux afin de gÃ©rer
les conteneurs. Il ne fonctionne donc que sur Linux. Heureusement la majoritÃ© des
serveurs utilise Linux, et pour vos ordinateurs sous OS X, ou mÃªme Windows, il
existe une solution.</p>
<p>Si vous utilisez une machine avec une distribution Linux vous pourrez lancer le
dÃ©mon Docker directement sur cette derniÃ¨re, par contre avec Windows ou OS X
vous devrez lancer le dÃ©mon dans une machine virtuelle, mais rassurez-vous,
câ€™est trÃ¨s simple !</p>
<p>Pour le guide dâ€™installation de Docker en fonction de votre systÃ¨me je vous
redirige de nouveau vers le site officiel : <a href="https://docs.docker.com/installation/#installation">Guide
dâ€™installation</a></p>
<h3 id="un-premier-exemple"><a class="markdownIt-Anchor" href="#un-premier-exemple">#</a> Un premier exemple</h3>
<p>Avant de commencer, vous allez devoir tÃ©lÃ©charger une image Docker qui servira
de base Ã  vos prochains conteneurs.</p>
<p>Pour cet exemple, on va partir dâ€™une image Ubuntu :</p>
<pre><code class="language-console">$ docker pull <span class="hljs-string">ubuntu:</span>trusty
<span class="hljs-string">trusty:</span> Pulling from ubuntu
<span class="hljs-string">e9e06b06e14c:</span> Pull complete
<span class="hljs-string">a82efea989f9:</span> Pull complete
<span class="hljs-number">37</span><span class="hljs-string">bea4ee0c81:</span> Pull complete
<span class="hljs-number">07</span><span class="hljs-string">f8e8c5e660:</span> Already exists
<span class="hljs-string">ubuntu:</span><span class="hljs-string">trusty:</span> The image you are pulling has been verified. <span class="hljs-string">Important:</span> image verification is a tech preview feature and should not be relied on to provide security.
<span class="hljs-string">Digest:</span> <span class="hljs-string">sha256:</span><span class="hljs-number">014</span>fa1d5b72b4fe0ec2b4642610fbbfdd52f502da8e14e80de07bd1dd774e4ef
<span class="hljs-string">Status:</span> Downloaded newer image <span class="hljs-keyword">for</span> <span class="hljs-string">ubuntu:</span>trusty</code></pre>
<p>Cette commande va tÃ©lÃ©charger depuis le Docker Hub lâ€™image de la version 14.04
(trusty) dâ€™Ubuntu. Il existe bien dâ€™autres images que vous pourrez trouver
<a href="https://registry.hub.docker.com">sur le registry Docker</a>.</p>
<p>Pour voir les images que vous avez tÃ©lÃ©chargÃ©es, utilisez cette commande :</p>
<pre><code class="language-console">$ docker images
REPOSITORY    TAG       IMAGE ID        CREATED       VIRTUAL SIZE
ubuntu        trusty    <span class="hljs-number">07f</span>8e8c5e660    <span class="hljs-number">4</span> weeks ago   <span class="hljs-number">188.3</span> MB</code></pre>
<p>Sur ma machine, lâ€™image dâ€™Ubuntu fais 188.3 MB, je vous avais dit que câ€™Ã©tait
lÃ©ger en comparaison Ã  une machine virtuelle !</p>
<p>Maintenant, nous allons lancer un conteneur et rentrer Ã  lâ€™intÃ©rieur :</p>
<pre><code class="language-console"><span class="hljs-variable">$ </span>docker run -it <span class="hljs-symbol">ubuntu:</span>trusty bash
root<span class="hljs-variable">@2cdceb5ff771</span><span class="hljs-symbol">:/</span><span class="hljs-comment">#</span></code></pre>
<p>Cette commande crÃ©e un conteneur Ã  partir de lâ€™image <code>ubuntu:trusty</code>, y lance le
programme <code>bash</code> et y attache votre shell grÃ¢ce aux options <code>-it</code></p>
<p>Vous pouvez maintenant exÃ©cuter les commandes que vous voulez, elle
sâ€™exÃ©cuteront Ã  lâ€™intÃ©rieur du conteneur, par exemple :</p>
<pre><code class="language-console">root@<span class="hljs-number">2</span>cdceb5ff771:/<span class="hljs-comment">#</span>
$ apt-<span class="hljs-keyword">get</span> moo
                 (__)
                 (oo)
           /<span class="hljs-comment">------\/</span>
          / |    ||
         *  /\<span class="hljs-comment">---/\</span>
            ~~   ~~
...<span class="hljs-string">"Have you mooed today?"</span>...</code></pre>
<p>Vous pouvez quitter le conteneur en faisant un <code>Ctrl-d</code></p>
<p>Maintenant que vous Ãªtes retournÃ© sur votre machine, vous pouvez afficher la
liste des conteneurs lancÃ©s avec cette commande :</p>
<pre><code class="language-console"><span class="hljs-variable">$ </span>docker ps
<span class="hljs-constant">CONTAINER</span> <span class="hljs-constant">ID</span>    <span class="hljs-constant">IMAGE</span>   <span class="hljs-constant">COMMAND</span>   <span class="hljs-constant">CREATED</span>   <span class="hljs-constant">STATUS</span>    <span class="hljs-constant">PORTS</span>   <span class="hljs-constant">NAMES</span></code></pre>
<p>Il nâ€™y a rien ? Câ€™est normal ! En quittant le conteneur ce dernier sâ€™est arrÃªtÃ©
aussi. Pour lâ€™afficher quand mÃªme, il suffit dâ€™entrer cette commande :</p>
<pre><code class="language-console">$ docker ps -a
CONTAINER ID    IMAGE           COMMAND   CREATED         STATUS                    PORTS   NAMES
<span class="hljs-number">2</span>cdceb5ff771    ubuntu:trusty   <span class="hljs-string">"bash"</span>    <span class="hljs-number">12</span> <span class="hljs-function">minutes ago  <span class="hljs-title">Exited</span> <span class="hljs-params">(<span class="hljs-number">0</span>)</span> 2 minutes ago          loving_newton</span></code></pre>
<p>Et pour supprimer ce conteneur ?</p>
<pre><code class="language-console">$ docker rm <span class="hljs-number">2</span>cdc
<span class="hljs-number">2</span>cdc</code></pre>
<p>Ã‰videmment, remplacez â€˜2cdcâ€™ par le <code>CONTAINER ID</code> appropriÃ©.</p>
<p>Passons maintenant Ã  un deuxiÃ¨me exemple plus concret avec une application web.</p>
<h2 id="un-deuxi-me-exemple-avec-node-js"><a class="markdownIt-Anchor" href="#un-deuxi-me-exemple-avec-node-js">#</a> Un deuxiÃ¨me exemple avec Node.js</h2>
<p>Pour commencer, vous allez rÃ©cupÃ©rer lâ€™image docker officiel de Node.js en
faisant :</p>
<pre><code class="language-console">$ docker pull <span class="hljs-string">node:</span><span class="hljs-number">0.12</span><span class="hljs-number">.4</span>
<span class="hljs-number">0.12</span><span class="hljs-number">.4</span>: Pulling from node
<span class="hljs-number">7711</span><span class="hljs-string">db4bb553:</span> Pull complete
<span class="hljs-string">d1744e6e9471:</span> Pull complete
<span class="hljs-number">9332645</span><span class="hljs-string">b03a3:</span> Pull complete
<span class="hljs-string">a52a290821b3:</span> Pull complete
<span class="hljs-number">3575</span><span class="hljs-string">f1347ce7:</span> Already exists
<span class="hljs-number">39</span><span class="hljs-string">bb80489af7:</span> Already exists
<span class="hljs-string">df2a0347c9d0:</span> Already exists
<span class="hljs-number">7</span><span class="hljs-string">a3871ba15f8:</span> Already exists
<span class="hljs-string">a2703ed272d7:</span> Already exists
<span class="hljs-string">c9e3effdd23a:</span> Already exists
<span class="hljs-string">node:</span><span class="hljs-number">0.12</span><span class="hljs-number">.4</span>: The image you are pulling has been verified. <span class="hljs-string">Important:</span> image verification is a tech preview feature and should not be relied on to provide security.
<span class="hljs-string">Digest:</span> <span class="hljs-string">sha256:</span><span class="hljs-number">81</span>fb0812dd5e81f768773a121c8a6daced36893210c5ed50b504c4abcb04e10c
<span class="hljs-string">Status:</span> Downloaded newer image <span class="hljs-keyword">for</span> <span class="hljs-string">node:</span><span class="hljs-number">0.12</span><span class="hljs-number">.4</span></code></pre>
<p>Puis crÃ©ez un fichier <code>server.js</code> avec le contenu suivant :</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>)

<span class="hljs-keyword">var</span> server = http.createServer(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) </span>{
  res.end(<span class="hljs-string">'Coucou depuis Docker'</span>)
});

server.listen(<span class="hljs-number">3000</span>)</code></pre>
<p>Et maintenant, pour lancer notre application Ã  lâ€™intÃ©rieur dâ€™un conteneur, vous
devez faire :</p>
<pre><code class="language-console">$ docker run -d --name <span class="hljs-keyword">node</span><span class="hljs-identifier"></span><span class="hljs-title">-app</span> -p <span class="hljs-number">3000</span>:<span class="hljs-number">3000</span> -v $(pwd):/app <span class="hljs-keyword">node</span><span class="hljs-identifier"></span><span class="hljs-title">:0</span>.<span class="hljs-number">12.4</span> <span class="hljs-keyword">node</span><span class="hljs-identifier"> </span><span class="hljs-title">/app</span>/server.js
e9ca3cd8f90b8554ca99ec8ba15a039f827005bd8fecbf80d72ce7267006a6df</code></pre>
<p>Si vous vous rendez sur <code>localhost:3000</code> (ou lâ€™IP de la VM si Ãªtes sur Windows
ou Mac), vous verrez : â€˜Coucou depuis Dockerâ€™</p>
<p>Câ€™est beau, mais comment Ã§a marche ? Examinons les options une par une :</p>
<ul>
<li><code>-d</code> : cette option permet de lancer le conteneur en mode dÃ©mon et donc de
tourner en tÃ¢che de fond Ã  la diffÃ©rence de <code>-it</code> qui lanÃ§ait le conteneur au
premier plan et nous donnait un accÃ¨s direct au conteneur.</li>
<li><code>--name node-app</code> : cette option permet simplement de nommer notre conteneur,
ce qui peut servir pour lâ€™arrÃªter et le relancer plus simplement (et Ã  dâ€™autres
choses plus complexes dont je parlerai dans un prochain article).</li>
<li><code>-p 3000:3000</code> : cette option permet de partager le port de votre machine avec
le port du conteneur. Le premier nombre est le port de votre machine et le
deuxiÃ¨me le port dans le conteneur.</li>
<li><code>-v $(pwd):/app</code> : cette option permet de partager un dossier avec votre
conteneur, ici, nous partageons le dossier courant (oÃ¹ se trouve notre fichier
<code>server.js</code>) avec le dossier <code>/app</code> dans le conteneur (attention si vous Ãªtes
sur Mac ou Windows uniquement votre â€˜homeâ€™ est partagÃ©).</li>
<li><code>node:0.12.4</code> : lâ€™image Docker que vous voulez utiliser.</li>
<li><code>node /app/server.js</code> : la commande Ã  exÃ©cuter dans le conteneur.</li>
</ul>
<p>Et maintenant ? Vous pouvez afficher le conteneur en faisant : <code>docker ps</code>, lâ€™arrÃªter
avec : <code>docker stop node-app</code> et le supprimer avec <code>docker rm node-app</code>.</p>
<hr>
<p>Dans cet article, nous avons vu comment rÃ©cupÃ©rer des images Docker depuis le
Docker Hub et comment les instancier afin de crÃ©er des conteneurs. Mais pour aller
plus loin, ce serait bien si nous pouvions crÃ©er nos propres images, câ€™est ce que
nous apprendrons Ã  faire Ã  lâ€™aide des Dockerfile dans le prochain article.</p>
]]></description><link>http://putaindecode.io/fr/articles/docker/</link><guid isPermaLink="true">http://putaindecode.io/fr/articles/docker/</guid><pubDate>Thu, 11 Jun 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[Les webhooks GitHub]]></title><description><![CDATA[<p>Vous avez pu lire rÃ©cemment une <a href="/fr/articles/ci/deploiement-continu/">introduction sur lâ€™intÃ©gration
continue</a> qui mÃ¨ne vers <a href="/fr/articles/ci/">le dÃ©ploiement
continu</a>. Si vous utilisez GitHub pour hÃ©berger vos
sources et que vous cherchez un moyen trÃ¨s simple (peut-Ãªtre un peu trop) de
mettre en place le dÃ©ploiement continu <em>sans serveur dâ€™intÃ©gration continue
dÃ©diÃ©</em>, alors les webhooks peuvent rÃ©pondre parfaitement Ã  votre besoin.</p>
<h2 id="les-quoi"><a class="markdownIt-Anchor" href="#les-quoi">#</a> Les quoi ?</h2>
<p>Les webhooks permettent de lancer une action de faÃ§on automatique par
lâ€™intermÃ©diaire dâ€™un ou plusieurs Ã©vÃ©nements depuis un dÃ©pÃ´t
<a href="http://github.com">GitHub</a>. ConcrÃ¨tement, il va Ãªtre possible de dÃ©ployer son
projet sur un serveur de production, sauvegarder son site Internet, ou mÃªme
mettre Ã  jour des stats dÃ¨s quâ€™un commit sera envoyÃ© ou mÃªme une issue ouverte.
Il est possible de faire tout ce que lâ€™on veut dans la limite de son imagination
comme lâ€™explique GitHub.</p>
<h2 id="comment-a-marche"><a class="markdownIt-Anchor" href="#comment-a-marche">#</a> Comment Ã§a marche ?</h2>
<p>Le fonctionnement est on ne peut plus simple, un Ã©vÃ©nement (merge, push, release
etc.) va dÃ©clencher une requÃªte HTTP POST vers lâ€™URL que vous avez configurÃ©e.
Le reste de lâ€™exÃ©cution se fera sur le serveur oÃ¹ pointe lâ€™URL, libre Ã  vous
dâ€™Ã©crire le script que vous voulez pour effectuer les opÃ©rations que vous
souhaitez.</p>
<p>Il faut cependant Ãªtre conscient que la simplification a un coÃ»t, Ã  savoir que
mÃªme si une PR ou un commit venaient Ã  rendre inopÃ©rant votre projet lâ€™Ã©vÃ©nement
se lancerait quand mÃªme.</p>
<h2 id="la-mise-en-place"><a class="markdownIt-Anchor" href="#la-mise-en-place">#</a> La mise en place</h2>
<p>Seul le propriÃ©taire dâ€™un dÃ©pÃ´t dispose des droits nÃ©cessaires pour configurer
un webhook. Il suffit pour cela de se rendre dans <code>Settings</code> puis <code>Webhooks &amp; Services</code> :</p>
<p><img src="setting_webhook.jpg" alt="Settings Webhooks GitHub"></p>
<p>Un petit clic sur <code>Add webhook</code> et vous obtenez une interface encore une fois
trÃ¨s simple :</p>
<p><img src="configuration_webhook.jpg" alt="Configuration Webhooks GitHub"></p>
<p>Cette interface se compose de trois parties :</p>
<ol>
<li>lâ€™URL vers laquelle votre requÃªte sera lancÃ©e</li>
<li>une secret key pour sÃ©curiser votre requÃªte</li>
<li>lâ€™Ã©vÃ©nement qui va dÃ©clencher votre requÃªte</li>
</ol>
<p>La partie Ã©vÃ©nement est relativement complÃ¨te et lÃ  encore vous disposez de
trois possibilitÃ©s :</p>
<ol>
<li>se dÃ©clenche au push</li>
<li>se dÃ©clenche Ã  chaque Ã©vÃ©nement</li>
<li>Ã  vous de choisir les Ã©vÃ©nements (un ou plusieurs) qui vous conviennent</li>
</ol>
<p>Une fois le <em>Webhook</em> activÃ© un premier test ou plus exactement un <code>ping</code> va se
lancer. Il permettra de dÃ©tecter que votre serveur rÃ©pond bien Ã  la requÃªte :</p>
<p><img src="test_webhook.jpg" alt="Test Webhooks request GitHub"></p>
<p>La requÃªte envoyÃ©e est trÃ¨s basique et embarque un JSON sur les informations de
votre dÃ©pÃ´t (description, URL) et une liste des API mises Ã  disposition. Le
reste du travail doit se faire sur votre serveur par lâ€™intermÃ©diaire de votre
API/script, etc.</p>
<p>Voici un petit exemple utilisant <code>express</code> :</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">"express"</span>)
<span class="hljs-keyword">var</span> app = express()
<span class="hljs-keyword">var</span> bodyParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">"body-parser"</span>)
<span class="hljs-keyword">var</span> xhub = <span class="hljs-built_in">require</span>(<span class="hljs-string">"express-x-hub"</span>)

<span class="hljs-comment">//Const</span>
<span class="hljs-keyword">var</span> xhubSecret = <span class="hljs-string">"MySecretKey"</span>
<span class="hljs-keyword">var</span> port = <span class="hljs-string">"8085"</span>
<span class="hljs-keyword">var</span> host = <span class="hljs-string">"localhost"</span>

<span class="hljs-comment">//Secret key</span>
app.use(xhub({ algorithm: <span class="hljs-string">"sha1"</span>, secret: xhubSecret }))

<span class="hljs-comment">// Configure express json</span>
app.use(bodyParser.json())

<span class="hljs-comment">// Main : Start the express http server</span>
<span class="hljs-keyword">var</span> server = app.listen(port, host, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(
    <span class="hljs-string">"App listening at http://%s:%s"</span>,
    server.address().address,
    server.address().port
  )
})

<span class="hljs-comment">// Add default route</span>
app.post(<span class="hljs-string">"/webhook"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  <span class="hljs-keyword">if</span>(!req.isXHubValid()){
    res.status(<span class="hljs-number">400</span>).send(<span class="hljs-string">'Invalid X-Hub Request'</span>)
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Secret key is invalid"</span>)
    <span class="hljs-keyword">return</span>
  }

  <span class="hljs-keyword">var</span> command = req.headers[<span class="hljs-string">"x-github-event"</span>]

  <span class="hljs-keyword">switch</span>(command) {

    <span class="hljs-comment">//Event create (Branch, or tag created)</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">"create"</span>:
      res.send(<span class="hljs-string">"Event create trigger"</span>)
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Create event"</span>)
      <span class="hljs-keyword">break</span>

    <span class="hljs-comment">//Event release (Release published in a repository)</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">"release"</span>:
      res.send(<span class="hljs-string">"Event release trigger"</span>)
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Release Event"</span>)
      <span class="hljs-keyword">break</span>

    <span class="hljs-keyword">default</span>:
      res.status(<span class="hljs-number">400</span>).send(<span class="hljs-string">"Event not supported : "</span> + command)
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Event not supported : "</span> + req.headers[<span class="hljs-string">"X-Github-Event"</span>])
  }
})</code></pre>
<p>Pour vous donner une idÃ©e de ce que peut envoyer GitHub, voici deux gists :</p>
<ul>
<li><a href="header.txt">Headers</a></li>
<li><a href="payload.json">Payload</a></li>
</ul>
<h2 id="this-is-just-the-beginning"><a class="markdownIt-Anchor" href="#this-is-just-the-beginning">#</a> This is just the beginning</h2>
<p>Cette solution est un dÃ©but de piste pour le dÃ©ploiement continu, mais elle ne
doit pas se faire sans une solution de test que ce soit cotÃ© GitHub ou cotÃ©
serveur.</p>
<p>Si vous souhaitez plus dâ€™informations ou mÃªme pousser un peu plus la mise en
place des webhooks, GitHub a comme Ã  son habitude publiÃ© un
<a href="https://developer.github.com/webhooks/">guide</a> trÃ¨s bien dÃ©taillÃ© et complet.</p>
]]></description><link>http://putaindecode.io/fr/articles/github/webhooks/</link><guid isPermaLink="true">http://putaindecode.io/fr/articles/github/webhooks/</guid><pubDate>Tue, 09 Jun 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[Introduction to cssnext]]></title><description><![CDATA[<p>From <a href="http://cssnext.io/">the official website</a>:</p>
<blockquote>
<p><strong>cssnext</strong> is a CSS transpiler that allows you to use tomorrowâ€™s CSS syntax today. It transforms CSS specs that are not yet implemented in popular browsers into more compatible CSS.</p>
</blockquote>
<h2 id="what-does-it-mean"><a class="markdownIt-Anchor" href="#what-does-it-mean">#</a> What does it mean?</h2>
<p>Since CSS3, you may have heard that CSS is divided into several independent documents called â€œmodulesâ€. Those modules can have different levels of stability and <a href="http://www.w3.org/Style/CSS/current-work#legend">statuses</a>. It can take quite some time for the browsers to implement those modules and even more for the W3C to give them the ultimate status of <a href="http://www.w3.org/2005/10/Process-20051014/tr#RecsW3C">Recommandation</a>.</p>
<p>With <strong>cssnext</strong>, you can use the syntax of <a href="http://www.xanthir.com/b4Ko0">CSS Module Level 4</a> such as <em>custom properties</em> or <em>custom media queries</em>. <strong>cssnext</strong> will transform this new strange syntax into something that the browser can actually understand.</p>
<p>In short, it makes you <strong>taste the future</strong>.</p>
<p>I donâ€™t know about you but speaking as someone who loves to experiment with cutting-edge technologies, I think this is pretty cool!</p>
<p>You should take a look at the <a href="http://cssnext.io/features/">feature list</a>.</p>
<h3 id="what-about-my-current-css-preprocessor"><a class="markdownIt-Anchor" href="#what-about-my-current-css-preprocessor">#</a> What about my current CSS preprocessor?</h3>
<p>Forget about the dangers of mixins, @extend and infinite nesting; mostly caused by overzealous use and/or misuse of such tools, but still.</p>
<p>Guess what, you donâ€™t really need this.</p>
<p>You should give <strong>cssnext</strong> a shot and go back to Vanilla CSS. And with a nice and clean touch of <a href="https://github.com/sturobson/BEM-resources">BEM syntax</a>, you will <a href="http://philipwalton.com/articles/side-effects-in-css/">feel alive again</a>.</p>
<h2 id="examples"><a class="markdownIt-Anchor" href="#examples">#</a> Examples</h2>
<p>Letâ€™s take a look at the features that <strong>cssnext</strong> offers at the moment.</p>
<p>First of all, be sure to check out the <a href="http://cssnext.io/playground/">playground on the official website</a>.</p>
<h3 id="automatic-vendor-prefixes"><a class="markdownIt-Anchor" href="#automatic-vendor-prefixes">#</a> Automatic vendor prefixes</h3>
<pre><code class="language-css"><span class="hljs-class">.h1</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">transform</span>:<span class="hljs-value"> <span class="hljs-function">skewX</span>(<span class="hljs-number">25deg</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">transition</span>:<span class="hljs-value"> transform <span class="hljs-number">1s</span></span></span>;
}</span></code></pre>
<p>This will be transformed by <strong>cssnext</strong> via Autoprefixer in:</p>
<pre><code class="language-css"><span class="hljs-class">.h1</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">-webkit-transform</span>:<span class="hljs-value"> <span class="hljs-function">skewX</span>(<span class="hljs-number">25deg</span>)</span></span>;
      <span class="hljs-rule"><span class="hljs-attribute">-ms-transform</span>:<span class="hljs-value"> <span class="hljs-function">skewX</span>(<span class="hljs-number">25deg</span>)</span></span>;
          <span class="hljs-rule"><span class="hljs-attribute">transform</span>:<span class="hljs-value"> <span class="hljs-function">skewX</span>(<span class="hljs-number">25deg</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">-webkit-transition</span>:<span class="hljs-value"> -webkit-transform <span class="hljs-number">1s</span></span></span>;
          <span class="hljs-rule"><span class="hljs-attribute">transition</span>:<span class="hljs-value"> transform <span class="hljs-number">1s</span></span></span>;
}</span></code></pre>
<h3 id="custom-properties-var-limited-to-root"><a class="markdownIt-Anchor" href="#custom-properties-var-limited-to-root">#</a> Custom properties &amp; var() limited to <code>:root</code></h3>
<p>Also known as the much awaited <a href="http://www.w3.org/TR/css-variables/">CSS variables</a>.</p>
<pre><code class="language-css"><span class="hljs-pseudo">:root</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">--primary-Color</span>:<span class="hljs-value">                 <span class="hljs-hexcolor">#E86100</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">--secondary-Color</span>:<span class="hljs-value">               <span class="hljs-hexcolor">#2c3e50</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">--r-Grid-baseFontSize</span>:<span class="hljs-value">           <span class="hljs-number">1rem</span></span></span>;
}</span></code></pre>
<p>You can use them this way:</p>
<pre><code class="language-css"><span class="hljs-class">.h1</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">var</span>(--primary-Color)</span></span>;
}</span>
<span class="hljs-class">.h1</span><span class="hljs-pseudo">:hover</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">var</span>(--secondary-Color)</span></span>;
}</span>
<span class="hljs-tag">body</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-function">var</span>(--r-Grid-baseFontSize)</span></span>;
}</span></code></pre>
<h3 id="custom-media-queries"><a class="markdownIt-Anchor" href="#custom-media-queries">#</a> Custom Media Queries</h3>
<p>Simply-named and semantic aliases (<a href="http://dev.w3.org/csswg/mediaqueries/#custom-mq">check the specs</a>).</p>
<pre><code class="language-css"><span class="hljs-at_rule">@<span class="hljs-keyword">custom-media</span> --viewport-medium (width &lt;= <span class="hljs-number">40rem</span>)</span>;
<span class="hljs-at_rule">@<span class="hljs-keyword">custom-media</span> --viewport-large (max-width: <span class="hljs-number">50em</span>)</span>;</code></pre>
<p>Usage:</p>
<pre><code class="language-css"><span class="hljs-at_rule">@<span class="hljs-keyword">media</span> (--viewport-medium) </span>{
  <span class="hljs-tag">body</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-function">calc</span>(<span class="hljs-function">var</span>(--fontSize) * <span class="hljs-number">1.2</span>)</span></span>; }</span>
}
<span class="hljs-at_rule">@<span class="hljs-keyword">media</span> (--viewport-large) </span>{
  <span class="hljs-tag">body</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-function">calc</span>(<span class="hljs-function">var</span>(--fontSize) * <span class="hljs-number">1.4</span>)</span></span>; }</span>
}</code></pre>
<p>For example, letâ€™s take:</p>
<pre><code class="language-css"><span class="hljs-pseudo">:root</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">--fontSize</span>:<span class="hljs-value"> <span class="hljs-number">1.2rem</span></span></span>;
}</span></code></pre>
<p>The output will be:</p>
<pre><code class="language-css"><span class="hljs-at_rule">@<span class="hljs-keyword">media</span> (max-width: <span class="hljs-number">40rem</span>) </span>{
  <span class="hljs-tag">body</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">1.44rem</span></span></span>; }</span>
}
<span class="hljs-at_rule">@<span class="hljs-keyword">media</span> (max-width: <span class="hljs-number">50em</span>) </span>{
  <span class="hljs-tag">body</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">1.68rem</span></span></span>; }</span>
}</code></pre>
<h3 id="custom-selectors"><a class="markdownIt-Anchor" href="#custom-selectors">#</a> Custom selectors</h3>
<p>Take a look at the <a href="http://dev.w3.org/csswg/css-extensions/#custom-selectors">specs</a> first.
Letâ€™s say we want to apply some styles to all headings.</p>
<pre><code class="language-css"><span class="hljs-at_rule">@<span class="hljs-keyword">custom-selector</span> :--heading h1, h2, h3, h4, h5, h6</span>;

<span class="hljs-pseudo">:--heading</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">margin-top</span>:<span class="hljs-value"> <span class="hljs-number">0</span></span></span>;
}</span></code></pre>
<p>This will output the following:</p>
<pre><code class="language-css">h1,
h2,
h3,
h4,
h5,
h6 { margin-top; 0; }</code></pre>
<h3 id="color"><a class="markdownIt-Anchor" href="#color">#</a> <code>color()</code></h3>
<p>A simple <a href="http://dev.w3.org/csswg/css-color/#modifying-colors">color function</a> to apply <em>color adjusters</em> (hue, lightness, tint, and so on) to a base color.</p>
<p>Examples:</p>
<pre><code class="language-css"><span class="hljs-class">.class</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span> <span class="hljs-function">red</span>(+<span class="hljs-number">30</span>) <span class="hljs-function">green</span>(-<span class="hljs-number">50</span>) <span class="hljs-function">blue</span>(<span class="hljs-number">6%</span>) <span class="hljs-function">alpha</span>(.<span class="hljs-number">65</span>))</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-top-color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span> <span class="hljs-function">saturation</span>(-<span class="hljs-number">8%</span>) <span class="hljs-function">whiteness</span>(+<span class="hljs-number">50%</span>))</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-right-color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span> <span class="hljs-function">lightness</span>(<span class="hljs-number">5%</span>) <span class="hljs-function">blackness</span>(-<span class="hljs-number">25%</span>))</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-bottom-color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span> <span class="hljs-function">tint</span>(<span class="hljs-number">80%</span>))</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-left-color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span> <span class="hljs-function">shade</span>(<span class="hljs-number">75%</span>))</span></span>;
}</span></code></pre>
<p>The code above will be transformed intoâ€¦</p>
<pre><code class="language-css"><span class="hljs-class">.class</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">43</span>, <span class="hljs-number">136</span>, <span class="hljs-number">230</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">73</span>, <span class="hljs-number">86</span>, <span class="hljs-number">15</span>, <span class="hljs-number">0.65</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-top-color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">181</span>, <span class="hljs-number">201</span>, <span class="hljs-number">222</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-right-color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">3</span>, <span class="hljs-number">45</span>, <span class="hljs-number">87</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-bottom-color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">213</span>, <span class="hljs-number">231</span>, <span class="hljs-number">250</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-left-color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">11</span>, <span class="hljs-number">34</span>, <span class="hljs-number">58</span>)</span></span>;
}</span></code></pre>
<p><strong>cssnext</strong> also offers the following color-related features.</p>
<h4 id="hwb"><a class="markdownIt-Anchor" href="#hwb">#</a> hwb()</h4>
<p>From the <a href="http://dev.w3.org/csswg/css-color/#the-hwb-notation">specifications</a>, HWB (Hue-Whiteness-Blackness) is similar to HSL but easier for humans to work with.</p>
<pre><code class="language-css"><span class="hljs-class">.title</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">hwb</span>(<span class="hljs-number">125</span>, <span class="hljs-number">32%</span>, <span class="hljs-number">47%</span>)</span></span>;
}</span></code></pre>
<p>Output:</p>
<pre><code class="language-css"><span class="hljs-class">.title</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">33</span>, <span class="hljs-number">135</span>, <span class="hljs-number">42</span>)</span></span>;
}</span></code></pre>
<h4 id="gray"><a class="markdownIt-Anchor" href="#gray">#</a> gray()</h4>
<p>Grays are <a href="http://dev.w3.org/csswg/css-color/#grays">so cool</a> they have a function of their own.</p>
<pre><code class="language-css"><span class="hljs-class">.section</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-function">gray</span>(<span class="hljs-number">120</span>, <span class="hljs-number">50%</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-color</span>:<span class="hljs-value"> <span class="hljs-function">gray</span>(<span class="hljs-number">17%</span>, <span class="hljs-number">25%</span>)</span></span>;
}</span></code></pre>
<p>This will output:</p>
<pre><code class="language-css"><span class="hljs-class">.section</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">120</span>, <span class="hljs-number">120</span>, <span class="hljs-number">120</span>, <span class="hljs-number">0.5</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">43</span>, <span class="hljs-number">43</span>, <span class="hljs-number">43</span>, <span class="hljs-number">0.25</span>)</span></span>;
}</span></code></pre>
<h4 id="rrggbbaa"><a class="markdownIt-Anchor" href="#rrggbbaa">#</a> #rrggbbaa</h4>
<p><strong>cssnext</strong> transforms the <a href="http://dev.w3.org/csswg/css-color/#hex-notation">hexadecimal notations</a> #RRGGBBAA and #RGBA into rgba().</p>
<pre><code class="language-css"><span class="hljs-tag">body</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-hexcolor">#5c69</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-hexcolor">#C73D5C59</span></span></span>;
}</span></code></pre>
<p>Output:</p>
<pre><code class="language-css"><span class="hljs-tag">body</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">85</span>, <span class="hljs-number">204</span>, <span class="hljs-number">102</span>, <span class="hljs-number">0.6</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">199</span>, <span class="hljs-number">61</span>, <span class="hljs-number">92</span>, <span class="hljs-number">0.34902</span>)</span></span>;
}</span></code></pre>
<h4 id="rebeccapurple"><a class="markdownIt-Anchor" href="#rebeccapurple">#</a> rebeccapurple</h4>
<p>Simply transforms the color <a href="https://github.com/postcss/postcss-color-rebeccapurple#why-this-plugin-"><code>rebeccapurple</code></a> into <code>rgb(102, 51, 153)</code>.</p>
<h3 id="filter-properties"><a class="markdownIt-Anchor" href="#filter-properties">#</a> filter properties</h3>
<p>A whole <em>new</em> world of <a href="http://www.w3.org/TR/filter-effects/">image modifications</a>!</p>
<pre><code class="language-css"><span class="hljs-class">.awesome-Image</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">filter</span>:<span class="hljs-value"> <span class="hljs-function">sepia</span>(.<span class="hljs-number">7</span>) <span class="hljs-function">hue-rotate</span>(<span class="hljs-number">23deg</span>)</span></span>;
}</span>

<span class="hljs-class">.awesome-Picture</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">filter</span>:<span class="hljs-value"> <span class="hljs-function">blur</span>(<span class="hljs-number">8px</span>)</span></span>;
}</span></code></pre>
<p>Will be transformed into:</p>
<pre><code class="language-css"><span class="hljs-class">.awesome-Image</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">filter</span>:<span class="hljs-value"> <span class="hljs-function">url</span>(<span class="hljs-string">'data:image/svg+xml;charset=utf-8,&lt;svg xmlns="http://www.w3.org/2000/svg"&gt;&lt;filter id="filter"&gt;&lt;feColorMatrix type="matrix" color-interpolation-filters="sRGB" values="0.5751000000000001 0.5383 0.1323 0 0 0.24429999999999996 0.7802000000000001 0.11760000000000001 0 0 0.1904 0.3738 0.39170000000000005 0 0 0 0 0 1 0" /&gt;&lt;feColorMatrix type="hueRotate" color-interpolation-filters="sRGB" values="23" /&gt;&lt;/filter&gt;&lt;/svg&gt;#filter'</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">-webkit-filter</span>:<span class="hljs-value"> <span class="hljs-function">sepia</span>(.<span class="hljs-number">7</span>) <span class="hljs-function">hue-rotate</span>(<span class="hljs-number">23deg</span>)</span></span>;
          <span class="hljs-rule"><span class="hljs-attribute">filter</span>:<span class="hljs-value"> <span class="hljs-function">sepia</span>(.<span class="hljs-number">7</span>) <span class="hljs-function">hue-rotate</span>(<span class="hljs-number">23deg</span>)</span></span>;
}</span>

<span class="hljs-class">.awesome-Picture</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">filter</span>:<span class="hljs-value"> <span class="hljs-function">url</span>(<span class="hljs-string">'data:image/svg+xml;charset=utf-8,&lt;svg xmlns="http://www.w3.org/2000/svg"&gt;&lt;filter id="filter"&gt;&lt;feGaussianBlur stdDeviation="8" /&gt;&lt;/filter&gt;&lt;/svg&gt;#filter'</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">-webkit-filter</span>:<span class="hljs-value"> <span class="hljs-function">blur</span>(<span class="hljs-number">8px</span>)</span></span>;
          <span class="hljs-rule"><span class="hljs-attribute">filter</span>:<span class="hljs-value"> <span class="hljs-function">blur</span>(<span class="hljs-number">8px</span>)</span></span>;
}</span></code></pre>
<h3 id="rem-units"><a class="markdownIt-Anchor" href="#rem-units">#</a> rem units</h3>
<p>Nothing extraordinary here, it generates <strong>pixel fallback for rem units</strong>.
Oh, come on! Do we really need an example for this one? Alright, here you go!</p>
<pre><code class="language-css"><span class="hljs-class">.section-Highlight</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">2.5rem</span></span></span>;
}</span></code></pre>
<p>Output:</p>
<pre><code class="language-css"><span class="hljs-class">.section-Highlight</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">40px</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">2.5rem</span></span></span>;
}</span></code></pre>
<h2 id="bonus-features"><a class="markdownIt-Anchor" href="#bonus-features">#</a> Bonus features</h2>
<p>The two following features are not really related to CSS specifications. However, they are definitely worth mentioning in this introduction.</p>
<h3 id="import"><a class="markdownIt-Anchor" href="#import">#</a> <code>import</code></h3>
<p>What if you could import inline local files and modules (<code>node_modules</code> or <code>web_modules</code>) to output a bundled CSS file? Yes, <a href="https://github.com/sass/sass/issues/193">Iâ€™m looking at you Sass users</a>, ahem. Well, with <strong>cssnext</strong>, you can.</p>
<h3 id="compress"><a class="markdownIt-Anchor" href="#compress">#</a> <code>compress</code></h3>
<p>As you may have guessed, this is just an option to compress <em>or not</em> your output file. By the way, this option uses <a href="https://github.com/ben-eb/cssnano">cssnano</a>.</p>
<h3 id="usage"><a class="markdownIt-Anchor" href="#usage">#</a> Usage</h3>
<p>Below is a basic example of these two features. I used <a href="https://github.com/cssnext/gulp-cssnext">gulp-cssnext</a>, one of the <a href="http://cssnext.io/setup/">many plugins</a> to help you start with <strong>cssnext</strong>.</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> gulp = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp'</span>),
    cssnext = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-cssnext"</span>);

gulp.task(<span class="hljs-string">'styles'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  gulp.src(<span class="hljs-string">"css/index.css"</span>)
  .pipe(cssnext({
    compress: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// default is false</span>
  }))
  .pipe(gulp.dest(<span class="hljs-string">"./dist/"</span>))
});</code></pre>
<p>Then, in my <code>index.css</code> file, I will have:</p>
<pre><code class="language-css"><span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"normalize.css"</span></span>; <span class="hljs-comment">/* == @import "./node_modules/normalize.css/index.css"; */</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"cssrecipes-defaults"</span></span>; <span class="hljs-comment">/* == @import "./node_modules/cssrecipes-defaults/index.css"; */</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"project-modules/partner"</span></span>; <span class="hljs-comment">/* relative to css/ */</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"typo"</span></span>; <span class="hljs-comment">/* same level as my main index.css located in css/ */</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"highlight"</span> (min-width: <span class="hljs-number">25em</span>)</span>;</code></pre>
<p>And the final output will be:</p>
<pre><code class="language-css"><span class="hljs-comment">/* content of ./node_modules/normalize.css/index.css */</span>
<span class="hljs-comment">/* content of ./node_modules/cssrecipes-defaults/index.css */</span>
<span class="hljs-comment">/* content of project-modules/partner.css */</span>
<span class="hljs-comment">/* content of typo.css */</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">media</span> (min-width: <span class="hljs-number">25em</span>) </span>{
  <span class="hljs-comment">/* content of highlight.css */</span>
}</code></pre>
<p>I know the feeling. Now youâ€™re in love too. :)</p>
<p>Well, just to wrap it up here, letâ€™s say that the main purpose of <strong>cssnext</strong> is to build things according to the W3C specifications keeping in mind that, theoretically, it can be removed later on (when not needed anymore).</p>
<p>Meanwhile, there is still work to do: here you can find a <a href="https://github.com/cssnext/cssnext/issues?q=is%3Aopen+is%3Aissue+label%3Afeature+label%3Aready">list of features that are waiting to be implemented</a>.</p>
<p>Now itâ€™s your time to play. Be sure to check the <a href="https://github.com/cssnext/cssnext">GitHub repository</a>, follow <a href="https://twitter.com/cssnext">@cssnext</a> on Twitter to get the latest news and join the <a href="https://gitter.im/cssnext/cssnext">cssnext room on Gitter</a> if you have any questions.</p>
<ul>
<li><a href="http://cssnext.io/">Official website</a></li>
</ul>
]]></description><link>http://putaindecode.io/en/articles/css/preprocessors/cssnext/</link><guid isPermaLink="true">http://putaindecode.io/en/articles/css/preprocessors/cssnext/</guid><pubDate>Tue, 02 Jun 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[IntroducciÃ³n a cssnext]]></title><description><![CDATA[<p>SegÃºn la <a href="http://cssnext.io/">pÃ¡gina oficial</a>:</p>
<blockquote>
<p><strong>cssnext</strong> es un <em>transpiler</em> que permite utilizar desde hoy la sintaxis CSS del maÃ±ana y transformar las especificaciones CSS que aÃºn no estÃ¡n implementadas en los navegadores mÃ¡s populares en CSS compatible.</p>
</blockquote>
<h2 id="qu-significa-esto-exactamente"><a class="markdownIt-Anchor" href="#qu-significa-esto-exactamente">#</a> Â¿QuÃ© significa esto exactamente?</h2>
<p>Desde que apareciÃ³ CSS3, quizÃ¡s hayas escuchado que el CSS se divide en varios documentos independientes llamados â€œmÃ³dulosâ€. Estos mÃ³dulos pueden tener diferentes niveles de estabilidad y <a href="http://www.w3.org/Style/CSS/current-work#legend">estados</a>. A los navegadores les puede requirir bastante tiempo poner en prÃ¡ctica dichos mÃ³dulos y aÃºn mÃ¡s al W3C atribuirles el estado final de <a href="http://www.w3.org/2005/10/Process-20051014/tr#RecsW3C">RecomendaciÃ³n</a>.</p>
<p>Con <strong>cssnext</strong> se puede usar la sintaxis de los <a href="http://www.xanthir.com/b4Ko0">mÃ³dulos CSS Nivel 4</a>, tales como <em>propiedades personalizadas (custom properties)</em> o <em>media queries personalizados</em>. <strong>cssnext</strong> va a transformar esta nueva y curiosa sintaxis en algo que el navegador serÃ¡ capaz de entender.</p>
<p>En resumen, se <strong>adelanta al futuro</strong>.</p>
<p>No sÃ© vosotros, pero yo me considero alguien a quien le gusta experimentar con las Ãºltimas technologÃ­as y me parece que Â¡esto mola bastante!</p>
<p>No dejÃ©is de echar un vistazo a la <a href="http://cssnext.io/features/">lista de funciones</a>.</p>
<h3 id="y-qu-pasa-con-el-preprocesador-css-que-estoy-utilizando-ahora"><a class="markdownIt-Anchor" href="#y-qu-pasa-con-el-preprocesador-css-que-estoy-utilizando-ahora">#</a> Â¿Y quÃ© pasa con el preprocesador CSS que estoy utilizando ahora?</h3>
<p>No os preocupÃ©is mÃ¡s por los peligros de los mixins, @extend y el <em>nesting</em> infinito, en gran parte causados por el uso indebido e innecesario de estas herramientas.</p>
<p>Â¿Adivinad quÃ©? No necesitÃ¡is nada de esto.</p>
<p>DeberiÃ¡is probar <strong>cssnext</strong> y volver al Vanilla CSS de toda la vida. AdemÃ¡s, con una buena pizca de <a href="https://github.com/sturobson/BEM-resources">metodologÃ­a BEM</a>, os sentirÃ©is <a href="http://philipwalton.com/articles/side-effects-in-css/">vivos otra vez</a>.</p>
<h2 id="ejemplos"><a class="markdownIt-Anchor" href="#ejemplos">#</a> Ejemplos</h2>
<p>Echemos un vistazo a las funciones que <strong>cssnext</strong> nos ofrece por el momento.</p>
<p>Ante todo, es conveniente consultar el <a href="http://cssnext.io/playground/">playground en la pÃ¡gina oficial</a>.</p>
<h3 id="prefijos-de-navegadores-vendor-prefixes-autom-ticos"><a class="markdownIt-Anchor" href="#prefijos-de-navegadores-vendor-prefixes-autom-ticos">#</a> Prefijos de navegadores (vendor prefixes) automÃ¡ticos</h3>
<pre><code class="language-css"><span class="hljs-class">.h1</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">transform</span>:<span class="hljs-value"> <span class="hljs-function">skewX</span>(<span class="hljs-number">25deg</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">transition</span>:<span class="hljs-value"> transform <span class="hljs-number">1s</span></span></span>;
}</span></code></pre>
<p>Esto serÃ¡ transformado por <strong>cssnext</strong> gracias a Autoprefixer en:</p>
<pre><code class="language-css"><span class="hljs-class">.h1</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">-webkit-transform</span>:<span class="hljs-value"> <span class="hljs-function">skewX</span>(<span class="hljs-number">25deg</span>)</span></span>;
      <span class="hljs-rule"><span class="hljs-attribute">-ms-transform</span>:<span class="hljs-value"> <span class="hljs-function">skewX</span>(<span class="hljs-number">25deg</span>)</span></span>;
          <span class="hljs-rule"><span class="hljs-attribute">transform</span>:<span class="hljs-value"> <span class="hljs-function">skewX</span>(<span class="hljs-number">25deg</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">-webkit-transition</span>:<span class="hljs-value"> -webkit-transform <span class="hljs-number">1s</span></span></span>;
          <span class="hljs-rule"><span class="hljs-attribute">transition</span>:<span class="hljs-value"> transform <span class="hljs-number">1s</span></span></span>;
}</span></code></pre>
<h3 id="propiedades-personalizadas-y-var-limitadas-a-root"><a class="markdownIt-Anchor" href="#propiedades-personalizadas-y-var-limitadas-a-root">#</a> Propiedades personalizadas y var() limitadas a <code>:root</code></h3>
<p>TambiÃ©n conocidas como las tan esperadas <a href="http://www.w3.org/TR/css-variables/">variables CSS</a>.</p>
<pre><code class="language-css"><span class="hljs-pseudo">:root</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">--primary-Color</span>:<span class="hljs-value">                 <span class="hljs-hexcolor">#E86100</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">--secondary-Color</span>:<span class="hljs-value">               <span class="hljs-hexcolor">#2c3e50</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">--r-Grid-baseFontSize</span>:<span class="hljs-value">           <span class="hljs-number">1rem</span></span></span>;
}</span></code></pre>
<p>PodÃ©is usarlas de esta manera:</p>
<pre><code class="language-css"><span class="hljs-class">.h1</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">var</span>(--primary-Color)</span></span>;
}</span>
<span class="hljs-class">.h1</span><span class="hljs-pseudo">:hover</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">var</span>(--secondary-Color)</span></span>;
}</span>
<span class="hljs-tag">body</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-function">var</span>(--r-Grid-baseFontSize)</span></span>;
}</span></code></pre>
<h3 id="media-queries-personalizadas"><a class="markdownIt-Anchor" href="#media-queries-personalizadas">#</a> Media Queries personalizadas</h3>
<p>Para crear alias semÃ¡nticos, claros y sencillos (<a href="http://dev.w3.org/csswg/mediaqueries/#custom-mq">aquÃ­ tenÃ©is la documentaciÃ³n</a>).</p>
<pre><code class="language-css"><span class="hljs-at_rule">@<span class="hljs-keyword">custom-media</span> --viewport-medium (width &lt;= <span class="hljs-number">40rem</span>)</span>;
<span class="hljs-at_rule">@<span class="hljs-keyword">custom-media</span> --viewport-large (max-width: <span class="hljs-number">50em</span>)</span>;</code></pre>
<p>Uso:</p>
<pre><code class="language-css"><span class="hljs-at_rule">@<span class="hljs-keyword">media</span> (--viewport-medium) </span>{
  <span class="hljs-tag">body</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-function">calc</span>(<span class="hljs-function">var</span>(--fontSize) * <span class="hljs-number">1.2</span>)</span></span>; }</span>
}
<span class="hljs-at_rule">@<span class="hljs-keyword">media</span> (--viewport-large) </span>{
  <span class="hljs-tag">body</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-function">calc</span>(<span class="hljs-function">var</span>(--fontSize) * <span class="hljs-number">1.4</span>)</span></span>; }</span>
}</code></pre>
<p>Por ejemplo, digamos que:</p>
<pre><code class="language-css"><span class="hljs-pseudo">:root</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">--fontSize</span>:<span class="hljs-value"> <span class="hljs-number">1.2rem</span></span></span>;
}</span></code></pre>
<p>El cÃ³digo generado sera el siguiente:</p>
<pre><code class="language-css"><span class="hljs-at_rule">@<span class="hljs-keyword">media</span> (max-width: <span class="hljs-number">40rem</span>) </span>{
  <span class="hljs-tag">body</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">1.44rem</span></span></span>; }</span>
}
<span class="hljs-at_rule">@<span class="hljs-keyword">media</span> (max-width: <span class="hljs-number">50em</span>) </span>{
  <span class="hljs-tag">body</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">1.68rem</span></span></span>; }</span>
}</code></pre>
<h3 id="selectores-personalizados"><a class="markdownIt-Anchor" href="#selectores-personalizados">#</a> Selectores personalizados</h3>
<p>Primero, podÃ©is echar un ojo a las <a href="http://dev.w3.org/csswg/css-extensions/#custom-selectors">especificaciones</a>.
Pongamos que queremos aplicar estilos a todos los tÃ­tulos:</p>
<pre><code class="language-css"><span class="hljs-at_rule">@<span class="hljs-keyword">custom-selector</span> :--heading h1, h2, h3, h4, h5, h6</span>;

<span class="hljs-pseudo">:--heading</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">margin-top</span>:<span class="hljs-value"> <span class="hljs-number">0</span></span></span>;
}</span></code></pre>
<p>Esto va a generar el cÃ³digo siguiente:</p>
<pre><code class="language-css">h1,
h2,
h3,
h4,
h5,
h6 { margin-top; 0; }</code></pre>
<h3 id="color"><a class="markdownIt-Anchor" href="#color">#</a> <code>color()</code></h3>
<p>Una sencilla <a href="http://dev.w3.org/csswg/css-color/#modifying-colors">funciÃ³n color</a> para aplicar unos <em>ajustes de color</em> (tono, luminosidad, saturaciÃ³n, entre otros) a un color base.</p>
<p>Ejemplos:</p>
<pre><code class="language-css"><span class="hljs-class">.class</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span> <span class="hljs-function">red</span>(+<span class="hljs-number">30</span>) <span class="hljs-function">green</span>(-<span class="hljs-number">50</span>) <span class="hljs-function">blue</span>(<span class="hljs-number">6%</span>) <span class="hljs-function">alpha</span>(.<span class="hljs-number">65</span>))</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-top-color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span> <span class="hljs-function">saturation</span>(-<span class="hljs-number">8%</span>) <span class="hljs-function">whiteness</span>(+<span class="hljs-number">50%</span>))</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-right-color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span> <span class="hljs-function">lightness</span>(<span class="hljs-number">5%</span>) <span class="hljs-function">blackness</span>(-<span class="hljs-number">25%</span>))</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-bottom-color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span> <span class="hljs-function">tint</span>(<span class="hljs-number">80%</span>))</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-left-color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span> <span class="hljs-function">shade</span>(<span class="hljs-number">75%</span>))</span></span>;
}</span></code></pre>
<p>Este cÃ³digo de arriba serÃ¡ transformado en:</p>
<pre><code class="language-css"><span class="hljs-class">.class</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">43</span>, <span class="hljs-number">136</span>, <span class="hljs-number">230</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">73</span>, <span class="hljs-number">86</span>, <span class="hljs-number">15</span>, <span class="hljs-number">0.65</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-top-color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">181</span>, <span class="hljs-number">201</span>, <span class="hljs-number">222</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-right-color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">3</span>, <span class="hljs-number">45</span>, <span class="hljs-number">87</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-bottom-color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">213</span>, <span class="hljs-number">231</span>, <span class="hljs-number">250</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-left-color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">11</span>, <span class="hljs-number">34</span>, <span class="hljs-number">58</span>)</span></span>;
}</span></code></pre>
<p><strong>cssnext</strong> tambiÃ©n ofrece las siguientes funciones relacionadas con los colores:</p>
<h4 id="hwb"><a class="markdownIt-Anchor" href="#hwb">#</a> hwb()</h4>
<p>SegÃºn las <a href="http://dev.w3.org/csswg/css-color/#the-hwb-notation">especificaciones</a>, HWB (Tono-Blancura-Negrura - <em>Hue-Whiteness-Blackness</em>) es similar a HSL, pero resulta mÃ¡s fÃ¡cil de uso para los humanos.</p>
<pre><code class="language-css"><span class="hljs-class">.title</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">hwb</span>(<span class="hljs-number">125</span>, <span class="hljs-number">32%</span>, <span class="hljs-number">47%</span>)</span></span>;
}</span></code></pre>
<p>Resultado:</p>
<pre><code class="language-css"><span class="hljs-class">.title</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">33</span>, <span class="hljs-number">135</span>, <span class="hljs-number">42</span>)</span></span>;
}</span></code></pre>
<h4 id="gray"><a class="markdownIt-Anchor" href="#gray">#</a> gray()</h4>
<p>Los grises son tan <a href="http://dev.w3.org/csswg/css-color/#grays">guays</a> que tienen incluso una funciÃ³n dedicada.</p>
<pre><code class="language-css"><span class="hljs-class">.section</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-function">gray</span>(<span class="hljs-number">120</span>, <span class="hljs-number">50%</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-color</span>:<span class="hljs-value"> <span class="hljs-function">gray</span>(<span class="hljs-number">17%</span>, <span class="hljs-number">25%</span>)</span></span>;
}</span></code></pre>
<p>Esto darÃ¡ como resultado:</p>
<pre><code class="language-css"><span class="hljs-class">.section</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">120</span>, <span class="hljs-number">120</span>, <span class="hljs-number">120</span>, <span class="hljs-number">0.5</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">43</span>, <span class="hljs-number">43</span>, <span class="hljs-number">43</span>, <span class="hljs-number">0.25</span>)</span></span>;
}</span></code></pre>
<h4 id="rrggbbaa"><a class="markdownIt-Anchor" href="#rrggbbaa">#</a> #rrggbbaa</h4>
<p><strong>cssnext</strong> transforma la <a href="http://dev.w3.org/csswg/css-color/#hex-notation">notaciÃ³n hexadecimal</a> #RRGGBBAA y #RGBA en rgba().</p>
<pre><code class="language-css"><span class="hljs-tag">body</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-hexcolor">#5c69</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-hexcolor">#C73D5C59</span></span></span>;
}</span></code></pre>
<p>Resultado:</p>
<pre><code class="language-css"><span class="hljs-tag">body</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">85</span>, <span class="hljs-number">204</span>, <span class="hljs-number">102</span>, <span class="hljs-number">0.6</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">199</span>, <span class="hljs-number">61</span>, <span class="hljs-number">92</span>, <span class="hljs-number">0.34902</span>)</span></span>;
}</span></code></pre>
<h4 id="rebeccapurple"><a class="markdownIt-Anchor" href="#rebeccapurple">#</a> rebeccapurple</h4>
<p>Transforma el color <a href="https://github.com/postcss/postcss-color-rebeccapurple#why-this-plugin-"><code>rebeccapurple</code></a> en <code>rgb(102, 51, 153)</code>.</p>
<h3 id="propiedades-de-filtros"><a class="markdownIt-Anchor" href="#propiedades-de-filtros">#</a> Propiedades de filtros</h3>
<p>Â¡Un <em>nuevo</em> mundo de <a href="http://www.w3.org/TR/filter-effects/">modificaciones de imÃ¡genes</a> se abre ante vosotros!</p>
<pre><code class="language-css"><span class="hljs-class">.awesome-Image</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">filter</span>:<span class="hljs-value"> <span class="hljs-function">sepia</span>(.<span class="hljs-number">7</span>) <span class="hljs-function">hue-rotate</span>(<span class="hljs-number">23deg</span>)</span></span>;
}</span>

<span class="hljs-class">.awesome-Picture</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">filter</span>:<span class="hljs-value"> <span class="hljs-function">blur</span>(<span class="hljs-number">8px</span>)</span></span>;
}</span></code></pre>
<p>Lo anterior serÃ¡ transformado en:</p>
<pre><code class="language-css"><span class="hljs-class">.awesome-Image</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">filter</span>:<span class="hljs-value"> <span class="hljs-function">url</span>(<span class="hljs-string">'data:image/svg+xml;charset=utf-8,&lt;svg xmlns="http://www.w3.org/2000/svg"&gt;&lt;filter id="filter"&gt;&lt;feColorMatrix type="matrix" color-interpolation-filters="sRGB" values="0.5751000000000001 0.5383 0.1323 0 0 0.24429999999999996 0.7802000000000001 0.11760000000000001 0 0 0.1904 0.3738 0.39170000000000005 0 0 0 0 0 1 0" /&gt;&lt;feColorMatrix type="hueRotate" color-interpolation-filters="sRGB" values="23" /&gt;&lt;/filter&gt;&lt;/svg&gt;#filter'</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">-webkit-filter</span>:<span class="hljs-value"> <span class="hljs-function">sepia</span>(.<span class="hljs-number">7</span>) <span class="hljs-function">hue-rotate</span>(<span class="hljs-number">23deg</span>)</span></span>;
          <span class="hljs-rule"><span class="hljs-attribute">filter</span>:<span class="hljs-value"> <span class="hljs-function">sepia</span>(.<span class="hljs-number">7</span>) <span class="hljs-function">hue-rotate</span>(<span class="hljs-number">23deg</span>)</span></span>;
}</span>

<span class="hljs-class">.awesome-Picture</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">filter</span>:<span class="hljs-value"> <span class="hljs-function">url</span>(<span class="hljs-string">'data:image/svg+xml;charset=utf-8,&lt;svg xmlns="http://www.w3.org/2000/svg"&gt;&lt;filter id="filter"&gt;&lt;feGaussianBlur stdDeviation="8" /&gt;&lt;/filter&gt;&lt;/svg&gt;#filter'</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">-webkit-filter</span>:<span class="hljs-value"> <span class="hljs-function">blur</span>(<span class="hljs-number">8px</span>)</span></span>;
          <span class="hljs-rule"><span class="hljs-attribute">filter</span>:<span class="hljs-value"> <span class="hljs-function">blur</span>(<span class="hljs-number">8px</span>)</span></span>;
}</span></code></pre>
<h3 id="unidades-rem"><a class="markdownIt-Anchor" href="#unidades-rem">#</a> Unidades rem</h3>
<p>Nada extraordinario aquÃ­, se genera un <strong><em>fallback</em> en pÃ­xeles para las unidades en rem</strong>.
Oh, Â¡por favor! Â¿De verdad necesitÃ¡is un ejemplo para esto? Venga, aquÃ­ tenÃ©is.</p>
<pre><code class="language-css"><span class="hljs-class">.section-Highlight</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">2.5rem</span></span></span>;
}</span></code></pre>
<p>Resultado:</p>
<pre><code class="language-css"><span class="hljs-class">.section-Highlight</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">40px</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">2.5rem</span></span></span>;
}</span></code></pre>
<h2 id="funciones-adicionales"><a class="markdownIt-Anchor" href="#funciones-adicionales">#</a> Funciones adicionales</h2>
<p>Las dos siguientes funciones no tienen mucho que ver con las especificaciones CSS. Sin embargo, merecen ser mencionadas en esta introducciÃ³n.</p>
<h3 id="import"><a class="markdownIt-Anchor" href="#import">#</a> <code>import</code></h3>
<p>Â¿Y si pudiÃ©rais importar archivos locales y mÃ³dulos (<code>node_modules</code> o <code>web_modules</code>) para generar un solo y Ãºnico archivo CSS que los contendrÃ­a todos? SÃ­, <a href="https://github.com/sass/sass/issues/193">es a vosotros a quiÃ©n estoy mirando, utilizadores de Sass</a>, ejem. Bueno pues, con <strong>cssnext</strong> es possible.</p>
<h3 id="compress"><a class="markdownIt-Anchor" href="#compress">#</a> <code>compress</code></h3>
<p>Como ya habrÃ©is adivinado, se trata solo una opciÃ³n para comprimir <em>o no</em> vuestro archivo de salida. Y esto es gracias a <a href="https://github.com/ben-eb/cssnano">cssnano</a>.</p>
<h3 id="uso"><a class="markdownIt-Anchor" href="#uso">#</a> Uso</h3>
<p>Debajo os dejo un ejemplo bÃ¡sico de estas dos funciones. He usado <a href="https://github.com/cssnext/gulp-cssnext">gulp-cssnext</a>, uno de los <a href="http://cssnext.io/setup/">numerosos plugins</a> que os puede ayudar a empezar con <strong>cssnext</strong>.</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> gulp = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp'</span>),
    cssnext = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-cssnext"</span>);

gulp.task(<span class="hljs-string">'styles'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  gulp.src(<span class="hljs-string">"css/index.css"</span>)
  .pipe(cssnext({
    compress: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// false por defecto</span>
  }))
  .pipe(gulp.dest(<span class="hljs-string">"./dist/"</span>))
});</code></pre>
<p>DespuÃ©s, en mi archivo <code>index.css</code>, obtendrÃ­a lo siguiente:</p>
<pre><code class="language-css"><span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"normalize.css"</span></span>; <span class="hljs-comment">/* == @import "./node_modules/normalize.css/index.css"; */</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"cssrecipes-defaults"</span></span>; <span class="hljs-comment">/* == @import "./node_modules/cssrecipes-defaults/index.css"; */</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"project-modules/partner"</span></span>; <span class="hljs-comment">/* relativo a css/ */</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"typo"</span></span>; <span class="hljs-comment">/* mismo nivel que mi index.css principal, situado en css/ */</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"highlight"</span> (min-width: <span class="hljs-number">25em</span>)</span>;</code></pre>
<p>Y el resultado final es:</p>
<pre><code class="language-css"><span class="hljs-comment">/* contenido de ./node_modules/normalize.css/index.css */</span>
<span class="hljs-comment">/* contenido de ./node_modules/cssrecipes-defaults/index.css */</span>
<span class="hljs-comment">/* contenido de project-modules/partner.css */</span>
<span class="hljs-comment">/* contenido de typo.css */</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">media</span> (min-width: <span class="hljs-number">25em</span>) </span>{
  <span class="hljs-comment">/* contenido de highlight.css */</span>
}</code></pre>
<p>Conozco esa sensaciÃ³n. Vosotros tambiÃ©n os habÃ©is enamorado. :)</p>
<p>Bueno, para concluir, digamos que el propÃ³sito principal de <strong>cssnext</strong> es el de poder codificar segÃºn las especificaciones del W3C, siempre teniendo en cuenta que, teÃ³ricamente, serÃ¡ posible quitarlo (cuando ya no sea necesario).</p>
<p>Mientras tanto, sigue habiendo mucho trabajo. AquÃ­ os dejo una <a href="https://github.com/cssnext/cssnext/issues?q=is%3Aopen+is%3Aissue+label%3Afeature+label%3Aready">lista de futuras funciones</a>.</p>
<p>Ahora os toca jugar a vosotros. No os olvidÃ¡is de pasaros por el <a href="https://github.com/cssnext/cssnext">repository GitHub</a>, seguir a <a href="https://twitter.com/cssnext">@cssnext</a> en Twitter para obtener las Ãºltimas noticias al respecto y uniros a la <a href="https://gitter.im/cssnext/cssnext">room cssnext en Gitter</a> si tenÃ©is cualquier pregunta.</p>
<ul>
<li><a href="http://cssnext.io/">PÃ¡gina oficial</a></li>
</ul>
]]></description><link>http://putaindecode.io/es/articulos/css/procesadores/cssnext/</link><guid isPermaLink="true">http://putaindecode.io/es/articulos/css/procesadores/cssnext/</guid><pubDate>Tue, 02 Jun 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[Introduction Ã  cssnext]]></title><description><![CDATA[<p>Dâ€™aprÃ¨s le <a href="http://cssnext.io/">site officiel</a>:</p>
<blockquote>
<p><strong>cssnext</strong> est un transpileur CSS qui vous permet dâ€™utiliser dÃ¨s aujourdâ€™hui la syntaxe CSS de demain. Il transforme les spÃ©cifications CSS qui ne sont pas encore mises en Å“uvre sur les navigateurs les plus populaires en CSS compatible.</p>
</blockquote>
<h2 id="a-veut-dire-quoi-exactement"><a class="markdownIt-Anchor" href="#a-veut-dire-quoi-exactement">#</a> Ã‡a veut dire quoi exactement ?</h2>
<p>Depuis CSS3, vous avez savez sans doute que CSS est divisÃ© en plusieurs documents indÃ©pendants appelÃ©s â€œmodulesâ€. Ces modules peuvent avoir diffÃ©rents niveaux de stabilitÃ© et diffÃ©rents <a href="http://www.w3.org/Style/CSS/current-work#legend">statuts</a>. La mise en Å“uvre de ces modules par les navigateurs peut prendre un certain temps et encore plus pour que le W3C les approuve comme <a href="http://www.w3.org/2005/10/Process-20051014/tr#RecsW3C">Recommandation</a>.</p>
<p>Avec <strong>cssnext</strong>, vous pouvez utiliser la syntaxe des <a href="http://www.xanthir.com/b4Ko0">nouveaux modules CSS</a> tels que les <em>propriÃ©tÃ©s personnalisÃ©es (custom properties level 1)</em> ou les <em>media queries personnalisÃ©es (custom media queries level 1)</em>. <strong>cssnext</strong> va transformer ces nouvelles et Ã©tranges syntaxes en du CSS comprÃ©hensible par les navigateurs que vous voulez supporter.</p>
<p>En clair, il vous donne un <strong>avant-goÃ»t du futur</strong>.</p>
<p>Je ne sais pas vous mais Ã©tant quelquâ€™un qui aime expÃ©rimenter avec les derniÃ¨res technologies de pointe, je trouve Ã§a plutÃ´t cool !</p>
<p>Je vous conseille de jeter un oeil Ã  la <a href="http://cssnext.io/features/">liste des fonctionnalitÃ©s</a>.</p>
<h3 id="quid-de-mon-pr-processeur-actuel"><a class="markdownIt-Anchor" href="#quid-de-mon-pr-processeur-actuel">#</a> Quid de mon prÃ©processeur actuel ?</h3>
<p>Oubliez les risques liÃ©s Ã  une abstraction trop Ã©levÃ©e des CSS par les prÃ©-processeurs actuels ; certes causÃ©s par une (sur-|mauvaise) utilisation de ces outils mais quand mÃªme.</p>
<p>Devinez quoi, vous nâ€™en avez pas forcÃ©ment besoin.</p>
<p>Essayez <strong>cssnext</strong> et retournez Ã  ce bon <s>vieux</s> nouveau CSS. Et avec un zeste de <a href="/fr/articles/css/bem/">mÃ©thodologie BEM</a>, vous vous sentirez revivre.</p>
<h2 id="exemples"><a class="markdownIt-Anchor" href="#exemples">#</a> Exemples</h2>
<p>Voyons voir quelles sont les fonctionnalitÃ©s offertes par <strong>cssnext</strong> pour le moment.</p>
<p>Avant toute chose, vous devriez aller faire un tour sur le <a href="http://cssnext.io/playground/">playground du site officiel</a>.</p>
<h3 id="pr-fixes-propri-taires-automatiques"><a class="markdownIt-Anchor" href="#pr-fixes-propri-taires-automatiques">#</a> PrÃ©fixes propriÃ©taires automatiques</h3>
<pre><code class="language-css"><span class="hljs-class">.h1</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">transform</span>:<span class="hljs-value"> <span class="hljs-function">skewX</span>(<span class="hljs-number">25deg</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">transition</span>:<span class="hljs-value"> transform <span class="hljs-number">1s</span></span></span>;
}</span></code></pre>
<p>Cela va Ãªtre transformÃ© par <strong>cssnext</strong> via Autoprefixer en :</p>
<pre><code class="language-css"><span class="hljs-class">.h1</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">-webkit-transform</span>:<span class="hljs-value"> <span class="hljs-function">skewX</span>(<span class="hljs-number">25deg</span>)</span></span>;
      <span class="hljs-rule"><span class="hljs-attribute">-ms-transform</span>:<span class="hljs-value"> <span class="hljs-function">skewX</span>(<span class="hljs-number">25deg</span>)</span></span>;
          <span class="hljs-rule"><span class="hljs-attribute">transform</span>:<span class="hljs-value"> <span class="hljs-function">skewX</span>(<span class="hljs-number">25deg</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">-webkit-transition</span>:<span class="hljs-value"> -webkit-transform <span class="hljs-number">1s</span></span></span>;
          <span class="hljs-rule"><span class="hljs-attribute">transition</span>:<span class="hljs-value"> transform <span class="hljs-number">1s</span></span></span>;
}</span></code></pre>
<h3 id="propri-t-s-personnalis-es-et-var-limit-root"><a class="markdownIt-Anchor" href="#propri-t-s-personnalis-es-et-var-limit-root">#</a> PropriÃ©tÃ©s personnalisÃ©es et var() limitÃ© Ã  <code>:root</code></h3>
<p>Aussi connues sous le nom des trÃ¨s attendues <a href="http://www.w3.org/TR/css-variables/">variables CSS</a>.</p>
<pre><code class="language-css"><span class="hljs-pseudo">:root</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">--primary-Color</span>:<span class="hljs-value">                 <span class="hljs-hexcolor">#E86100</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">--secondary-Color</span>:<span class="hljs-value">               <span class="hljs-hexcolor">#2c3e50</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">--r-Grid-baseFontSize</span>:<span class="hljs-value">           <span class="hljs-number">1rem</span></span></span>;
}</span></code></pre>
<p>Ã€ utiliser de cette faÃ§onÂ :</p>
<pre><code class="language-css"><span class="hljs-class">.h1</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">var</span>(--primary-Color)</span></span>;
}</span>
<span class="hljs-class">.h1</span><span class="hljs-pseudo">:hover</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">var</span>(--secondary-Color)</span></span>;
}</span>
<span class="hljs-tag">body</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-function">var</span>(--r-Grid-baseFontSize)</span></span>;
}</span></code></pre>
<h3 id="media-queries-personnalis-es"><a class="markdownIt-Anchor" href="#media-queries-personnalis-es">#</a> Media Queries personnalisÃ©es</h3>
<p>Pour crÃ©er des alias sÃ©mantiques, clairs et simples (<a href="http://dev.w3.org/csswg/mediaqueries/#custom-mq">lisez la docâ€™</a>).</p>
<pre><code class="language-css"><span class="hljs-at_rule">@<span class="hljs-keyword">custom-media</span> --viewport-medium (width &lt;= <span class="hljs-number">40rem</span>)</span>;
<span class="hljs-at_rule">@<span class="hljs-keyword">custom-media</span> --viewport-large (max-width: <span class="hljs-number">50em</span>)</span>;</code></pre>
<p>Prenons par exemple :</p>
<pre><code class="language-css"><span class="hljs-pseudo">:root</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">--fontSize</span>:<span class="hljs-value"> <span class="hljs-number">1.2rem</span></span></span>;
}</span>

<span class="hljs-at_rule">@<span class="hljs-keyword">media</span> (--viewport-medium) </span>{
  <span class="hljs-tag">body</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-function">calc</span>(<span class="hljs-function">var</span>(--fontSize) * <span class="hljs-number">1.2</span>)</span></span>; }</span>
}
<span class="hljs-at_rule">@<span class="hljs-keyword">media</span> (--viewport-large) </span>{
  <span class="hljs-tag">body</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-function">calc</span>(<span class="hljs-function">var</span>(--fontSize) * <span class="hljs-number">1.4</span>)</span></span>; }</span>
}</code></pre>
<p>Le code gÃ©nÃ©rÃ© sera alors :</p>
<pre><code class="language-css"><span class="hljs-at_rule">@<span class="hljs-keyword">media</span> (max-width: <span class="hljs-number">40rem</span>) </span>{
  <span class="hljs-tag">body</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">1.44rem</span></span></span>; }</span>
}
<span class="hljs-at_rule">@<span class="hljs-keyword">media</span> (max-width: <span class="hljs-number">50em</span>) </span>{
  <span class="hljs-tag">body</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">1.68rem</span></span></span>; }</span>
}</code></pre>
<h3 id="s-lecteurs-personnalis-s"><a class="markdownIt-Anchor" href="#s-lecteurs-personnalis-s">#</a> SÃ©lecteurs personnalisÃ©s</h3>
<p>Encore une fois, un petit tour sur les <a href="http://dev.w3.org/csswg/css-extensions/#custom-selectors">specs</a> pour commencer. Disons quâ€™on veuille appliquer des styles Ã  toutes les balises de titre.</p>
<pre><code class="language-css"><span class="hljs-at_rule">@<span class="hljs-keyword">custom-selector</span> :--heading h1, h2, h3, h4, h5, h6</span>;

<span class="hljs-pseudo">:--heading</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">margin-top</span>:<span class="hljs-value"> <span class="hljs-number">0</span></span></span>;
}</span></code></pre>
<p>Ce qui va gÃ©nÃ©rer le code suivantÂ :</p>
<pre><code class="language-css">h1,
h2,
h3,
h4,
h5,
h6 { margin-top; 0; }</code></pre>
<h3 id="color"><a class="markdownIt-Anchor" href="#color">#</a> <code>color()</code></h3>
<p>Une simple <a href="http://dev.w3.org/csswg/css-color/#modifying-colors">fonction color</a> qui sert Ã  appliquer des <em>rÃ©glages couleur</em> (teinte, luminositÃ©, entre autres) Ã  une couleur de base.</p>
<p>Exemples :</p>
<pre><code class="language-css"><span class="hljs-class">.class</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span> <span class="hljs-function">red</span>(+<span class="hljs-number">30</span>) <span class="hljs-function">green</span>(-<span class="hljs-number">50</span>) <span class="hljs-function">blue</span>(<span class="hljs-number">6%</span>) <span class="hljs-function">alpha</span>(.<span class="hljs-number">65</span>))</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-top-color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span> <span class="hljs-function">saturation</span>(-<span class="hljs-number">8%</span>) <span class="hljs-function">whiteness</span>(+<span class="hljs-number">50%</span>))</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-right-color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span> <span class="hljs-function">lightness</span>(<span class="hljs-number">5%</span>) <span class="hljs-function">blackness</span>(-<span class="hljs-number">25%</span>))</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-bottom-color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span> <span class="hljs-function">tint</span>(<span class="hljs-number">80%</span>))</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-left-color</span>:<span class="hljs-value"> <span class="hljs-function">color</span>(<span class="hljs-hexcolor">#2B88E6</span> <span class="hljs-function">shade</span>(<span class="hljs-number">75%</span>))</span></span>;
}</span></code></pre>
<p>Le code ci-dessus sera transformÃ© enâ€¦</p>
<pre><code class="language-css"><span class="hljs-class">.class</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">43</span>, <span class="hljs-number">136</span>, <span class="hljs-number">230</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">73</span>, <span class="hljs-number">86</span>, <span class="hljs-number">15</span>, <span class="hljs-number">0.65</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-top-color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">181</span>, <span class="hljs-number">201</span>, <span class="hljs-number">222</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-right-color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">3</span>, <span class="hljs-number">45</span>, <span class="hljs-number">87</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-bottom-color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">213</span>, <span class="hljs-number">231</span>, <span class="hljs-number">250</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-left-color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">11</span>, <span class="hljs-number">34</span>, <span class="hljs-number">58</span>)</span></span>;
}</span></code></pre>
<p><strong>cssnext</strong> propose aussi les fonctionalitÃ©s suivantes liÃ©es Ã  la couleur.</p>
<h4 id="hwb"><a class="markdownIt-Anchor" href="#hwb">#</a> hwb()</h4>
<p>Dâ€™aprÃ¨s les <a href="http://dev.w3.org/csswg/css-color/#the-hwb-notation">spÃ©cifications</a>, HWB (Hue-Whiteness-Blackness) est similaire Ã  la notation HSL mais plus facile Ã  utiliser pour les humains.</p>
<pre><code class="language-css"><span class="hljs-class">.title</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">hwb</span>(<span class="hljs-number">125</span>, <span class="hljs-number">32%</span>, <span class="hljs-number">47%</span>)</span></span>;
}</span></code></pre>
<p>Rendu :</p>
<pre><code class="language-css"><span class="hljs-class">.title</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">rgb</span>(<span class="hljs-number">33</span>, <span class="hljs-number">135</span>, <span class="hljs-number">42</span>)</span></span>;
}</span></code></pre>
<h4 id="gray"><a class="markdownIt-Anchor" href="#gray">#</a> gray()</h4>
<p>Les gris sont <a href="http://dev.w3.org/csswg/css-color/#grays">tellement cool</a> quâ€™ils ont une fonction rien que pour eux.</p>
<pre><code class="language-css"><span class="hljs-class">.section</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-function">gray</span>(<span class="hljs-number">120</span>, <span class="hljs-number">50%</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-color</span>:<span class="hljs-value"> <span class="hljs-function">gray</span>(<span class="hljs-number">17%</span>, <span class="hljs-number">25%</span>)</span></span>;
}</span></code></pre>
<p>Ce qui donnera :</p>
<pre><code class="language-css"><span class="hljs-class">.section</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">120</span>, <span class="hljs-number">120</span>, <span class="hljs-number">120</span>, <span class="hljs-number">0.5</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">border-color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">43</span>, <span class="hljs-number">43</span>, <span class="hljs-number">43</span>, <span class="hljs-number">0.25</span>)</span></span>;
}</span></code></pre>
<h4 id="rrggbbaa"><a class="markdownIt-Anchor" href="#rrggbbaa">#</a> #rrggbbaa</h4>
<p><strong>cssnext</strong> transforme les <a href="http://dev.w3.org/csswg/css-color/#hex-notation">notations hexadÃ©cimales</a> #RRGGBBAA et #RGBA en rgba().</p>
<pre><code class="language-css"><span class="hljs-tag">body</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-hexcolor">#5c69</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-hexcolor">#C73D5C59</span></span></span>;
}</span></code></pre>
<p>RÃ©sultat :</p>
<pre><code class="language-css"><span class="hljs-tag">body</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">85</span>, <span class="hljs-number">204</span>, <span class="hljs-number">102</span>, <span class="hljs-number">0.6</span>)</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">background-color</span>:<span class="hljs-value"> <span class="hljs-function">rgba</span>(<span class="hljs-number">199</span>, <span class="hljs-number">61</span>, <span class="hljs-number">92</span>, <span class="hljs-number">0.34902</span>)</span></span>;
}</span></code></pre>
<h4 id="rebeccapurple"><a class="markdownIt-Anchor" href="#rebeccapurple">#</a> rebeccapurple</h4>
<p>Transforme simplement la couleur <a href="https://github.com/postcss/postcss-color-rebeccapurple#why-this-plugin-"><code>rebeccapurple</code></a> en <code>rgb(102, 51, 153)</code>.</p>
<h3 id="rem-units"><a class="markdownIt-Anchor" href="#rem-units">#</a> rem units</h3>
<p>Rien de bien extraordinaire ici, on gÃ©nÃ¨re un <strong><em>fallback</em> en pixels pour les unitÃ©s en rem</strong>. Certaines personnes pourraient penser quâ€™un tel <em>fallback</em> est inutile de nos jours. Cependant, pour des projets bien spÃ©cifiques (compatibilitÃ© IE 7 et 8 requise), câ€™est encore une nÃ©cessitÃ©.
Non mais vous nâ€™avez quand mÃªme pas besoin dâ€™un exemple pour Ã§a ? Si ? Bonâ€¦ dâ€™accord. Allons-y !</p>
<pre><code class="language-css"><span class="hljs-class">.section-Highlight</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">2.5rem</span></span></span>;
}</span></code></pre>
<p>RÃ©sultat :</p>
<pre><code class="language-css"><span class="hljs-class">.section-Highlight</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">40px</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">2.5rem</span></span></span>;
}</span></code></pre>
<h2 id="note-importante-sur-les-fonctionnalit-s"><a class="markdownIt-Anchor" href="#note-importante-sur-les-fonctionnalit-s">#</a> Note importante sur les fonctionnalitÃ©s</h2>
<p>Vous pouvez manuellement activer ou dÃ©sactiver certaines fonctionnalitÃ©s si vous nâ€™en ressentez pas le besoin.
Cela Ã©tant dit, il vous est conseillÃ© dâ€™utiliser lâ€™option <a href="http://cssnext.io/usage/#browsers"><code>browsers</code></a>,
qui permet de gÃ©rer automatiquement la liste des fonctionnalitÃ©s Ã  activer.
Par exemple si vous spÃ©cifiez un environnement oÃ¹ IE 8 nâ€™est pas supportÃ©, lâ€™option de transformation des <code>rem</code>
en <code>px</code> ne sera pas activÃ©. Tout comme Autoprefixer ne rajoutera pas les prÃ©fixes inutiles.</p>
<h2 id="fonctionnalit-s-bonus"><a class="markdownIt-Anchor" href="#fonctionnalit-s-bonus">#</a> FonctionnalitÃ©s bonus</h2>
<p>Les deux fonctionnalitÃ©s qui vont suivre ne sont pas vraiment en rapport avec les spÃ©cifications CSS. Cependant, elles mÃ©ritent tout de mÃªme leur place dans cette brÃ¨ve prÃ©sentation de lâ€™outil.</p>
<h3 id="import"><a class="markdownIt-Anchor" href="#import">#</a> <code>import</code></h3>
<p>Et si vous pouviez importer des fichiers locaux et des modules (<code>node_modules</code> ou <code>web_modules</code>) pour produire un seul et mÃªme fichier CSS les contenant tous ? Oui, <a href="https://github.com/sass/sass/issues/193">câ€™est Ã  vous que je mâ€™adresse, les utilisateurs de Sass</a>, hum. Eh bien, avec <strong>cssnext</strong>, câ€™est possible.</p>
<h3 id="compress"><a class="markdownIt-Anchor" href="#compress">#</a> <code>compress</code></h3>
<p>Comme vous lâ€™avez sÃ»rement devinÃ©, câ€™est juste une option pour compresser <em>ou pas</em> votre fichier de sortie, et ceci grÃ¢ce Ã  <a href="https://github.com/ben-eb/cssnano">cssnano</a>.</p>
<h3 id="usage"><a class="markdownIt-Anchor" href="#usage">#</a> Usage</h3>
<p>Voici un exemple simple de ces deux fonctionnalitÃ©s. Jâ€™ai ici utilisÃ© <a href="https://github.com/cssnext/gulp-cssnext">gulp-cssnext</a>, un des <a href="http://cssnext.io/setup/">nombreux plugins</a> qui vous aident Ã  dÃ©marrer avec <strong>cssnext</strong>.</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> gulp = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp'</span>),
    cssnext = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-cssnext"</span>);

gulp.task(<span class="hljs-string">'styles'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  gulp.src(<span class="hljs-string">"css/index.css"</span>)
  .pipe(cssnext({
    compress: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// default is false</span>
  }))
  .pipe(gulp.dest(<span class="hljs-string">"./dist/"</span>))
});</code></pre>
<p>Ensuite, dans mon fichier <code>index.css</code>, jâ€™ai ceciÂ :</p>
<pre><code class="language-css"><span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"normalize.css"</span></span>; <span class="hljs-comment">/* == @import "./node_modules/normalize.css/index.css"; */</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"cssrecipes-defaults"</span></span>; <span class="hljs-comment">/* == @import "./node_modules/cssrecipes-defaults/index.css"; */</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"project-modules/partner"</span></span>; <span class="hljs-comment">/* relatif Ã  css/ */</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"typo"</span></span>; <span class="hljs-comment">/* mÃªme niveau que mon index.css principal situÃ© dans css/ */</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"highlight"</span> (min-width: <span class="hljs-number">25em</span>)</span>;</code></pre>
<p>Et le rendu final seraÂ :</p>
<pre><code class="language-css"><span class="hljs-comment">/* contenu de ./node_modules/normalize.css/index.css */</span>
<span class="hljs-comment">/* contenu de ./node_modules/cssrecipes-defaults/index.css */</span>
<span class="hljs-comment">/* contenu de project-modules/partner.css */</span>
<span class="hljs-comment">/* contenu de typo.css */</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">media</span> (min-width: <span class="hljs-number">25em</span>) </span>{
  <span class="hljs-comment">/* contenu de highlight.css */</span>
}</code></pre>
<p>Je sais ce que vous ressentez. Ce nâ€™est peut-Ãªtre pas le coup de foudre au premier coup dâ€™Å“il (enfin, pour certains comme moi si, mais bon, passons). Vous ne lâ€™acceptez pas encore mais il va falloir vous rendre Ã  lâ€™Ã©vidence, un jour ou lâ€™autre vous coderez comme Ã§a. Mieux vaut vous y mettre tout de suite, non ? :)</p>
<p>Bref, pour rÃ©sumer, disons simplement que le but principal de <strong>cssnext</strong> est de pouvoir dÃ©velopper selon les spÃ©cifications du W3C en gardant bien Ã  lâ€™esprit que, thÃ©oriquement, il sera possible de le supprimer plus tard (quand il ne sera plus utile).</p>
<p>En effet, dans un futur proche, les fonctionnalitÃ©s quâ€™offre cet outil ne seront plus gÃ©rÃ©es par <strong>cssnext</strong> lui-mÃªme mais directement par les navigateurs. Laissons-les sâ€™adapter, chacun Ã  leur vitesse et prÃ©parons-nous. VoilÃ  tout lâ€™intÃ©rÃªt du code <em>future-proof</em>, comme le permet <a href="http://babeljs.io/">babeljs</a> pour le JavaScript.</p>
<p>En attendant, il y a encore du boulot : voici une <a href="https://github.com/cssnext/cssnext/issues?q=is%3Aopen+is%3Aissue+label%3A%22type%3A+feature+request%22">liste des fonctionnalitÃ©s Ã  venir</a>.</p>
<p>Maintenant, Ã  vous de jouer. Nâ€™oubliez pas dâ€™aller faire un tour sur le <a href="https://github.com/cssnext/cssnext">repo GitHub</a>, nâ€™hÃ©sitez pas Ã  suivre <a href="https://twitter.com/cssnext">@cssnext</a> sur Twitter pour Ãªtre au courant des derniÃ¨res news et rejoignez la <a href="https://gitter.im/cssnext/cssnext">room cssnext sur Gitter</a> si vous avez des questions.</p>
<ul>
<li><a href="http://cssnext.io/">Site officiel</a></li>
</ul>
]]></description><link>http://putaindecode.io/fr/articles/css/preprocesseurs/cssnext/</link><guid isPermaLink="true">http://putaindecode.io/fr/articles/css/preprocesseurs/cssnext/</guid><pubDate>Tue, 02 Jun 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[Introduction au dÃ©ploiement continu]]></title><description><![CDATA[<h1 id="d-ployer-en-continu"><a class="markdownIt-Anchor" href="#d-ployer-en-continu">#</a> DÃ©ployer en continu ?</h1>
<p>Il sâ€™agit dâ€™avoir un site stable en production, ceci de maniÃ¨re automatisÃ©e et
continue. Rien que Ã§a.</p>
<p>Il faut comprendre par lÃ  sans passer par FTP avec Filezilla.
Pas de bouton â€œUploadâ€ ou â€œSyncâ€ aprÃ¨s avoir fait une modification de code.
Pas de risque de pÃ©ter tout votre site si vos modifications rentrent en conflit
avec les modifications de votre collÃ¨gue, qui lui aussi vient de pousser un
bon gros patch bien sale.</p>
<p>La premiÃ¨re consÃ©quence est que les mises en
production ne sont plus stressantes, car trÃ¨s rÃ©guliÃ¨res.
<a href="http://www.estcequonmetenprodaujourdhui.info/">Certaines personnes ne recommandent pas les mises en production tous les jours
</a> mais lorsque vous avez mis en
place lâ€™intÃ©gration continue, vous minimisez grandement les risques.</p>
<p>La preuve en est que certaines entreprises font des mises en productions plusieurs
centaines de fois par jour ! (GitHub est un bon exemple).</p>
<h2 id="pr-requis-au-d-ploiement-continu"><a class="markdownIt-Anchor" href="#pr-requis-au-d-ploiement-continu">#</a> PrÃ©-requis au dÃ©ploiement continu</h2>
<p>Vous nâ€™avez quâ€™une chose Ã  faire avant de vous attaquer Ã  la mise en place du
dÃ©ploiement continu : vous devez dÃ©jÃ  avoir
<a href="/fr/articles/ci/">lâ€™intÃ©gration continue</a> en place.</p>
<p>Une fois vous Ãªtes bon Ã  ce niveau, vous pouvez passer Ã  lâ€™Ã©tape suivante.</p>
<h2 id="faire-un-script-qui-fait-les-choses-qui-vont-bien-quand-les-tests-vont-bien"><a class="markdownIt-Anchor" href="#faire-un-script-qui-fait-les-choses-qui-vont-bien-quand-les-tests-vont-bien">#</a> Faire un script qui fait les choses qui vont bien quand les tests vont bien</h2>
<p>Une fois quâ€™on a une commande qui peut jouer tous les tests et dire â€œyâ€™a bonâ€ ou
â€œtatoukassÃ©â€, il nous faut prÃ©voir les actions Ã  rÃ©aliser quand nos tests sont
OK.</p>
<p>Un dÃ©ploiement FTP, un dÃ©ploiement git, ou plus compliquÃ© via CDN, peu importe.
<strong>Il faut juste une commande qui marche simplement.</strong></p>
<p>Pour notre site, la commande est <code>npm run deploy</code>. Cette commande pousse le site
gÃ©nÃ©rÃ© sur la branche <code>gh-pages</code>
(puisquâ€™on se sert <a href="https://pages.github.com/">des pages GitHub</a>).</p>
<h2 id="automatiser-le-script-qui-fait-les-choses-qui-vont-bien-quand-les-tests-vont-bien"><a class="markdownIt-Anchor" href="#automatiser-le-script-qui-fait-les-choses-qui-vont-bien-quand-les-tests-vont-bien">#</a> Automatiser le script qui fait les choses qui vont bien quand les tests vont bien</h2>
<p>On peut ensuite Ã©ventuellement englober les prÃ©cÃ©dentes Ã©tapes dans une seule
commande qui va se dÃ©brouiller sâ€™il nâ€™y a pas dâ€™erreur. Mais bon, si vous nâ€™avez
que deux commandes (comme on a dans lâ€™exemple de notre site), un simple appel de
cette faÃ§on devrait faire lâ€™affaire :</p>
<pre><code class="language-console">$ <span class="hljs-built_in">npm</span> test &amp;&amp; <span class="hljs-built_in">npm</span> run deploy</code></pre>
<p>Si <code>npm test</code> retourne une erreur, la deuxiÃ¨me commande ne sera pas exÃ©cutÃ©e.</p>
<h2 id="la-suite-au-prochaine-pisode"><a class="markdownIt-Anchor" href="#la-suite-au-prochaine-pisode">#</a> La suite au prochaine Ã©pisode</h2>
<p>La prochaine Ã©tape (dans un prochain article) sera de mettre Ã§a en place sur un
serveur dâ€™intÃ©gration continue, nous y Ã©tudierons simplement ce que nous avons
fait pour notre site.</p>
<p>Si vous Ãªtes trop curieux, vous pouvez dÃ©jÃ  <a href="https://github.com/putaindecode/putaindecode.io">consulter le code source de notre
site</a> et fouiller dans le
<code>package.json</code> (section <code>scripts</code>) pour deviner la suiteâ€¦</p>
]]></description><link>http://putaindecode.io/fr/articles/ci/deploiement-continu/</link><guid isPermaLink="true">http://putaindecode.io/fr/articles/ci/deploiement-continu/</guid><pubDate>Mon, 25 May 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[Qu'est-ce que l'intÃ©gration continue ?]]></title><description><![CDATA[<p>Certains risquent dâ€™Ãªtre dÃ©Ã§us puisque nous ne parlerons pas ici des fameux <code>3x8</code>,
technique qui consiste Ã  faire tourner 3 Ã©quipes dâ€™intÃ©grateurs HTML en
continu afin dâ€™avoir du PSD &gt; HTML 24h sur 24.</p>
<h2 id="le-principe-de-l-int-gration-continue"><a class="markdownIt-Anchor" href="#le-principe-de-l-int-gration-continue">#</a> Le principe de lâ€™intÃ©gration continue</h2>
<blockquote>
<p>Lâ€™intÃ©gration continue est un ensemble de pratiques utilisÃ©es en gÃ©nie
logiciel consistant Ã  vÃ©rifier Ã  chaque modification de code source que le
rÃ©sultat des modifications ne produit pas de rÃ©gression dans lâ€™application
dÃ©veloppÃ©e.</p>
</blockquote>
<small>
[Source: WikipÃ©dia](https://fr.wikipedia.org/wiki/Int%C3%A9gration_continue)
</small>
<h2 id="pr-requis-pour-mettre-en-place-l-int-gration-continue"><a class="markdownIt-Anchor" href="#pr-requis-pour-mettre-en-place-l-int-gration-continue">#</a> PrÃ©-requis pour mettre en place lâ€™intÃ©gration continue</h2>
<p>Avant de rentrer dans le vif du sujet, assurez-vous dâ€™avoir dÃ©jÃ  de bonne bases,
pour maintenir une base de code saine en
<a href="/fr/articles/git/">versionnant avec git</a>.
Nous sommes en 2015, lâ€™annÃ©e oÃ¹ lâ€™on Ã©tait censÃ© avoir les voitures
volantes, nous nâ€™allons donc pas expliquer ici Ã  quoi sert de versionner du
code.</p>
<p>Du code versionnÃ© ne suffit pas, il faut avoir des tests automatisÃ©s bien
entendu.
<a href="/fr/articles/js/tests/frontend/">Front</a> et back, il en faut de tous
les cÃ´tÃ©s.</p>
<p>Ensuite, il nous faudra choisir un serveur qui va gÃ©rer lâ€™intÃ©gration continue.
Il existe des services tels que:</p>
<ul>
<li><a href="http://travis-ci.org/">Travis</a></li>
<li><a href="https://circleci.com/">CircleCI</a></li>
<li><a href="https://www.atlassian.com/software/bamboo/">Bamboo</a></li>
<li><a href="https://codeship.com/">Codeship</a></li>
<li><a href="http://jenkins-ci.org/">Jenkins</a></li>
</ul>
<h2 id="l-int-gration-continue-en-pratique"><a class="markdownIt-Anchor" href="#l-int-gration-continue-en-pratique">#</a> Lâ€™intÃ©gration continue en pratique</h2>
<p>Un fois quâ€™on a notre code testÃ© et versionnÃ© et quâ€™on a configurÃ© son serveur
de <em>CI</em>, chaque modification va dÃ©clencher des actions sur ce serveur, puis,
en fonction des rÃ©sultats, va dÃ©clencher dâ€™autres actions tout en vous notifiant
si besoin.</p>
<p>Un exemple classique serait le suivant : une fois les derniÃ¨res modifications de
code poussÃ©es sur la branche principale sur votre dÃ©pÃ´t de code, le serveur
dâ€™intÃ©gration continue va jouer tous les tests et dÃ©ployer le tout en production si
tout a marchÃ© sur des roulettes.</p>
<p>Si des problÃ¨mes surviennent, rien ne sera dÃ©ployÃ© et vous serez notifiÃ© sur
les services que vous avez configurÃ©s (email, IRC, webhook, etc).</p>
<p>Nous pouvons imaginer que votre serveur vienne vous insulter sur
votre logiciel de chat interne, en vous montrant du doigt.
On pourrait aussi imaginer une synthÃ¨se vocale crier votre nom et prÃ©ciser Ã 
toute lâ€™Ã©quipe que
<a href="https://www.youtube.com/watch?v=mbDcnUH6rOc">vous avez mertÃ©</a>Â :
<em>â€œMoOx, you just fucked up the build by breaking 42 tests!
Fix that pleaseâ€</em>.
Pour finir dans les exemples farfelus, nous pourrions avoir une petite tourelle
type <em>Nerf</em> qui vous met un petit headshot qui va bien.
Des Ã©quipes font vraiment Ã§a, et vous vous en doutez, yâ€™a de la grosse marrade au
programme.</p>
<p>Lâ€™idÃ©e est vraiment de pousser le plus souvent possible, les plus petites
modifications possibles avec la meilleure couverture de tests possible.
Ceci afin de minimiser les risques. De plus, cela aide Ã  rester focalisÃ©.</p>
<p>Tout ce processus (versionnÃ© aussi tant quâ€™Ã  faire), qui permet de jouer tous
les tests <strong>rapidement</strong> (dans un environnement similaire Ã  la production), doit
Ãªtre transparent et accessible localement, afin que les dÃ©veloppeurs aient une
bonne visibilitÃ© et une bonne comprÃ©hension du systÃ¨me en place.</p>
<h2 id="faire-des-tests-automatis-s-c-est-la-vie"><a class="markdownIt-Anchor" href="#faire-des-tests-automatis-s-c-est-la-vie">#</a> Faire des tests automatisÃ©s, câ€™est la vie</h2>
<p>Jâ€™ai mis un titre pour Ã§a car câ€™est important. Vraiment.
Tout dÃ©veloppeur qui nâ€™a pas encore Ã©crit ses premiers tests a peur.
Puis avec le temps, il se dit que finalement, il ne fallait pas
avoir autant dâ€™apprÃ©hension et quâ€™il Ã©tait trÃ¨s con de ne pas avoir
testÃ© automatiquement tout ses codes sources plus tÃ´t.
Ã€ tel point quâ€™une
<a href="http://the--kyza.deviantart.com/art/What-the-Flux-511691704">DeLorean modifiÃ©e</a>
pour se prÃ©venir soi-mÃªme ne serait pas de refus.</p>
<p>Une fois la barriÃ¨re franchie, on se dit vraiment quâ€™on Ã©tait stupide de pas
avoir essayÃ© avant.</p>
<h2 id="une-commande-qui-xecute-les-tests"><a class="markdownIt-Anchor" href="#une-commande-qui-xecute-les-tests">#</a> Une commande qui Ã©xecute les tests</h2>
<p>Un fois quâ€™on a Ã©crit des tests, ou mÃªme souvent avant, on automatise
lâ€™exÃ©cution des tests. En gÃ©nÃ©ral câ€™est rapide, Ã©tant donnÃ© quâ€™une simple
commande ou un simple script suffit.
Beaucoup de <em>test runners</em> existent et vous nâ€™aurez aucune difficultÃ© Ã  en
trouver un en adÃ©quation avec votre language favori.</p>
<p>Pour notre site, la commande est <code>npm test</code>. Simple, efficace.</p>
<p>Elle exÃ©cute tout ce qui est nÃ©cessaire Ã  compiler notre application et Ã  jouer
les tests tout en retournant un rÃ©sultat lisible et un code dâ€™erreur si besoin.</p>
<h2 id="et-apr-s"><a class="markdownIt-Anchor" href="#et-apr-s">#</a> Et aprÃ¨s ?</h2>
<p>LÃ , si vous avez dÃ©jÃ  mis tout Ã§a en place, le bonheur ultime du dÃ©veloppeur
nâ€™est pas loin : vous pouvez rapidement vÃ©rifier quâ€™il nâ€™y a pas de rÃ©gressions
et agir en consÃ©quence.</p>
<p>Chez <em>Putain de codeÂ !</em> (en date de cet article), notre couverture de
tests est loin dâ€™Ãªtre bonne. Mais ce site Ã©tant un petit plaisir un peu risquÃ©,
nous faisons quand mÃªme du
<a href="/fr/articles/ci/deploiement-continu/">dÃ©ploiement continu</a>, lâ€™Ã©tape dâ€™aprÃ¨s !
On aime bien lâ€™idÃ©e du <em><a href="http://zachholman.com/talk/move-fast-break-nothing">move fast &amp; break <s>no</s>thing
</a></em>.</p>
]]></description><link>http://putaindecode.io/fr/articles/ci/</link><guid isPermaLink="true">http://putaindecode.io/fr/articles/ci/</guid><pubDate>Thu, 21 May 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[Comment dÃ©boguer facilement du web y compris sur tablettes et tÃ©lÃ©phones]]></title><description><![CDATA[<p>Vous souhaitez dÃ©boguer votre site ou application web mais vous ne savez pas trop comment faire ? Bon. Je sais que vous savez mais je peux peut-Ãªtre vous faciliter la tÃ¢che.</p>
<p>CommenÃ§ons par le plus simple.</p>
<h2 id="un-navigateur-un-inspecteur"><a class="markdownIt-Anchor" href="#un-navigateur-un-inspecteur">#</a> Un navigateur, un inspecteur</h2>
<p>Si vous ne voulez pas vous prendre la tÃªte, la solution la plus simple reste dâ€™utiliser lâ€™inspecteur fourni par votre navigateur pour analyser vos pages web. Fini les add-ons Ã  installer (comme Firebug), chaque navigateur rÃ©cent a maintenant son propre inspecteur, mÃªme Internet Explorer.</p>
<p>Ã‡a, câ€™est la partie que vous devez sÃ»rement dÃ©jÃ  savoir. Par contre, quid du mobile ?</p>
<h3 id="oui-quid-du-mobile"><a class="markdownIt-Anchor" href="#oui-quid-du-mobile">#</a> Oui, quid du mobile ?</h3>
<p>Câ€™est justement principalement ce qui mâ€™intÃ©resse ici.</p>
<p>Pour ce qui est du mobile, je vous propose de commencer par brancher votre tÃ©lÃ©phone ou tablette sur votre poste en USB puis de lancer deux navigateurs. Mais pas nâ€™importe lesquels. Les mÃªmes navigateurs sur desktop et sur mobile. Par exemple, si vous voulez dÃ©boguer Safari sur iOS, alors lancez Safari sur votre Mac. Si vous voulez dÃ©boguer Chrome sur Android, alors lancez Chrome sur votre desktop. Ce nâ€™est vraiment plus aussi compliquÃ© quâ€™auparavant oÃ¹ il Ã©tait nÃ©cessaire dâ€™installer des applications en ligne de commande (comme <a href="https://developer.android.com/tools/help/adb.html">adb</a> par exemple) avant de pouvoir rendre la connexion possible. Maintenant, les navigateurs incorporent directement de quoi se connecter aux mobiles.</p>
<p>Une connexion se fera entre les deux navigateurs (mobile et desktop) et vous permettra de voir ce quâ€™il se passe sur votre mobile en regardant la fenÃªtre de devtools sur votre desktop. Quelques prÃ©cisions pour chacun des navigateursÂ :</p>
<ul>
<li>Chrome : lancez lâ€™URL <code>chrome://inspect</code></li>
<li>Safari : allez dans <code>develop</code> puis vous verrez vos appareils connectÃ©s et les URL lancÃ©es sur vos appareils</li>
</ul>
<p>Pas mal non ?</p>
<p>Mais nous pouvons aller encore plus loin grÃ¢ce Ã  Firefox qui va nous faciliter la tÃ¢che. En effet, celui-ci est capable de dÃ©boguer nâ€™importe quel navigateur via WebIDE et son <em>adapter</em> <a href="https://developer.mozilla.org/en-US/docs/Tools/Valence">Valence</a>.</p>
<h2 id="allez-firefox-webide"><a class="markdownIt-Anchor" href="#allez-firefox-webide">#</a> Allez, Firefox WebIDE !</h2>
<p>Au dÃ©part ce projet avait pour but de dÃ©boguer Firefox OS mais grÃ¢ce au projet <a href="https://developer.mozilla.org/en-US/docs/Tools/Valence">Valence</a>, WebIDE permet maintenant aussi de se connecter Ã  dâ€™autres navigateurs comme iOS Safari ou Desktop Chrome (nâ€™importe en fait) et de pouvoir dÃ©boguer dans les devtools de Firefox. Ã‡a, câ€™est cool.</p>
<p>Pour activer WebIDE sur votre Firefox, ouvrez un onglet et rentrez comme URL<br /><code>about:config?filter=devtools.webide.enabled</code><br />
puis mettre lâ€™option Ã  <code>true</code>.</p>
<p>Allez aprÃ¨s dans devtools, â€œsettingsâ€ (lâ€™engrenage) et activezÂ :</p>
<ul>
<li><code>Enable browser chrome and add-on debugging toolboxes</code></li>
<li><code>Enable remote debugging</code></li>
</ul>
<p>puis redÃ©marrez.</p>
<p>Vous devriez avoir â€œWebIDEâ€ de disponible mais aussi â€œBrowser Toolboxâ€ qui est un debugger pour inspecter lâ€™application Firefox en elle-mÃªme. Pratique pour faire des thÃ¨mes !</p>
<p>Une fois WebIDE lancÃ©, allez dans <code>Select runtime</code> puis <code>Install Simulator</code> et installez <code>ADB Helper Add-on</code> ainsi que <code>Tools Adapters Add-on</code>.</p>
<p>Vous Ãªtes bon(ne) pour pouvoir dÃ©boguer. Plus quâ€™Ã  brancher votre appareil, allez dans <code>Select runtime</code> et le voir dans la section <code>USB Devices</code>.</p>
<p>Nâ€™hÃ©sitez pas Ã  vous rÃ©fÃ©rer Ã  la <a href="https://developer.mozilla.org/en-US/docs/Tools/WebIDE">documentation officielle</a> pour de plus amples informations.</p>
<p>Un petit hic tout de mÃªme. Cela reste une beta (Ã  mon sens), de ce fait la connexion est un peu instable. Il est parfois difficile de se connecter Ã  un appareil. Pour cela, dÃ©branchez votre tÃ©lÃ©phone puis rebranchez-le, et redÃ©marrez Firefox puis relancez WebIDE, cela devrait Ãªtre bon.</p>
<p>Mis Ã  part ceci, câ€™est top.</p>
<blockquote>
<p>Oui mais moi je dois dÃ©boguer Android Browser, Ã§a marche tout Ã§a ?</p>
</blockquote>
<p>Biiiien, non. Jâ€™avoue tout. Aucune des solutions que je viens de vous donner ne fonctionne sur Android Browser.</p>
<blockquote>
<p>Euhâ€¦ Quoi ?!</p>
</blockquote>
<p>Oui oui, je comprends que vous soyez Ã©tonnÃ©(e). Moi aussi, je suis dÃ©pitÃ© Ã  chaque fois que je dois dÃ©velopper dessus. Ce navigateur est une belle merde. Il ne se met Ã  jour que quand votre OS sâ€™y met. Il est le navigateur par dÃ©faut et le moteur des webviews sur de nombreux (anciens (!|?)) Android. Ã€ vrai dire, je ne comprends mÃªme pas comment ce navigateur a pu exister sauf pour dire â€œHey, vous avez vu, on ne vous a pas imposÃ© Chrome, contrairement Ã  Microsoft avec IEâ€. Ils auraient pâ€™tÃªte dÃ» finalement.</p>
<p>Bref. Rassurez-vous, jâ€™ai des solutions.</p>
<p>Je pourrais vous parler du format en <strong>CLI</strong> mais je ne pense pas que cela vous intÃ©resserait. Et vu quâ€™on ne peut pas inspecter le DOM, juste voir la console, ce nâ€™est vraiment pas plaisant pour dÃ©boguer.</p>
<p>Je pourrais aussi vous parler de la solution du <code>about:debug</code> mais câ€™est chiant (mais Ã§a dÃ©panne). Cela permet dâ€™afficher une console JS dans le navigateur du mobile. Je vais plutÃ´t vous parler ici dâ€™un inspecteur Ã©crit en page web qui se branche partout, un peu comme un Firebug lite. Son petit nom ? <a href="http://people.apache.org/~pmuellr/weinre-docs/latest/">weinre</a>.</p>
<h2 id="weinre"><a class="markdownIt-Anchor" href="#weinre">#</a> weinre</h2>
<p>â€¦ est une solution plus trop rÃ©cente mais qui a le mÃ©rite de fonctionner partout, facilement et surtout sur Android browser. Celui-ci va crÃ©er une page web avec un webkit-debugger-like, qui lui est connectÃ© via un websocket sur le site que vous Ãªtes en train de dÃ©boguer, vous permettant Ã  la fois dâ€™avoir une console mais aussi une inspection du DOM. Et Ã§a, câ€™est vraiment chouette.</p>
<p><img src="weinre-console.png" alt=""></p>
<p>Passons Ã  son installation.</p>
<h3 id="installation"><a class="markdownIt-Anchor" href="#installation">#</a> Installation</h3>
<pre><code class="language-console">$ (sudo) npm -g <span class="hljs-keyword">install</span> weinre</code></pre>
<h3 id="utilisation"><a class="markdownIt-Anchor" href="#utilisation">#</a> Utilisation</h3>
<p>Lancez dâ€™abord le process :</p>
<pre><code class="language-console"><span class="hljs-variable">$ </span>weinre</code></pre>
<p>Ajoutez le script dans votre page qui communiquera avec votre serveur (exemple)Â :</p>
<pre><code class="language-javascript">&lt;script src=<span class="hljs-string">"http://localhost:8080/target/target-script-min.js#anonymous"</span>&gt;<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span></span></code></pre>
<p>Puis ouvrez la page <code>http://localhost:8080</code>, vous devriez avoir quelque chose comme ceciÂ :</p>
<p><img src="weinre-interface.png" alt=""></p>
<p>Plus quâ€™Ã  cliquer sur <code>http://localhost:8080/client/#anonymous</code> et vous arriverez sur lâ€™interface du debugger.</p>
<p>Attention par contre. Ayant eu des problÃ©matiques de temps de connexion au websocket, jâ€™ai dÃ» rajouter un <code>setTimeout</code> avant de lancer mon JavaScript afin que la connexion entre la page web et le serveur se fasse pour bien afficher la totalitÃ© des <code>console.log</code> et autres. Sans Ã§a, jâ€™ai vu le dÃ©but de mon app ne pas Ãªtre inspectÃ©e, dommage.</p>
<p>Pour le moment jâ€™ai rÃ©glÃ© ce problÃ¨me en mettant un <code>setTimout</code> de 2000ms sur lâ€™exÃ©cution de mon code car il nâ€™y a actuellement pas de moyens de savoir si la connexion au websocket sâ€™est faite ou non.</p>
<p>Sachez cependant que le projet nâ€™est plus trop maintenu mais que le principal <em>maintainer</em> est encore Ã  lâ€™Ã©coute et recevra volontiers vos amÃ©liorations.</p>
<p>Il existe deux alternatives Ã  weinreÂ :</p>
<ul>
<li><a href="http://jsconsole.com/remote-debugging.html">jsconsole</a> (que je nâ€™ai pas testÃ©)</li>
<li><a href="http://vorlonjs.com/">Vorlon.js</a> : trÃ¨s sympa, trÃ¨s prometteur, plus propre que weinre. Seul hic, jâ€™ai voulu tester Vorlon.js sur Android Browser (Android 4.3), il a fait planter Android Browser rendant impossible le debug. Dommage, jâ€™aurais bien remplacÃ© weinre par celui-ci.</li>
</ul>
<hr>
<p>Bien. On a fait le tour des solutions pour inspecter facilement le DOM ainsi quâ€™avoir une console sur nâ€™importe quel navigateur.</p>
<p>Ce qui serait intÃ©ressant maintenant, câ€™est dâ€™analyser les trames HTTP de nâ€™importe quel appareil.</p>
<h2 id="comment-analyser-le-flux-http"><a class="markdownIt-Anchor" href="#comment-analyser-le-flux-http">#</a> Comment analyser le flux HTTP</h2>
<p>Pour cette tÃ¢che, je vous propose dâ€™installer lâ€™outil <a href="http://mitmproxy.org/">mitmproxy</a> qui vous permettra de crÃ©er un proxy rÃ©cupÃ©rant tout votre trafic HTTP et de vous lâ€™afficher requÃªte par requÃªte.</p>
<p>Ce qui va sÃ»rement vous intÃ©resser sera la partie <a href="http://mitmproxy.org/doc/transparent.html">transparent proxying</a>. Le proxy se chargera juste dâ€™Ã©couter votre trafic et de lâ€™afficher.</p>
<p>Il sera nÃ©cessaire aussi de configurer votre navigateur afin que celui-ci se connecte Ã  votre proxy.</p>
<p>Si vous Ãªtes sur Android, il vous est nÃ©cessaire de le spÃ©cifier dans la configuration rÃ©seau de votre appareil. Pour cela :</p>
<ul>
<li>Connectez-vous au WiFi (du mÃªme rÃ©seau que votre hÃ´te) (par exemple â€œMoOxâ€)</li>
<li>Allez dans â€œSettingsâ€, â€œWi-Fiâ€</li>
<li>Restez appuyÃ© sur le nom du WiFi (toujours â€œMoOxâ€)</li>
<li>Une popin apparaÃ®tra, cliquez sur â€œModify networkâ€</li>
<li>Cochez â€œShow advanced optionsâ€</li>
<li>â€œProxy settingsâ€, mettez <code>manual</code></li>
<li>Entrez les informations de mitmproxy pour vous y connecter</li>
<li>Validez</li>
</ul>
<p>Tout passera maintenant par lui et vous aurez dans votre shell une belle interface montrant toutes les trames passant.</p>
<p><img src="mitmproxy.png" alt=""></p>
<h2 id="note"><a class="markdownIt-Anchor" href="#note">#</a> Note</h2>
<p>Une petite note rapide. Pour utliser le Simulator iOS (si vous nâ€™avez pas dâ€™iPhone/iPad sous la main par exemple) il est possible que vous deviez installer <a href="https://github.com/google/ios-webkit-debug-proxy">iOS Webkit Debug Proxy</a>. Je nâ€™ai pas eu Ã  le faire mais <a href="https://twitter.com/tfeserver">@tfeserver</a> en a eu besoin. Je vous laisse Ã§a de cÃ´tÃ© si par hasard cela vous Ã©tait nÃ©cessaire.</p>
<hr>
<p>Avec Ã§a, vous pouvez maintenant masteriser le debug sur tous les appareils sans vous prendre la tÃªte. Il existe aussi une solution sâ€™appelant <a href="http://www.browsersync.io/">BrowserSync</a> permettant Ã  la fois le debug et la synchro des comportements sur les diffÃ©rents devices mais Ã§a, ce sera peut-Ãªtre pour un prochain post.</p>
<p>Bon dÃ©bug.</p>
]]></description><link>http://putaindecode.io/fr/articles/devtools/deboguer-tablettes-telephones/</link><guid isPermaLink="true">http://putaindecode.io/fr/articles/devtools/deboguer-tablettes-telephones/</guid><pubDate>Tue, 19 May 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[Les utilitaires en ligne de commande]]></title><description><![CDATA[<p>Avoir accÃ¨s Ã  ses utilitaires en ligne de commande (<a href="https://en.wikipedia.org/wiki/Command-line_interface">CLI</a>) est un quotidien dans nos mÃ©tiers et un avantage indÃ©niable. Ce nâ€™est pas nouveau et cela existe depuis la nuit des temps. Tout utilisateur
dâ€™Unix voue un culte particulier Ã  son terminal.</p>
<p>Jâ€™ai rÃ©cemment eu Ã  dÃ©velopper un utilitaire en Node.js/iojs, jâ€™ai donc voulu avec cet article dÃ©blayer un peu le terrain
et prÃ©senter quelques utilitaires trÃ¨s pratiques.</p>
<p>Deux postulats avant de commencer :</p>
<ul>
<li>Pourquoi JavaScript ? En cohÃ©rence avec le workflow que jâ€™utilise.</li>
<li>Cet article nâ€™a pas pour but dâ€™apprendre Ã  Ã©crire du JavaScript avec Node.js/iojs.</li>
</ul>
<h2 id="hello-world"><a class="markdownIt-Anchor" href="#hello-world">#</a> Hello world</h2>
<p>Avant de commencer Ã  coder, il va tout dâ€™abord falloir crÃ©er deux fichiers qui seront nÃ©cessaires et obligatoires :</p>
<pre><code class="language-console"><span class="hljs-comment">// crÃ©ation du dossier</span>
$ <span class="hljs-keyword">mkdir</span> putaindecode-<span class="hljs-keyword">cli</span> &amp;&amp; <span class="hljs-keyword">cd</span> putaindecode-<span class="hljs-keyword">cli</span>

<span class="hljs-comment">// crÃ©ation de index.js</span>
$ touch index.js

<span class="hljs-comment">// crÃ©ation de package.json</span>
$ touch package.json</code></pre>
<p>Le fichier <code>index.js</code> va se prÃ©senter comme ceci :</p>
<pre><code><span class="hljs-shebang">#!/usr/bin/env node</span>
<span class="hljs-comment">// Cette ligne ou shebang permet de dÃ©finir l'interprÃ©teur de notre script, Ã  savoir `node`</span>

<span class="hljs-comment">// notre fameux hello world</span>
console.log(<span class="hljs-string">"Hello world"</span>)</code></pre>
<p>Pour notre fichier <code>package.json</code>, deux mÃ©thodes possibles pour lâ€™Ã©crire, soit en faisant <code>npm init</code> puis suivre les instructions, soit adapter ce JSON :</p>
<pre><code class="language-console">{
  "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"putaindecode-cli"</span></span>,
  "<span class="hljs-attribute">version</span>": <span class="hljs-value"><span class="hljs-string">"0.1.0"</span></span>,
  "<span class="hljs-attribute">description</span>": <span class="hljs-value"><span class="hljs-string">"Putaindecode cli"</span></span>,
  "<span class="hljs-attribute">keywords</span>": <span class="hljs-value">[
    <span class="hljs-string">"cli"</span>,
    <span class="hljs-string">"npm"</span>
  ]</span>,
  "<span class="hljs-attribute">author</span>": <span class="hljs-value"><span class="hljs-string">"magsout"</span></span>,
  "<span class="hljs-attribute">license</span>": <span class="hljs-value"><span class="hljs-string">"MIT"</span></span>,
  "<span class="hljs-attribute">repository</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"git"</span></span>,
    "<span class="hljs-attribute">url</span>": <span class="hljs-value"><span class="hljs-string">"https://github.com/putaindecode/putaindecode-cli.git"</span>
  </span>}</span>,
  "<span class="hljs-attribute">engines</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">node</span>": <span class="hljs-value"><span class="hljs-string">"&gt;=0.10"</span>
  </span>}</span>,
  "<span class="hljs-attribute">homepage</span>":<span class="hljs-value"><span class="hljs-string">"https://github.com/putaindecode-cs/putaindecode-cli"</span>
  <span class="hljs-string">"bugs"</span>: {
    "<span class="hljs-attribute">url</span>": <span class="hljs-value"><span class="hljs-string">"https://github.com/putaindecode-cs/putaindecode-cli/issues"</span>
  </span>}</span>,
  "<span class="hljs-attribute">files</span>": <span class="hljs-value">[
    <span class="hljs-string">"index.js"</span>
  ]</span>,
  "<span class="hljs-attribute">dependencies</span>": <span class="hljs-value">{}</span>,
  "<span class="hljs-attribute">devDependencies</span>": <span class="hljs-value">{}</span>,
  "<span class="hljs-attribute">bin</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">putaindecode</span>": <span class="hljs-value"><span class="hljs-string">"index.js"</span>
  </span>}
</span>}</code></pre>
<p>La ligne importante Ã  ne surtout pas oublier :</p>
<pre><code class="language-console"><span class="hljs-string">"bin"</span>: {
  <span class="hljs-string">"putaindecode-cli"</span>: <span class="hljs-string">"index.js"</span>
}</code></pre>
<p>Elle permettra de dÃ©terminer le script Ã  exÃ©cuter lorsque la commande <code>putaindecode-cli</code> sera lancÃ©e.</p>
<p>Si on vulgarise un peu le principe, en installant le script, le fichier <code>index.js</code> sera renommÃ© en <code>putaindecode-cli.js</code> et sera copiÃ© dans le rÃ©pertoire adÃ©quat (cela dÃ©pend de lâ€™OS).</p>
<p>Lorsque la commande <code>putaindecode-cli</code> sera exÃ©cutÃ©e, le shell va chercher le fichier exÃ©cutable en utilisant les rÃ©pertoires listÃ©s dans la variable PATH.</p>
<p>Si on suit ce raisonnement, lâ€™installation dâ€™un script Ã©crasera automatiquement lâ€™ancienne version ou tout script de mÃªme nom.</p>
<p>Pour sâ€™assurer quâ€™il nâ€™existe pas dâ€™autres commandes portant le mÃªme nom, il est conseillÃ© dâ€™utiliser la commande : <code>which putaindecode-cli</code> qui ne retournera rien sâ€™il nâ€™y a aucun rÃ©sultat :</p>
<pre><code class="language-console"><span class="hljs-comment">#putaindecode-cli ne retourne aucun rÃ©sultat</span>
$ which putaindecode-cli

<span class="hljs-comment">#node est installÃ© et accessible au path suivant</span>
$ which <span class="hljs-keyword">node</span><span class="hljs-identifier">
  </span><span class="hljs-title">/usr</span>/local/bin/<span class="hljs-keyword">node</span><span class="hljs-identifier"></span><span class="hljs-title"></span></code></pre>
<h2 id="installation-du-script"><a class="markdownIt-Anchor" href="#installation-du-script">#</a> Installation du script</h2>
<p>Afin de vÃ©rifier que le script fonctionne correctement, il suffit tout simplement dâ€™exÃ©cuter dans le rÃ©pertoire la commande : <code>./index.js</code>.</p>
<p>Une erreur de droit ? Un petit chmod pour arranger Ã§a : <code>chmod +x index.js</code>.</p>
<p>Ã€ ce stade, si tout fonctionne bien, <code>Hello World</code> va sâ€™afficher.</p>
<p>Par contre, exÃ©cuter notre script de la sorte nâ€™est pas trÃ¨s pratique, dâ€™autant plus quâ€™il sera nÃ©cessaire de connaÃ®tre Ã  chaque fois le chemin vers le fichier.</p>
<p>Il serait beaucoup plus simple de pouvoir exÃ©cuter le script comme une commande. Comme pour tout package npm, cela se fait avec <code>npm install</code>.</p>
<pre><code class="language-console"><span class="hljs-comment">// installation en global du script</span>
$ npm install -<span class="hljs-keyword">g</span>

<span class="hljs-comment">// exÃ©cution de la commande</span>
$ putaindecode-<span class="hljs-keyword">cli</span>

<span class="hljs-comment">// rÃ©sultat de la commande</span>
Hello world</code></pre>
<p>Le script est maintenant accessible partout sur lâ€™OS grÃ¢ce Ã  la commande <code>putaindecode-cli</code>. Lâ€™installation en global nâ€™est pas absolument pas nÃ©cessaire, tout dÃ©pend de lâ€™intÃ©rÃªt de votre script. Il est dâ€™ailleurs souvent prÃ©fÃ©rable de lâ€™installer en local dans un projet avec <code>--save</code> ou <code>--save-dev</code>.</p>
<h2 id="installation-des-scripts-de-base"><a class="markdownIt-Anchor" href="#installation-des-scripts-de-base">#</a> Installation des scripts de base</h2>
<p>La puissance de <code>NPM</code> provient de son nombre impressionnant de packages mis Ã  disposition.</p>
<p>Pour gagner du temps et Ã©viter dâ€™avoir Ã  recoder la roue. Le script <code>putaindecode-cli</code> va avoir besoin de trois choses :</p>
<ul>
<li>une gestion des commandes (commande, argument, aide)</li>
<li>une gestion des couleurs (notice, error, warning)</li>
<li>une capacitÃ© Ã  stopper proprement notre code.</li>
</ul>
<h3 id="commander"><a class="markdownIt-Anchor" href="#commander">#</a> <code>commander</code></h3>
<p>Pour les commandes avec en prime la gestion des arguments et de lâ€™aide, <a href="https://github.com/tj/commander">commander</a> est tout a fait adaptÃ© et rÃ©pondra pratiquement Ã  tous nos besoins.</p>
<p>Il est simple dâ€™utilisation et trÃ¨s bien maintenu.</p>
<p>Voici un exemple de ce quâ€™on peut faire :</p>
<pre><code class="language-js"><span class="hljs-comment">/* Default */</span>
program
  .version(pkg.version)

<span class="hljs-comment">/* command */</span>
program
  .command(<span class="hljs-string">"command"</span>)
  .alias(<span class="hljs-string">'c'</span>)
  .description(<span class="hljs-string">"   command does something"</span>)
  .option(<span class="hljs-string">"-v, --verbose"</span>, <span class="hljs-string">"Verbose"</span>)
  .option(<span class="hljs-string">"-f, --force"</span>, <span class="hljs-string">"Force installation"</span>)
  .action(commandAction)
  .on(<span class="hljs-string">"--help"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"  Example:"</span>)
    <span class="hljs-built_in">console</span>.log();
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"     command does something"</span>)
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"     $ putaindecode-cli command"</span>)
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">""</span>)
  });

<span class="hljs-comment">/* help */</span>
program.on(<span class="hljs-string">"--help"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"  Examples:"</span>)
  <span class="hljs-built_in">console</span>.log();
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"     command do something"</span>)
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"     $ putaindecode-cli command"</span>)
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">""</span>)
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"     Force command does something"</span>)
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"     $ putaindecode-cli command -f"</span>)
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">""</span>)
});

program.parse(process.argv)

<span class="hljs-comment">/* help by default */</span>
<span class="hljs-keyword">if</span> (!program.args.length) program.help()</code></pre>
<h3 id="chalk"><a class="markdownIt-Anchor" href="#chalk">#</a> <code>chalk</code></h3>
<p><em>Null</em> besoin de faire un cours sur les couleurs, mais lâ€™affichage dâ€™une notice est bien plus pertinent avec sa couleur associÃ©e. Câ€™est Ã  ce moment quâ€™entre en jeu <a href="https://github.com/sindresorhus/chalk">chalk</a>. Relativement simple Ã  mettre en place et Ã  utiliser :</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> chalk = <span class="hljs-built_in">require</span>(<span class="hljs-string">'chalk'</span>)

<span class="hljs-comment">/* var */</span>
<span class="hljs-keyword">var</span> error   = chalk.bold.red
<span class="hljs-keyword">var</span> warn    = chalk.yellow
<span class="hljs-keyword">var</span> success = chalk.green
<span class="hljs-keyword">var</span> notice  = chalk.blue

<span class="hljs-comment">/* code */</span>
<span class="hljs-built_in">console</span>.log(warn(<span class="hljs-string">'No command'</span>))
<span class="hljs-built_in">console</span>.log(notice(<span class="hljs-string">"file modified !"</span>))</code></pre>
<h3 id="exit"><a class="markdownIt-Anchor" href="#exit">#</a> <code>exit</code></h3>
<p>Peu importe comment sâ€™exÃ©cute son code, il est important de bien savoir maitriser lâ€™arrÃªt de son script. Pour Ã§a, <code>process.exit()</code> nous sera bien utile.</p>
<p>Dans le cas dâ€™une erreur, la valeur de <code>exit</code> doit systÃ©matiquement Ãªtre supÃ©rieure Ã  0, et donc bien naturellement en cas de succÃ¨s, elle doit Ãªtre Ã©gale Ã  0.</p>
<p>Voici une <a href="http://www.virtsync.com/c-error-codes-include-errno">liste des valeurs</a> de <code>exit</code> et de leurs correspondances.</p>
<h2 id="thanks-god-for-our-terminal"><a class="markdownIt-Anchor" href="#thanks-god-for-our-terminal">#</a> Thanks god for our terminal</h2>
<p>Si vous souhaitez voir quelques exemples de projets avec des commandes et des mises en situations intÃ©ressantes, allez faire un tour sur ces projets :</p>
<ul>
<li><a href="https://github.com/cssnext/cssnext/blob/master/bin/cssnext.js">cssnext</a></li>
<li><a href="https://github.com/sindresorhus/trash/blob/master/cli.js">trash</a></li>
</ul>
<p>Je vous invite Ã©galement Ã  visionner la <a href="http://blog.clement.delafargue.name/posts/2015-02-25-declarative-cli-parsing-in-js.html">vidÃ©o</a> de <a href="https://twitter.com/clementd">Clement Delafargue</a> qui a fait une prÃ©sentation sur le sujet en dÃ©but dâ€™annÃ©e.</p>
<p>Ã€ partir de lÃ  on dispose dâ€™une bonne base pour refaire le monde et accroÃ®tre la flemme du dÃ©veloppeur que lâ€™on est en automatisant tout plein de tÃ¢ches.</p>
]]></description><link>http://putaindecode.io/fr/articles/npm/utilitaire-cli/</link><guid isPermaLink="true">http://putaindecode.io/fr/articles/npm/utilitaire-cli/</guid><pubDate>Tue, 12 May 2015 00:00:00 GMT</pubDate></item></channel></rss>